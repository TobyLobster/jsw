; $.JSW1   000b00 001f90 002500

; to_write_status_line
&0b00 4c 50 0c JMP &0c50 ; write_status_line

; to_handle_rope_time_and_events
&0b03 4c 2a 0b JMP &0b2a ; handle_rope_time_and_events

; to_collect_item
&0b06 4c 8d 0c JMP &0c8d ; collect_item

; to_reset_game                                                     # Unused
&0b09 4c 48 0d JMP &0d48 ; reset_game

; to_mark_enemies_that_overlap_player
&0b0c 4c 0b 0e JMP &0e0b ; mark_enemies_that_overlap_player

; to_update_arrows
&0b0f 4c 33 0e JMP &0e33 ; update_arrows

; to_to_calculate_screen_address                                    # Unused
&0b12 4c 18 11 JMP &1118 ; to_calculate_screen_address

; to_update_lives
&0b15 4c d5 0e JMP &0ed5 ; update_lives

; to_initialise_room_background_tiles_and_title
&0b18 4c 1c 0f JMP &0f1c ; initialise_room_background_tiles_and_title

; to_initialise_arrows
&0b1b 20 c4 0f JSR &0fc4 ; initialise_arrows

; to_handle_room_tweaks_on_entry                                    # Unused
&0b1e 4c 01 10 JMP &1001 ; handle_room_tweaks_on_entry

; to_real_entry_point
&0b21 4c 4f 10 JMP &104f ; real_entry_point

; to_game_over                                                      # Unused
&0b24 4c 78 10 JMP &1078 ; game_over

; to_play_sound_number_a
&0b27 4c d1 10 JMP &10d1 ; play_sound_number_a

; handle_rope_time_and_events
&0b2a a5 6f    LDA &6f ; room_contains_rope
&0b2c f0 3e    BEQ &0b6c ; no_rope
&0b2e 20 d0 0b JSR &0bd0 ; unplot_rope
&0b31 a9 80    LDA #&80
&0b33 85 5d    STA &5d ; rope_end_x
&0b35 a9 00    LDA #&00
&0b37 85 7b    STA &7b ; rope_pixel_touched
&0b39 85 5e    STA &5e ; rope_end_y
&0b3b a6 5f    LDX &5f ; rope_position
&0b3d a9 1f    LDA #&1f
&0b3f 85 7a    STA &7a ; rope_pixel_to_consider
; update_rope_pixels_loop
&0b41 20 72 0b JSR &0b72 ; update_rope_pixel
&0b44 c6 7a    DEC &7a ; rope_pixel_to_consider
&0b46 d0 f9    BNE &0b41 ; update_rope_pixels_loop
&0b48 a5 5c    LDA &5c ; rope_velocity_relative_to_centre
&0b4a 0a       ASL A
&0b4b 18       CLC
&0b4c 65 5f    ADC &5f ; rope_position
&0b4e a8       TAY
&0b4f c9 d2    CMP #&d2
&0b51 d0 08    BNE &0b5b ; rope_didn't_change_sides
&0b53 a5 5b    LDA &5b ; rope_position_relative_to_centre
&0b55 49 ff    EOR #&ff
&0b57 85 5b    STA &5b ; rope_position_relative_to_centre
&0b59 a9 08    LDA #&08
; rope_didn't_change_sides
&0b5b c9 08    CMP #&08
&0b5d d0 08    BNE &0b67 ; rope_didn't_reach_end
&0b5f a5 5c    LDA &5c ; rope_velocity_relative_to_centre
&0b61 49 ff    EOR #&ff
&0b63 85 5c    STA &5c ; rope_velocity_relative_to_centre
&0b65 e6 5c    INC &5c ; rope_velocity_relative_to_centre
; rope_didn't_reach_end
&0b67 84 5f    STY &5f ; rope_position
&0b69 20 e6 0b JSR &0be6 ; check_for_player_contact_with_rope
; no_rope
&0b6c 20 d4 0c JSR &0cd4 ; handle_time
&0b6f 4c 85 0d JMP &0d85 ; handle_endgame

; update_rope_pixel
&0b72 86 96    STX &96 ; rope_pixel_position
&0b74 8a       TXA
&0b75 10 08    BPL &0b7f ; skip_floor
&0b77 a2 26    LDX #&26
&0b79 c9 f0    CMP #&f0
&0b7b b0 02    BCS &0b7f ; skip_floor
&0b7d a2 27    LDX #&27
; skip_floor
&0b7f bd 00 09 LDA &0900,X ; rope_x_delta_table
&0b82 c5 5b    CMP &5b ; rope_position_relative_to_centre
&0b84 90 02    BCC &0b88 ; skip_inversion
&0b86 49 ff    EOR #&ff
; skip_inversion
&0b88 65 5d    ADC &5d ; rope_end_x
&0b8a 85 5d    STA &5d ; rope_end_x
&0b8c a5 5e    LDA &5e ; rope_end_y
&0b8e 18       CLC
&0b8f 7d 28 09 ADC &0928,X ; rope_y_delta_table
&0b92 85 5e    STA &5e ; rope_end_y
&0b94 a4 7a    LDY &7a ; rope_pixel_to_consider
&0b96 99 b6 09 STA &09b6,Y ; rope_pixels_y
&0b99 aa       TAX
&0b9a a5 5d    LDA &5d ; rope_end_x
&0b9c 99 94 09 STA &0994,Y ; rope_pixels_x
&0b9f 20 b2 0b JSR &0bb2 ; plot_rope_pixel
&0ba2 a5 90    LDA &90 ; screen_address_low
&0ba4 a6 7a    LDX &7a ; rope_pixel_to_consider
&0ba6 9d 50 09 STA &0950,X ; rope_pixels_screen_address_low_table
&0ba9 a5 91    LDA &91 ; screen_address_high
&0bab 9d 72 09 STA &0972,X ; rope_pixels_screen_address_high_table
&0bae a6 96    LDX &96 ; rope_pixel_position
&0bb0 e8       INX
&0bb1 60       RTS

; plot_rope_pixel
&0bb2 85 97    STA &97 ; rope_pixel_x
&0bb4 20 18 11 JSR &1118 ; to_calculate_screen_address
&0bb7 a0 00    LDY #&00
&0bb9 b1 90    LDA (&90),Y ; screen_address
&0bbb f0 04    BEQ &0bc1 ; rope_not_touching_player                 # Bug: triggers for enemies too (e.g. Cold Store)
&0bbd a5 7a    LDA &7a ; rope_pixel_to_consider
&0bbf 85 7b    STA &7b ; rope_pixel_touched
; rope_not_touching_player
&0bc1 a5 97    LDA &97 ; rope_pixel_x
&0bc3 29 03    AND #&03
&0bc5 aa       TAX
&0bc6 bd cc 0b LDA &0bcc,X ; rope_pixel_values_table
&0bc9 91 90    STA (&90),Y ; screen_address
&0bcb 60       RTS

; rope_pixel_values_table
&0bcc 88 44 22 11

; unplot_rope
&0bd0 a2 1f    LDX #&1f
&0bd2 a0 00    LDY #&00
; unplot_rope_loop
&0bd4 bd 50 09 LDA &0950,X ; rope_pixels_screen_address_low_table
&0bd7 85 90    STA &90 ; rope_pixels_screen_address_low
&0bd9 bd 72 09 LDA &0972,X ; rope_pixels_screen_address_high_table
&0bdc 85 91    STA &91 ; rope_pixels_screen_address_high
&0bde a9 00    LDA #&00
&0be0 91 90    STA (&90),Y ; rope_pixels_screen_address
&0be2 ca       DEX
&0be3 10 ef    BPL &0bd4 ; unplot_rope_loop
&0be5 60       RTS

; check_for_player_contact_with_rope
&0be6 a6 9f    LDX &9f ; player_rope_pixel
&0be8 d0 17    BNE &0c01 ; player_already_on_rope
&0bea a5 7b    LDA &7b ; rope_pixel_touched
&0bec f0 61    BEQ &0c4f ; leave
&0bee a2 00    LDX #&00
&0bf0 86 9a    STX &9a ; player_entered_room_falling_too_far
&0bf2 ad 24 0a LDA &0a24 ; player_y_in_enemies
; check_y_loop
&0bf5 e8       INX
&0bf6 dd b6 09 CMP &09b6,X ; rope_pixels_y
&0bf9 90 fa    BCC &0bf5 ; check_y_loop
&0bfb e0 02    CPX #&02
&0bfd 90 43    BCC &0c42 ; remove_player_from_rope
&0bff 86 9f    STX &9f ; player_rope_pixel
; player_already_on_rope
&0c01 a5 65    LDA &65 ; player_jump_timer
&0c03 c9 0e    CMP #&0e
&0c05 b0 3b    BCS &0c42 ; remove_player_from_rope
&0c07 a9 00    LDA #&00
&0c09 85 64    STA &64 ; player_is_jumping
&0c0b 85 65    STA &65 ; player_jump_timer
&0c0d bd 94 09 LDA &0994,X ; rope_pixels_x
&0c10 38       SEC
&0c11 e9 04    SBC #&04
&0c13 29 fe    AND #&fe
&0c15 8d 1b 0a STA &0a1b ; player_x_in_enemies
&0c18 bd b6 09 LDA &09b6,X ; rope_pixels_y
&0c1b 38       SEC
&0c1c e9 06    SBC #&06
&0c1e 10 02    BPL &0c22 ; skip_floor
&0c20 a9 c0    LDA #&c0
; skip_floor
&0c22 8d 24 0a STA &0a24 ; player_y_in_enemies
&0c25 a5 8e    LDA &8e ; player_horizontal_speed
&0c27 f0 26    BEQ &0c4f ; leave
&0c29 a5 5b    LDA &5b ; rope_position_relative_to_centre
&0c2b 45 5c    EOR &5c ; rope_velocity_relative_to_centre
&0c2d e8       INX
&0c2e 45 8e    EOR &8e ; player_horizontal_speed
&0c30 10 02    BPL &0c34 ; player_moving_up_rope
; player_moving_down_rope
&0c32 ca       DEX
&0c33 ca       DEX
; player_moving_up_rope
&0c34 86 9f    STX &9f ; player_rope_pixel
&0c36 e0 03    CPX #&03
&0c38 b0 15    BCS &0c4f ; leave
&0c3a ad 24 0a LDA &0a24 ; player_y_in_enemies                      # Make player fall off bottom of rope
&0c3d 69 04    ADC #&04
&0c3f 8d 24 0a STA &0a24 ; player_y_in_enemies
; remove_player_from_rope
&0c42 ad 24 0a LDA &0a24 ; player_y_in_enemies
&0c45 29 fc    AND #&fc
&0c47 8d 24 0a STA &0a24 ; player_y_in_enemies
&0c4a a9 00    LDA #&00
&0c4c 85 9f    STA &9f ; player_rope_pixel
&0c4e 60       RTS
; leave
&0c4f 60       RTS

; write_status_line
&0c50 a2 ff    LDX #&ff
; write_items_collected_loop
&0c52 e8       INX
&0c53 bd 63 0c LDA &0c63,X ; items_collected_string
&0c56 20 ee ff JSR &ffee ; OSWRCH
&0c59 c9 04    CMP #&04
&0c5b d0 f5    BNE &0c52 ; write_items_collected_loop
&0c5d 20 ad 0c JSR &0cad ; write_items_collected
&0c60 4c 23 0d JMP &0d23 ; write_time

; items_collected_string
&0c63 1a 1f 00 14 49 74 65 6d 73 20 63 6f 6c 6c 65 63 ; Restore default window, TAB(&00, &14)
&0c73 74 65 64 20 30 30 30 20 54 69 6d 65 20 20 37 3a ; "Items collected 000 Time   7:00pm"
&0c83 30 30 70 6d 1c 00 14 1f 00 04                   ; Define text window x:(&00,&1f) y:(&04,&14)

; collect_item
&0c8d a9 18    LDA #&18 ; sound_3
&0c8f 20 d1 10 JSR &10d1 ; play_sound_number_a                      # Play sound for collecting item
&0c92 ee bc 0c INC &0cbc ; items_collected_low
&0c95 ad bc 0c LDA &0cbc ; items_collected_low
&0c98 c9 0a    CMP #&0a
&0c9a 90 11    BCC &0cad ; write_items_collected
&0c9c ee bd 0c INC &0cbd ; items_collected_high
&0c9f a9 00    LDA #&00
&0ca1 8d bc 0c STA &0cbc ; items_collected_low
&0ca4 ad bd 0c LDA &0cbd ; items_collected_high
&0ca7 c9 08    CMP #&08
&0ca9 90 02    BCC &0cad ; write_items_collected
&0cab e6 9e    INC &9e ; house_clear                                # 80 items needed to clear house
; write_items_collected
&0cad a2 11    LDX #&11
&0caf ac bd 0c LDY &0cbd ; items_collected_high
&0cb2 20 be 0c JSR &0cbe ; write_digit_y_at_status_line_column_x
&0cb5 ad bc 0c LDA &0cbc ; items_collected_low
&0cb8 20 cd 0c JSR &0ccd ; write_digit_a
&0cbb 60       RTS

; items_collected_low
&0cbc 00
; items_collected_high
&0cbd 00

; write_digit_y_at_status_line_column_x
&0cbe a9 1f    LDA #&1f
&0cc0 20 ee ff JSR &ffee ; OSWRCH
&0cc3 8a       TXA
&0cc4 20 ee ff JSR &ffee ; OSWRCH
&0cc7 a9 14    LDA #&14
&0cc9 20 ee ff JSR &ffee ; OSWRCH
&0ccc 98       TYA
; write_digit_a
&0ccd 18       CLC
&0cce 69 30    ADC #&30 ; "0"
&0cd0 20 ee ff JSR &ffee ; OSWRCH
&0cd3 60       RTS

; handle_time
&0cd4 c6 57    DEC &57 ; game_timer
&0cd6 d0 6a    BNE &0d42 ; leave
&0cd8 ee 47 0d INC &0d47 ; time_fraction
&0cdb ad 47 0d LDA &0d47 ; time_fraction
&0cde c9 03    CMP #&03
&0ce0 d0 60    BNE &0d42 ; leave
&0ce2 a0 00    LDY #&00
&0ce4 8c 47 0d STY &0d47 ; time_fraction
&0ce7 ee 43 0d INC &0d43 ; minutes_low
&0cea ad 43 0d LDA &0d43 ; minutes_low
&0ced c9 0a    CMP #&0a
&0cef 90 32    BCC &0d23 ; write_time
&0cf1 8c 43 0d STY &0d43 ; minutes_low
&0cf4 ee 44 0d INC &0d44 ; minutes_high
&0cf7 ad 44 0d LDA &0d44 ; minutes_high
&0cfa c9 06    CMP #&06
&0cfc 90 25    BCC &0d23 ; write_time
&0cfe 8c 44 0d STY &0d44 ; minutes_high
&0d01 ee 45 0d INC &0d45 ; hours_low
&0d04 ad 45 0d LDA &0d45 ; hours_low
&0d07 c9 0a    CMP #&0a
&0d09 90 08    BCC &0d13
&0d0b 8c 45 0d STY &0d45 ; hours_low
&0d0e a9 01    LDA #&01
&0d10 8d 46 0d STA &0d46 ; hours_high
&0d13 ad 45 0d LDA &0d45 ; hours_low
&0d16 c9 02    CMP #&02
&0d18 d0 09    BNE &0d23 ; write_time
&0d1a ad 46 0d LDA &0d46 ; hours_high
&0d1d 30 04    BMI &0d23 ; write_time
&0d1f e6 9d    INC &9d ; out_of_time
&0d21 e6 63    INC &63 ; player_killed
; write_time
&0d23 a2 19    LDX #&19
&0d25 ac 46 0d LDY &0d46 ; hours_high
&0d28 20 be 0c JSR &0cbe ; write_digit_y_at_status_line_column_x
&0d2b ad 45 0d LDA &0d45 ; hours_low
&0d2e 20 cd 0c JSR &0ccd ; write_digit_a
&0d31 a9 3a    LDA #&3a ; ":"
&0d33 20 ee ff JSR &ffee ; OSWRCH
&0d36 ad 44 0d LDA &0d44 ; minutes_high
&0d39 20 cd 0c JSR &0ccd ; write_digit_a
&0d3c ad 43 0d LDA &0d43 ; minutes_low
&0d3f 20 cd 0c JSR &0ccd ; write_digit_a
; leave
&0d42 60       RTS

; minutes_low
&0d43 00
; minutes_high
&0d44 00
; hours_low
&0d45 07
; hours_high
&0d46 f0
; time_fraction
&0d47 00

; reset_game
&0d48 a9 00    LDA #&00
&0d4a 8d 47 0d STA &0d47 ; time_fraction
&0d4d 85 9a    STA &9a ; player_entered_room_falling_too_far
&0d4f 8d bc 0c STA &0cbc ; items_collected_low
&0d52 8d bd 0c STA &0cbd ; items_collected_high
&0d55 8d 43 0d STA &0d43 ; minutes_low
&0d58 8d 44 0d STA &0d44 ; minutes_high
&0d5b 85 9e    STA &9e ; house_clear
&0d5d 85 9d    STA &9d ; out_of_time
&0d5f 85 64    STA &64 ; player_is_jumping
&0d61 85 65    STA &65 ; player_jump_timer
&0d63 85 4f    STA &4f ; swimming_pool_item_collected
&0d65 a9 f0    LDA #&f0
&0d67 8d 46 0d STA &0d46 ; hours_high
&0d6a a9 07    LDA #&07                                             # Game starts at 7:00pm
&0d6c 8d 45 0d STA &0d45 ; hours_low
&0d6f a9 07    LDA #&07                                             # Player starts with 7 lives
&0d71 85 9b    STA &9b ; player_lives
&0d73 a9 68    LDA #&68
&0d75 8d 24 0a STA &0a24 ; player_y_in_enemies
&0d78 a9 a8    LDA #&a8
&0d7a 8d 1b 0a STA &0a1b ; player_x_in_enemies
&0d7d a9 15    LDA #&15                                             # Player starts in "The Bathroom"
&0d7f 85 55    STA &55 ; player_room
&0d81 20 00 11 JSR &1100 ; to_reset_items
&0d84 60       RTS

; handle_endgame
&0d85 a5 55    LDA &55 ; player_room
&0d87 c9 13    CMP #&13 ; Master Bedroom
&0d89 d0 1f    BNE &0daa ; not_master_bedroom
&0d8b ad 24 0a LDA &0a24 ; player_y_in_enemies
&0d8e c9 67    CMP #&67
&0d90 b0 0a    BCS &0d9c ; below_maria
&0d92 a2 0a    LDX #&0a
&0d94 c9 60    CMP #&60
&0d96 b0 0f    BCS &0da7 ; set_maria_offset
&0d98 a2 0b    LDX #&0b                                             # Make Maria raise her arm when Willy in line of sight
&0d9a d0 0b    BNE &0da7 ; set_maria_offset
; below_maria
&0d9c ad 0a 0a LDA &0a0a ; enemies_unpacked_sprite_offset + 1
&0d9f 29 09    AND #&09
&0da1 49 01    EOR #&01
&0da3 8d 0a 0a STA &0a0a ; enemies_unpacked_sprite_offset + 1
&0da6 aa       TAX
; set_maria_offset
&0da7 8e 0a 0a STX &0a0a ; enemies_unpacked_sprite_offset + 1
; not_master_bedroom
&0daa c9 15    CMP #&15 ; The Bathroom
&0dac d0 0e    BNE &0dbc ; not_the_bathroom
&0dae a5 57    LDA &57 ; game_timer
&0db0 29 01    AND #&01
&0db2 d0 08    BNE &0dbc ; not_the_bathroom
&0db4 ad 0b 0a LDA &0a0b ; enemies_unpacked_sprite_offset + 2
&0db7 49 01    EOR #&01                                             # Make the toilet flap its lid
&0db9 8d 0b 0a STA &0a0b ; enemies_unpacked_sprite_offset + 2
; not_the_bathroom
&0dbc a5 9e    LDA &9e ; house_clear
&0dbe f0 4a    BEQ &0e0a ; leave                                    # Has the player collected all the items?
&0dc0 30 17    BMI &0dd9 ; dash_for_toilet                          # If so, are they dashing for the toilet?
; check_for_pillow
&0dc2 a5 55    LDA &55 ; player_room
&0dc4 c9 13    CMP #&13 ; Master Bedroom
&0dc6 d0 42    BNE &0e0a ; leave
&0dc8 a9 00    LDA #&00
&0dca 8d 49 0a STA &0a49 ; enemies_colour + 1                       # Hide Maria if all items have been collected
&0dcd ad 1b 0a LDA &0a1b ; player_x_in_enemies
&0dd0 c9 18    CMP #&18
&0dd2 d0 36    BNE &0e0a ; leave                                    # Is the player about to touch the pillow?
&0dd4 a9 ff    LDA #&ff                                             # If so, make them dash for the toilet
&0dd6 85 9e    STA &9e ; house_clear
&0dd8 60       RTS
; dash_for_toilet
&0dd9 a9 02    LDA #&02
&0ddb 85 8e    STA &8e ; player_horizontal_speed                    # Make the player move right.
&0ddd a9 00    LDA #&00
&0ddf 85 8b    STA &8b ; player_started_jump
&0de1 a5 55    LDA &55 ; player_room
&0de3 c9 14    CMP #&14 ; Top Landing                               # Is the player in Top Landing?
&0de5 d0 0e    BNE &0df5 ; not_top_landing
&0de7 ad 1b 0a LDA &0a1b ; player_x_in_enemies
&0dea c9 88    CMP #&88                                             # Jump over hole
&0dec f0 04    BEQ &0df2 ; force_jump
&0dee c9 b0    CMP #&b0                                             # Jump over enemy
&0df0 d0 02    BNE &0df4 ; leave
; force_jump
&0df2 e6 8b    INC &8b ; player_started_jump
; leave
&0df4 60       RTS
; not_top_landing
&0df5 90 13    BCC &0e0a ; leave                                    # Is the player in The Bathroom?
&0df7 ad 1b 0a LDA &0a1b ; player_x_in_enemies
&0dfa c9 d8    CMP #&d8
&0dfc 90 0c    BCC &0e0a ; leave                                    # Is the player about to touch the toilet?
&0dfe a9 0a    LDA #&0a
&0e00 0d 0b 0a ORA &0a0b ; enemies_unpacked_sprite_offset + 2
&0e03 8d 0b 0a STA &0a0b ; enemies_unpacked_sprite_offset + 2       # Set the toilet to contain the player's legs.
&0e06 a9 02    LDA #&02
&0e08 85 9c    STA &9c ; player_not_plotted                         # Set the player to be unplotted, but not plotted
; leave
&0e0a 60       RTS

; mark_enemies_that_overlap_player                                  # Called with tile_address of the player
&0e0b a0 20    LDY #&20
&0e0d 20 1e 0e JSR &0e1e ; check_tiles_for_enemy
&0e10 a0 40    LDY #&40
&0e12 20 1e 0e JSR &0e1e ; check_tiles_for_enemy
&0e15 ad 24 0a LDA &0a24 ; player_y_in_enemies
&0e18 29 07    AND #&07
&0e1a f0 16    BEQ &0e32 ; leave
&0e1c a0 60    LDY #&60
; check_tiles_for_enemy
&0e1e 20 22 0e JSR &0e22 ; check_tile_for_enemy
&0e21 c8       INY
; check_tile_for_enemy
&0e22 b1 60    LDA (&60),Y ; tile_address
&0e24 10 0c    BPL &0e32 ; leave                                    # Is there an enemy in this tile?
&0e26 c9 8a    CMP #&8a
&0e28 b0 08    BCS &0e32 ; leave
&0e2a 29 0f    AND #&0f
&0e2c aa       TAX
&0e2d a9 02    LDA #&02
&0e2f 9d 63 0a STA &0a63,X ; enemies_need_replot                    # Set enemy to not need unplotting, killing player
; leave
&0e32 60       RTS

; update_arrows
&0e33 a0 01    LDY #&01
; update_arrows_loop
&0e35 be 7c 0a LDX &0a7c,Y ; arrow_timer
&0e38 30 2a    BMI &0e64 ; update_active_arrow
&0e3a f0 24    BEQ &0e60 ; consider_next_arrow
&0e3c a5 57    LDA &57 ; game_timer
&0e3e 29 01    AND #&01
&0e40 d0 1e    BNE &0e60 ; consider_next_arrow
&0e42 ca       DEX
&0e43 d0 0e    BNE &0e53 ; no_new_arrow
&0e45 a9 ff    LDA #&ff
&0e47 99 7c 0a STA &0a7c,Y ; arrow_timer
&0e4a b9 cd 0e LDA &0ecd,Y ; arrow_initial_x_positions
&0e4d 99 d1 0e STA &0ed1,Y ; arrow_x
&0e50 4c 7d 0e JMP &0e7d ; arrow_still_active
; no_new_arrow
&0e53 8a       TXA
&0e54 99 7c 0a STA &0a7c,Y ; arrow_timer
&0e57 c9 03    CMP #&03
&0e59 d0 05    BNE &0e60 ; consider_next_arrow
&0e5b a9 20    LDA #&20 ; sound_4
&0e5d 20 d1 10 JSR &10d1 ; play_sound_number_a                      # Play sound for arrow firing
; consider_next_arrow
&0e60 88       DEY
&0e61 10 d2    BPL &0e35 ; update_arrows_loop
&0e63 60       RTS

; update_active_arrow
&0e64 20 91 0e JSR &0e91 ; plot_arrow                               # Unplot arrow
&0e67 b9 d1 0e LDA &0ed1,Y ; arrow_x
&0e6a 18       CLC
&0e6b 79 cf 0e ADC &0ecf,Y ; arrow_speeds
&0e6e 99 d1 0e STA &0ed1,Y ; arrow_x
&0e71 d9 cd 0e CMP &0ecd,Y ; arrow_initial_x_positions
&0e74 d0 07    BNE &0e7d ; arrow_still_active
&0e76 a9 7f    LDA #&7f
&0e78 99 7c 0a STA &0a7c,Y ; arrow_timer
&0e7b 10 e3    BPL &0e60 ; consider_next_arrow
; arrow_still_active
&0e7d 20 91 0e JSR &0e91 ; plot_arrow
&0e80 a2 08    LDX #&08                                             # Use enemy slot 8 for arrow
&0e82 20 15 11 JSR &1115 ; to_calculate_tile_address_for_enemy_X
&0e85 a0 20    LDY #&20
&0e87 b1 60    LDA (&60),Y ; tile_address
&0e89 a4 96    LDY &96 ; arrow
&0e8b 99 d3 0e STA &0ed3,Y ; arrow_active
&0e8e 4c 60 0e JMP &0e60 ; consider_next_arrow

; plot_arrow
&0e91 84 96    STY &96 ; arrow
&0e93 b9 d1 0e LDA &0ed1,Y ; arrow_x
&0e96 8d 23 0a STA &0a23 ; enemies_x + 8
&0e99 be 7e 0a LDX &0a7e,Y ; arrow_y
&0e9c 8e 2c 0a STX &0a2c ; enemies_y + 8
&0e9f 20 18 11 JSR &1118 ; to_calculate_screen_address
&0ea2 b9 cb 0e LDA &0ecb,Y ; arrow_sprite_offsets
&0ea5 8d b0 0e STA &0eb0 ; arrow_sprite_address_low
&0ea8 b9 d3 0e LDA &0ed3,Y ; arrow_active
&0eab 30 0f    BMI &0ebc ; unplot_arrow
&0ead a0 0f    LDY #&0f
; plot_arrow_loop
&0eaf b9 60 70 LDA &7060,Y ; &7060 = sprite_arrow_left
#     actually LDA arrow_sprite_address,Y
&0eb2 51 90    EOR (&90),Y ; screen_address
&0eb4 91 90    STA (&90),Y ; screen_address
&0eb6 88       DEY
&0eb7 d0 f6    BNE &0eaf ; plot_arrow_loop
&0eb9 a4 96    LDY &96 ; arrow
&0ebb 60       RTS
; unplot_arrow
&0ebc a9 00    LDA #&00
&0ebe 99 d3 0e STA &0ed3,Y ; arrow_active
&0ec1 a0 0f    LDY #&0f
; wipe_arrow_loop
&0ec3 91 90    STA (&90),Y ; screen_address
&0ec5 88       DEY
&0ec6 d0 fb    BNE &0ec3 ; wipe_arrow_loop
&0ec8 a4 96    LDY &96 ; arrow
&0eca 60       RTS

; arrow_sprite_offsets
&0ecb 70 60

; arrow_initial_x_positions
&0ecd 00 f8

; arrow_speeds
&0ecf 08 f8

; arrow_x
&0ed1 00 00

; arrow_active
&0ed3 00 00

; update_lives
&0ed5 a5 57    LDA &57 ; game_timer
&0ed7 29 03    AND #&03
&0ed9 d0 3b    BNE &0f16 ; leave
&0edb ad 17 0f LDA &0f17 ; life_sprite_address_low
&0ede 18       CLC
&0edf 69 40    ADC #&40
&0ee1 8d 17 0f STA &0f17 ; life_sprite_address_low
&0ee4 85 92    STA &92 ; sprite_address_low
&0ee6 a9 72    LDA #&72 ; &7200 = player_sprite_right_frame_0
&0ee8 85 93    STA &93 ; sprite_address_high
&0eea a9 03    LDA #&03
&0eec 85 7b    STA &7b ; life_colour
&0eee a9 f0    LDA #&f0
&0ef0 85 97    STA &97 ; life_x
&0ef2 a5 9b    LDA &9b ; player_lives
&0ef4 f0 20    BEQ &0f16 ; leave
&0ef6 85 96    STA &96 ; lives_remaining_to_plot
; update_lives_loop
&0ef8 a6 7b    LDX &7b ; life_colour
&0efa ca       DEX
&0efb d0 02    BNE &0eff ; skip_floor
&0efd a2 03    LDX #&03
; skip_floor
&0eff 86 7b    STX &7b ; life_colour
&0f01 bd 18 0f LDA &0f18,X ; life_colours
&0f04 85 89    STA &89 ; sprite_colour
&0f06 a5 97    LDA &97 ; life_x
&0f08 18       CLC
&0f09 69 10    ADC #&10
&0f0b 85 97    STA &97 ; life_x
&0f0d a6 4d    LDX &4d ; life_y
&0f0f 20 0f 11 JSR &110f ; to_plot_sprite
&0f12 c6 96    DEC &96 ; lives_remaining_to_plot
&0f14 d0 e2    BNE &0ef8 ; update_lives_loop
; leave
&0f16 60       RTS

; life_sprite_address_low
&0f17 00

; life_colours
;     KK RR YY WW
&0f18 00 0f f0 ff

; initialise_room_background_tiles_and_title
&0f1c a0 04    LDY #&04                                             # For each of five tiles,
; set_tile_colours_loop
&0f1e a2 02    LDX #&02
&0f20 20 12 11 JSR &1112 ; to_get_x_bits_of_room_data               # Get two bits of room data for each tile colour
&0f23 99 f1 09 STA &09f1,Y ; background_tiles_colours
&0f26 88       DEY
&0f27 10 f5    BPL &0f1e ; set_tile_colours_loop
&0f29 a0 05    LDY #&05                                             # For each of six tiles,
; set_tile_sprites_loop
&0f2b a2 08    LDX #&08                                             # Get eight bits of room data for each tile sprite
&0f2d 20 12 11 JSR &1112 ; to_get_x_bits_of_room_data
&0f30 99 f7 09 STA &09f7,Y ; background_tiles_sprites
&0f33 88       DEY
&0f34 10 f5    BPL &0f2b ; set_tile_sprites_loop
&0f36 a0 03    LDY #&03                                             # For each of four screen colours,
; set_screen_colours_loop
&0f38 a2 03    LDX #&03
&0f3a 20 12 11 JSR &1112 ; to_get_x_bits_of_room_data               # Get three bits of room data for each screen colour
&0f3d 20 aa 0f JSR &0faa ; set_colour_y_to_a
&0f40 88       DEY
&0f41 10 f5    BPL &0f38 ; set_screen_colours_loop
&0f43 a9 01    LDA #&01                                             # First word is uppercase
&0f45 85 97    STA &97 ; start_of_word
&0f47 a9 1f    LDA #&1f
&0f49 20 ee ff JSR &ffee ; OSWRCH
&0f4c a2 04    LDX #&04                                             # Get four bits of room data for position of room title
&0f4e 20 12 11 JSR &1112 ; to_get_x_bits_of_room_data
&0f51 20 ee ff JSR &ffee ; OSWRCH
&0f54 a9 10    LDA #&10
&0f56 20 ee ff JSR &ffee ; OSWRCH                                   # TAB to start of room title
; write_room_title_loop
&0f59 a2 05    LDX #&05                                             # Get five bits of room data for each character of title
&0f5b 20 12 11 JSR &1112 ; to_get_x_bits_of_room_data
&0f5e c9 1b    CMP #&1b
&0f60 b0 06    BCS &0f68 ; is_1b_1c_1d_1e_or_1f
&0f62 20 99 0f JSR &0f99 ; write_letter                             # &00 to &1a writes "a" to "z"
&0f65 4c 59 0f JMP &0f59 ; write_room_title_loop
; is_1b_1c_1d_1e_or_1f
&0f68 d0 08    BNE &0f72 ; is_1c_1d_1e_or_1f
&0f6a a9 27    LDA #&27 ; "'"                                       # &1b writes "'"
&0f6c 20 ee ff JSR &ffee ; OSWRCH
&0f6f 4c 59 0f JMP &0f59 ; write_room_title_loop
; is_1c_1d_1e_or_1f
&0f72 c9 1d    CMP #&1d
&0f74 f0 09    BEQ &0f7f ; is_1d
&0f76 b0 01    BCS &0f79 ; is_1e_or_1f
&0f78 60       RTS                                                  # &1c ends room title
; is_1e_or_1f
&0f79 c9 1e    CMP #&1e
&0f7b d0 0a    BNE &0f87 ; is_1f
&0f7d e6 97    INC &97 ; start_of_word                              # &1e writes " ", resetting case
; is_1d
&0f7f a9 20    LDA #&20 ; " "                                       # &1d writes " ", keeping lower case
&0f81 20 ee ff JSR &ffee ; OSWRCH
&0f84 4c 59 0f JMP &0f59 ; write_room_title_loop
; is_1f
&0f87 a9 13    LDA #&13 ; "t"                                       # &1f writes "The"
&0f89 20 99 0f JSR &0f99 ; write_letter
&0f8c a9 68    LDA #&68 ; "h"
&0f8e 20 ee ff JSR &ffee ; OSWRCH
&0f91 a9 65    LDA #&65 ; "e"
&0f93 20 ee ff JSR &ffee ; OSWRCH
&0f96 4c 59 0f JMP &0f59 ; write_room_title_loop

; write_letter
&0f99 18       CLC
&0f9a 69 61    ADC #&61 ; "a"
&0f9c a4 97    LDY &97 ; start_of_word
&0f9e f0 06    BEQ &0fa6 ; lower_case
&0fa0 29 df    AND #&df
&0fa2 a2 00    LDX #&00
&0fa4 86 97    STX &97 ; start_of_word
; lower_case
&0fa6 20 ee ff JSR &ffee ; OSWRCH
&0fa9 60       RTS

; set_colour_y_to_a
&0faa aa       TAX
&0fab a9 13    LDA #&13
&0fad 20 ee ff JSR &ffee ; OSWRCH
&0fb0 98       TYA
&0fb1 20 ee ff JSR &ffee ; OSWRCH
&0fb4 8a       TXA
&0fb5 20 ee ff JSR &ffee ; OSWRCH
&0fb8 a9 00    LDA #&00
&0fba 20 ee ff JSR &ffee ; OSWRCH
&0fbd 20 ee ff JSR &ffee ; OSWRCH
&0fc0 20 ee ff JSR &ffee ; OSWRCH
&0fc3 60       RTS

; initialise_arrows
&0fc4 a0 01    LDY #&01                                             # For each of two arrows,
; initialise_arrows_loop
&0fc6 a9 00    LDA #&00
&0fc8 99 d3 0e STA &0ed3,Y ; arrow_active
&0fcb 99 7c 0a STA &0a7c,Y ; arrow_timer
&0fce a2 01    LDX #&01                                             # Get one bit of room data for presence of arrow
&0fd0 20 12 11 JSR &1112 ; to_get_x_bits_of_room_data
&0fd3 aa       TAX
&0fd4 f0 22    BEQ &0ff8 ; consider_next_arrow                      # If arrow present,
&0fd6 a2 04    LDX #&04                                             # Get four bits of room data for arrow_y
&0fd8 20 12 11 JSR &1112 ; to_get_x_bits_of_room_data
&0fdb aa       TAX
&0fdc f0 1a    BEQ &0ff8 ; consider_next_arrow
&0fde 0a       ASL A
&0fdf 0a       ASL A
&0fe0 0a       ASL A
&0fe1 49 78    EOR #&78
&0fe3 99 7e 0a STA &0a7e,Y ; arrow_y
&0fe6 a2 03    LDX #&03                                             # Get three bits of room data for arrow timing
&0fe8 20 12 11 JSR &1112 ; to_get_x_bits_of_room_data
&0feb aa       TAX
&0fec bd fc 0f LDA &0ffc,X ; arrow_timers_table
&0fef 99 7c 0a STA &0a7c,Y ; arrow_timer
&0ff2 99 d1 0e STA &0ed1,Y ; arrow_x
&0ff5 99 d3 0e STA &0ed3,Y ; arrow_active
; consider_next_arrow
&0ff8 88       DEY
&0ff9 10 cb    BPL &0fc6 ; initialise_arrows_loop
&0ffb 60       RTS

; arrow_timers_table
;     0  1  2  3  4
&0ffc d0 16 1e 26 7f                                                # Third value unused

; handle_room_tweaks_on_entry
&1001 a9 00    LDA #&00
&1003 a0 80    LDY #&80
&1005 a6 55    LDX &55 ; player_room
&1007 e0 19    CPX #&19 ; Swimming Pool
&1009 d0 22    BNE &102d ; fill_space_sprite                        # Is this the Swimming Pool?
&100b a5 4f    LDA &4f ; swimming_pool_item_collected
&100d d0 05    BNE &1014 ; already_collected_item
&100f e6 4f    INC &4f ; swimming_pool_item_collected               # If so, collect item on first visit
&1011 20 8d 0c JSR &0c8d ; collect_item
; already_collected_item
&1014 a2 00    LDX #&00
; fill_enemy_with_water_loop
&1016 a9 f0    LDA #&f0                                             # Set background of enemy sprite to be colour 2 (cyan)
&1018 1d 00 73 ORA &7300,X ; unpacked_enemy_sprites
&101b 9d 00 73 STA &7300,X ; unpacked_enemy_sprites
&101e a9 f0    LDA #&f0
&1020 1d 00 74 ORA &7400,X ; unpacked_enemy_sprites + &100
&1023 9d 00 74 STA &7400,X ; unpacked_enemy_sprites + &100
&1026 ca       DEX
&1027 d0 ed    BNE &1016 ; fill_enemy_with_water_loop
&1029 a9 f0    LDA #&f0                                             # Set background of space sprite (used to unplot enemy
&102b a0 01    LDY #&01                                             # after movement) to be the same. Use tile 1 for space,
; fill_space_sprite                                                 # so player can stand on swimming pool water.
&102d 84 4e    STY &4e ; space_tile
&102f a2 3f    LDX #&3f                                             # Bug: fills half of player_background_buffer too
; fill_space_sprite_loop
&1031 9d 00 70 STA &7000,X ; space_sprite
&1034 ca       DEX
&1035 10 fa    BPL &1031 ; fill_space_loop
&1037 a2 00    LDX #&00
&1039 a5 55    LDA &55 ; player_room
&103b c9 1b    CMP #&1b ; The Nightmare Room                        # Is this The Nightmare Room?
&103d d0 0c    BNE &104b ; not_nightmare_room
&103f a9 10    LDA #&10
&1041 8d 10 0a STA &0a10 ; enemies_unpacked_sprite_offset + 7       # If so, change left-most enemy to use Maria sprite.
&1044 a9 03    LDA #&03                                             # It is originally a pig, setting up the sprite for:
&1046 8d 07 0a STA &0a07 ; enemies_sprite + 7
&1049 a2 08    LDX #&08                                             # Use pig for player sprite.
; not_nightmare_room
&104b 8e 09 0a STX &0a09 ; player_unpacked_sprite_offset            # (otherwise use player)
&104e 60       RTS

; real_entry_point
&104f 20 00 04 JSR &0400 ; to_title_screen
&1052 20 48 0d JSR &0d48 ; reset_game
; new_life_loop
&1055 20 0c 11 JSR &110c ; to_initialise_room
; game_loop
&1058 a9 13    LDA #&13 ; Wait for Vertical Retrace                 # Three v-syncs per game frame
&105a 20 f4 ff JSR &fff4 ; OSBYTE
&105d a9 13    LDA #&13 ; Wait for Vertical Retrace
&105f 20 f4 ff JSR &fff4 ; OSBYTE
&1062 a9 13    LDA #&13 ; Wait for Vertical Retrace
&1064 20 f4 ff JSR &fff4 ; OSBYTE
&1067 20 d5 0e JSR &0ed5 ; to_update_lives
&106a 20 06 11 JSR &1106 ; to_update_game
&106d 20 ac 10 JSR &10ac ; check_for_suicide
&1070 a5 63    LDA &63 ; player_killed
&1072 f0 e4    BEQ &1058 ; game_loop
&1074 a5 9b    LDA &9b ; player_lives
&1076 10 dd    BPL &1055 ; new_life_loop
; game_over
&1078 a2 00    LDX #&00
; write_clear_window_loop
&107a bd b8 10 LDA &10b8,X ; clear_window_string
&107d 20 ee ff JSR &ffee ; OSWRCH
&1080 e8       INX
&1081 e0 0a    CPX #&0a
&1083 d0 f5    BNE &107a ; write_clear_window_loop
&1085 a9 00    LDA #&00
&1087 20 2d 10 JSR &102d ; fill_space_sprite                        # Ensure space sprite is black
&108a 20 03 11 JSR &1103 ; to_animate_game_over_boot
&108d a2 00    LDX #&00
&108f 8e c6 10 STX &10c6 ; game_over_string + 4
; game_over_loop
&1092 a9 13    LDA #&13 ; Wait for Vertical Retrace
&1094 20 f4 ff JSR &fff4 ; OSBYTE
&1097 a0 00    LDY #&00
; write_game_over_loop
&1099 b9 c2 10 LDA &10c2,Y ; game_over_string
&109c 20 ee ff JSR &ffee ; OSWRCH
&109f c8       INY
&10a0 c0 0f    CPY #&0f
&10a2 d0 f5    BNE &1099 ; write_game_over_loop
&10a4 ee c6 10 INC &10c6 ; game_over_string + 4
&10a7 10 e9    BPL &1092 ; game_over_loop
&10a9 4c 4f 10 JMP &104f ; real_entry_point

; check_for_suicide
&10ac a5 ec    LDA &ec ; Internal key number of most recently pressed key
&10ae c9 70    CMP #&70; SHIFT-ESCAPE
&10b0 d0 05    BNE &10b7 ; leave
&10b2 68       PLA                                                  # Remove check_for_suicide from stack
&10b3 68       PLA
&10b4 4c 4f 10 JMP &104f ; real_entry_point
; leave
&10b7 60       RTS

; clear_window_string
&10b8 18 00 00 00 02 ff 03 ff 03 10 ; Define graphics window (&0000-&03ff, &03ff-&020A); clear graphics area

; game_over_string
&10c2 1f 0b 08 11 00 47 61 6d 65 09 09 4f 76 65 72 ; TAB(&0b, &08); COLOUR 0; "Game  Over"

; play_sound_number_a
&10d1 8e e9 10 STX &10e9 ; tmp_x
&10d4 8c ea 10 STY &10ea ; tmp_y
&10d7 18       CLC
&10d8 69 80    ADC #&80
&10da aa       TAX
&10db a0 08    LDY #&08 ; &0880 + A
&10dd a9 07    LDA #&07 ; Generate a sound
&10df 20 f1 ff JSR &fff1 ; OSWORD
&10e2 ae e9 10 LDX &10e9 ; tmp_x
&10e5 ac ea 10 LDY &10ea ; tmp_y
&10e8 60       RTS

; tmp_x
&10e9 00
; tmp_y
&10ea 00

; unused
&10eb 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
&10fb 00 00 00 00 00

; to_reset_items
&1100 4c 35 1d JMP &1d35 ; reset_items

; to_animate_game_over_boot
&1103 4c 64 1e JMP &1e64 ; animate_game_over_boot

; to_update_game
&1106 4c cf 16 JMP &16cf ; update_game

; to_initialise_enemies                                             # Unused
&1109 4c 01 18 JMP &1801 ; initialise_enemies

; to_initialise_room
&110c 4c 1b 11 JMP &111b ; initialise_room

; to_plot_sprite
&110f 4c 00 15 JMP &1500 ; plot_sprite

; to_get_x_bits_of_room_data
&1112 4c b8 11 JMP &11b8 ; get_x_bits_of_room_data

; to_calculate_tile_address_for_enemy_X
&1115 4c c6 18 JMP &18c6 ; calculate_tile_address_for_enemy_X

; to_calculate_screen_address
&1118 4c d7 14 JMP &14d7 ; calculate_screen_address

; initialise_room
&111b 20 2c 11 JSR &112c ; initialise_room_data
&111e 20 01 18 JSR &1801 ; initialise_enemies
&1121 20 1b 0b JSR &0b1b ; to_initialise_arrows
&1124 4c af 1d JMP &1daf ; calculate_screen_address_of_conveyor

; entry_horizontal_speed
&1127 00
; entry_jump_timer
&1128 00
; entry_x
&1129 00
; entry_y
&112a 00
; entry_is_jumping
&112b 00

; initialise_room_data
&112c a9 00    LDA #&00
&112e 85 52    STA &52 ; room_data_offset
&1130 85 53    STA &53 ; bits_remaining_in_room_data_byte
&1132 85 9f    STA &9f ; player_rope_pixel
&1134 85 5b    STA &5b ; rope_position_relative_to_centre
&1136 85 57    STA &57 ; game_timer
&1138 a6 55    LDX &55 ; player_room
&113a 20 59 1d JSR &1d59 ; calculate_room_data_address
&113d a9 0c    LDA #&0c ; CLS
&113f 20 ee ff JSR &ffee ; OSWRCH
&1142 20 b5 1c JSR &1cb5 ; initialise_room_items_and_exits
&1145 20 18 0b JSR &0b18 ; to_initialise_room_background_tiles_and_title
&1148 a9 ff    LDA #&ff
&114a 85 67    STA &67 ; item_number
&114c a9 d2    LDA #&d2
&114e 85 5f    STA &5f ; rope_position
&1150 a9 01    LDA #&01
&1152 85 5c    STA &5c ; rope_velocity_relative_to_centre
&1154 85 9c    STA &9c ; player_not_plotted                         # Mark player as not needing to be unplotted
&1156 a5 9d    LDA &9d ; out_of_time
&1158 85 63    STA &63 ; player_killed
&115a a5 8e    LDA &8e ; player_horizontal_speed                    # Store how player entered room
&115c 8d 27 11 STA &1127 ; entry_horizontal_speed
&115f a5 65    LDA &65 ; player_jump_timer
&1161 8d 28 11 STA &1128 ; entry_jump_timer
&1164 ad 1b 0a LDA &0a1b ; player_x_in_enemies
&1167 8d 29 11 STA &1129 ; entry_x
&116a ad 24 0a LDA &0a24 ; player_y_in_enemies
&116d 8d 2a 11 STA &112a ; entry_y
&1170 85 62    STA &62 ; where_player_fell_from
&1172 a5 64    LDA &64 ; player_is_jumping
&1174 8d 2b 11 STA &112b ; entry_is_jumping
&1177 a9 00    LDA #&00
&1179 85 73    STA &73 ; unused                                     # Unused variable
&117b 85 70    STA &70 ; tile_x
&117d 85 71    STA &71 ; tile_y
&117f 85 72    STA &72 ; tile_type
&1181 20 00 0b JSR &0b00 ; to_write_status_line
&1184 20 b8 18 JSR &18b8 ; wipe_tile_table
; initialise_background_scenery_loop
&1187 a0 ff    LDY #&ff
; calculate_routine_number_loop                                     # Reading two bits at a time, count 11 as meaning +3
&1189 c8       INY
&118a a2 02    LDX #&02
&118c 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&118f c9 03    CMP #&03
&1191 f0 f6    BEQ &1189 ; calculate_routine_number_loop
&1193 85 7b    STA &7b ; mod_three
&1195 84 96    STY &96 ; times_three
&1197 98       TYA
&1198 0a       ASL A
&1199 0a       ASL A
&119a 65 7b    ADC &7b ; mod_three
&119c 38       SEC
&119d e5 96    SBC &96 ; times_three
&119f c9 06    CMP #&06
&11a1 f0 14    BEQ &11b7 ; leave
&11a3 0a       ASL A
&11a4 aa       TAX
&11a5 bd da 11 LDA &11da,X ; background_initialisation_routines_address_table
&11a8 8d b2 11 STA &11b2 ; background_initialisation_routine_address_low
&11ab bd db 11 LDA &11db,X ; background_initialisation_routines_address_table + 1
&11ae 8d b3 11 STA &11b3 ; background_initialisation_routine_address_high
&11b1 20 11 11 JSR &1111
#     actually JSR background_initialisation_routine_address
&11b4 4c 87 11 JMP &1187 ; initialise_background_scenery_loop
; null_routine
; leave
&11b7 60       RTS

 ; get_x_bits_of_room_data
&11b8 84 7b    STY &7b ; tmp
&11ba a9 00    LDA #&00
&11bc 85 96    STA &96 ; value
; get_x_bits_of_room_data_loop
&11be c6 53    DEC &53 ; bits_remaining_in_room_data_byte
&11c0 10 0c    BPL &11ce ; bits_still_remaining
&11c2 a9 07    LDA #&07
&11c4 85 53    STA &53 ; bits_remaining_in_room_data_byte
&11c6 a4 52    LDY &52 ; room_data_offset
&11c8 b1 50    LDA (&50),Y ; room_data_address
&11ca 85 54    STA &54 ; room_data_byte
&11cc e6 52    INC &52 ; room_data_offset
; bits_still_remaining
&11ce 46 54    LSR &54 ; room_data_byte
&11d0 26 96    ROL &96 ; value
&11d2 ca       DEX
&11d3 d0 e9    BNE &11be ; get_x_bits_of_room_data_loop
&11d5 a5 96    LDA &96 ; value
&11d7 a4 7b    LDY &7b ; tmp
&11d9 60       RTS

; background_initialisation_routines_address_table
&11da ec 11 ; &11ec = set_tile_type                                 # 0 00
&11dc f4 11 ; &11f4 = set_tile_x_and_y                              # 1 01
&11de 03 12 ; &1203 = add_straight_line_of_tiles                    # 2 10
&11e0 4d 12 ; &124d = add_block_of_tiles                            # 3 11 00
&11e2 2a 12 ; &122a = add_series_of_tiles                           # 4 11 01
&11e4 0d 12 ; &120d = add_diagonal_line_of_tiles                    # 5 11 10
&11e6 b7 11 ; &11b7 = null_routine                                  # 6 11 11 00
&11e8 b7 11 ; &11b7 = null_routine                                  # 7 11 11 01 - unused
&11ea a3 12 ; &12a3 = add_triangle_of_tiles                         # 8 11 11 10

; set_tile_type
&11ec a2 03    LDX #&03                                             # Get three bits of room data for tile type
&11ee 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&11f1 85 72    STA &72 ; tile_type
&11f3 60       RTS

; set_tile_x_and_y
&11f4 a2 05    LDX #&05                                             # Get five bits of room data for x position
&11f6 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&11f9 85 70    STA &70 ; tile_x
&11fb a2 04    LDX #&04                                             # Get five bits of room data for y position
&11fd 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&1200 85 71    STA &71 ; tile_y
&1202 60       RTS

; add_straight_line_of_tiles
&1203 a9 01    LDA #&01                                             # Add first and last tiles
&1205 a2 00    LDX #&00                                             # Get one bit of room data for direction
&1207 a0 05    LDY #&05                                             # Get five bits of room data for length of run
&1209 20 4a 13 JSR &134a ; add_line_of_tiles
&120c 60       RTS

; add_diagonal_line_of_tiles
&120d a5 72    LDA &72 ; tile_type
&120f 85 81    STA &81 ; previous_tile_type
&1211 a9 02    LDA #&02 ; SLOPE
&1213 85 72    STA &72 ; tile_type
&1215 a9 01    LDA #&01                                             # Add first and last tiles
&1217 a2 08    LDX #&08                                             # Get one bit of room data for diagonal direction
&1219 a0 04    LDY #&04                                             # Get four bits of room data
&121b 20 4a 13 JSR &134a ; add_line_of_tiles
&121e a5 81    LDA &81 ; previous_tile_type
&1220 85 72    STA &72 ; tile_type
&1222 a5 70    LDA &70 ; tile_x
&1224 18       CLC
&1225 65 77    ADC &77 ; x_delta
&1227 85 70    STA &70 ; tile_x
&1229 60       RTS

; add_series_of_tiles
&122a a2 04    LDX #&04
&122c 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # Get four bits of room data for number of tiles
&122f 85 6e    STA &6e ; length
; add_series_of_tiles_loop                                          # For each tile,
&1231 a2 05    LDX #&05
&1233 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # Get five bits of room data for x co-ordinate
&1236 85 70    STA &70 ; tile_x
&1238 a2 04    LDX #&04
&123a 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # Get four bits of room data for y co-ordinate
&123d 85 71    STA &71 ; tile_y
&123f 20 b1 13 JSR &13b1 ; add_background_tile
&1242 c6 6e    DEC &6e ; length
&1244 10 eb    BPL &1231 ; add_series_of_tiles_loop
&1246 a9 00    LDA #&00
&1248 85 70    STA &70 ; tile_x
&124a 85 71    STA &71 ; tile_y
&124c 60       RTS

; add_block_of_tiles
&124d a2 05    LDX #&05
&124f 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # Get five bits of room data for width of block
&1252 85 79    STA &79 ; width
&1254 a5 70    LDA &70 ; tile_x
&1256 85 75    STA &75 ; start_x
&1258 a5 71    LDA &71 ; tile_y
&125a 85 76    STA &76 ; height
&125c a2 04    LDX #&04
&125e 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # Get four bits of room data for y end
&1261 85 71    STA &71 ; tile_y
&1263 a5 76    LDA &76 ; height
&1265 38       SEC
&1266 e5 71    SBC &71 ; tile_y
&1268 a2 01    LDX #&01
&126a b0 06    BCS &1272 ; skip_inversion
&126c 49 ff    EOR #&ff
&126e 69 01    ADC #&01
&1270 a2 ff    LDX #&ff
; skip_inversion
&1272 85 76    STA &76 ; height
&1274 86 7a    STX &7a ; block_y_delta
; add_block_of_tiles_loop
&1276 a9 00    LDA #&00                                             # Add tiles from left to right
&1278 85 7c    STA &7c ; direction
&127a a5 79    LDA &79 ; width
&127c 85 74    STA &74 ; length
&127e a5 75    LDA &75 ; start_x
&1280 85 70    STA &70 ; tile_x
&1282 a9 01    LDA #&01                                             # Add first and last tiles
&1284 a2 80    LDX #&80                                             # Use previous direction
&1286 20 4a 13 JSR &134a ; add_line_of_tiles
&1289 a5 71    LDA &71 ; tile_y
&128b 18       CLC
&128c 65 7a    ADC &7a ; block_y_delta
&128e 85 71    STA &71 ; tile_y
&1290 c6 76    DEC &76 ; height
&1292 10 e2    BPL &1276 ; add_block_of_tiles_loop
&1294 a5 71    LDA &71 ; tile_y
&1296 38       SEC
&1297 e5 7a    SBC &7a ; block_y_delta
&1299 85 71    STA &71 ; tile_y
&129b a5 70    LDA &70 ; tile_x
&129d 18       CLC
&129e 65 77    ADC &77 ; x_delta
&12a0 85 70    STA &70 ; tile_x
&12a2 60       RTS

; add_triangle_of_tiles
&12a3 a5 70    LDA &70 ; tile_x
&12a5 85 75    STA &75 ; previous_x
&12a7 a5 71    LDA &71 ; tile_y
&12a9 85 76    STA &76 ; previous_y
&12ab a2 01    LDX #&01
&12ad 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # Get one bit of room data for triangle direction
&12b0 a2 01    LDX #&01
&12b2 86 6d    STX &6d ; do_triangle_ends
&12b4 85 7d    STA &7d ; triangle_direction
&12b6 a8       TAY
&12b7 f0 02    BEQ &12bb ; skip_x_inversion
&12b9 a2 ff    LDX #&ff
; skip_x_inversion
&12bb 86 7e    STX &7e ; x_skip
&12bd a2 04    LDX #&04
&12bf 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # Get four bits of room data for triangle height
&12c2 85 7a    STA &7a ; row_length
&12c4 85 7f    STA &7f ; triangle_length
&12c6 38       SEC
&12c7 e5 71    SBC &71 ; tile_y
&12c9 85 80    STA &80 ; height
&12cb b0 13    BCS &12e0 ; skip_y_inversion
&12cd 49 ff    EOR #&ff
&12cf 69 01    ADC #&01
&12d1 85 80    STA &80 ; height
&12d3 c6 6d    DEC &6d ; do_triangle_ends
&12d5 a5 7a    LDA &7a ; row_length
&12d7 a6 71    LDX &71 ; tile_y
&12d9 85 71    STA &71 ; tile_y
&12db 86 7a    STX &7a ; row_length
&12dd 4c f7 12 JMP &12f7 ; add_triangle_of_tiles_loop
; skip_y_inversion
&12e0 a6 80    LDX &80 ; height
&12e2 a5 7e    LDA &7e ; x_skip
&12e4 49 ff    EOR #&ff
&12e6 69 00    ADC #&00
&12e8 85 7e    STA &7e ; x_skip
&12ea 30 05    BMI &12f1
&12ec 8a       TXA
&12ed 49 ff    EOR #&ff
&12ef aa       TAX
&12f0 e8       INX
&12f1 8a       TXA
&12f2 18       CLC
&12f3 65 70    ADC &70 ; tile_x
&12f5 85 70    STA &70 ; tile_x
; add_triangle_of_tiles_loop
&12f7 a9 01    LDA #&01                                             # Add tiles from right to left
&12f9 85 7c    STA &7c ; direction
&12fb a5 7a    LDA &7a ; row_length
&12fd 85 74    STA &74
&12ff a5 71    LDA &71 ; tile_y
&1301 85 81    STA &81 ; previous_y
&1303 a9 01    LDA #&01                                             # Add first and last tiles
&1305 a2 80    LDX #&80                                             # Use previous direction
&1307 20 4a 13 JSR &134a ; add_line_of_tiles
&130a a5 81    LDA &81 ; previous_y
&130c 85 71    STA &71 ; tile_y
&130e a5 70    LDA &70 ; tile_x
&1310 18       CLC
&1311 65 7e    ADC &7e ; x_skip
&1313 85 70    STA &70 ; tile_x
&1315 c6 7a    DEC &7a ; row_length
&1317 c6 80    DEC &80 ; height
&1319 10 dc    BPL &12f7 ; add_triangle_of_tiles_loop
&131b a5 75    LDA &75 ; previous_x
&131d 85 70    STA &70 ; tile_x
&131f a5 76    LDA &76 ; previous_y
&1321 85 71    STA &71 ; tile_y
&1323 a5 7d    LDA &7d ; triangle_direction
&1325 85 7c    STA &7c ; direction
&1327 a5 7f    LDA &7f ; triangle_length
&1329 85 74    STA &74 ; length
&132b a5 72    LDA &72 ; tile_type
&132d 85 81    STA &81 ; previous_tile_type
&132f a9 02    LDA #&02 ; WALL
&1331 85 72    STA &72 ; tile_type
&1333 a5 7d    LDA &7d ; triangle_direction                         # Determine whether to add first and last tiles
&1335 45 6c    EOR &6c ; slope_direction                            # based on whether triangle faces same as room slope
&1337 45 6d    EOR &6d ; do_triangle_ends
&1339 a2 88    LDX #&88                                             # Use previous diagonal direction
&133b 20 4a 13 JSR &134a ; add_line_of_tiles
&133e a5 81    LDA &81 ; previous_tile_type
&1340 85 72    STA &72 ; tile_type
&1342 a5 70    LDA &70 ; tile_x
&1344 18       CLC
&1345 65 77    ADC &77 ; x_delta
&1347 85 70    STA &70 ; tile_x
&1349 60       RTS

; add_line_of_tiles
&134a 85 82    STA &82 ; add_first_and_last
&134c 86 83    STX &83 ; direction_base
&134e 8a       TXA
&134f 30 0e    BMI &135f ; use_previous_direction
&1351 a2 01    LDX #&01
&1353 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&1356 85 7c    STA &7c ; direction
&1358 98       TYA
&1359 aa       TAX
&135a 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&135d 85 74    STA &74 ; length
; use_previous_direction
&135f a5 83    LDA &83 ; direction_base
&1361 a6 71    LDX &71 ; tile_y
&1363 29 7f    AND #&7f
&1365 18       CLC
&1366 65 7c    ADC &7c ; direction
&1368 85 7c    STA &7c ; direction
&136a d0 02    BNE &136e ; vertical_line
&136c a6 70    LDX &70 ; tile_x
; vertical_line
&136e a5 74    LDA &74 ; length
&1370 86 7b    STX &7b ; tmp
&1372 38       SEC
&1373 e5 7b    SBC &7b ; tmp
&1375 b0 09    BCS &1380 ; skip_inversion
&1377 49 ff    EOR #&ff
&1379 18       CLC
&137a 69 01    ADC #&01
&137c e6 7c    INC &7c ; direction
&137e e6 7c    INC &7c ; direction
; skip_inversion
&1380 85 74    STA &74 ; length
&1382 f0 25    BEQ &13a9 ; add_last_tile
&1384 a6 7c    LDX &7c ; direction
&1386 bd c0 13 LDA &13c0,X ; directions_x
&1389 85 77    STA &77 ; x_delta
&138b bd c4 13 LDA &13c4,X ; directions_y
&138e 85 78    STA &78 ; y_delta
; add_line_of_tiles_loop
&1390 a5 82    LDA &82 ; add_first_and_last
&1392 f0 03    BEQ &1397 ; skip_first
&1394 20 b1 13 JSR &13b1 ; add_background_tile
; skip_first
&1397 a5 70    LDA &70 ; tile_x
&1399 18       CLC
&139a 65 77    ADC &77 ; x_delta
&139c 85 70    STA &70 ; tile_x
&139e a5 71    LDA &71 ; tile_y
&13a0 18       CLC
&13a1 65 78    ADC &78 ; y_delta
&13a3 85 71    STA &71 ; tile_y
&13a5 c6 74    DEC &74 ; length
&13a7 d0 e7    BNE &1390 ; add_line_of_tiles_loop
; add_last_tile
&13a9 a5 82    LDA &82 ; add_first_and_last
&13ab f0 03    BEQ &13b0 ; skip_last
&13ad 20 b1 13 JSR &13b1 ; add_background_tile
; skip_last
&13b0 60       RTS

; add_background_tile
&13b1 a4 72    LDY &72 ; tile_type
&13b3 be f1 09 LDX &09f1,Y ; background_tiles_colours
&13b6 b9 f7 09 LDA &09f7,Y ; background_tiles_sprites
&13b9 20 51 15 JSR &1551 ; plot_background_sprite
&13bc 20 78 18 JSR &1878 ; set_tile_table_for_background
&13bf 60       RTS

; directions_x
&13c0 01 00 ff 00                                                   # Last two bytes of all four tables are unused
; directions_y
&13c4 00 01 00 ff
; diagonal_directions_x
&13c8 01 ff 01 ff
; diagonal_directions_y
&13cc 01 01 ff ff

; unpack_enemy_sprites
&13d0 a9 00    LDA #&00
&13d2 85 84    STA &84 ; unpacked_sprite_address_low
&13d4 a9 73    LDA #&73 ; &7300 = unpacked_enemy_sprites
&13d6 85 85    STA &85 ; unpacked_sprite_address_high
&13d8 a9 08    LDA #&08                                             # The player sprite has 8 frames
&13da 85 86    STA &86 ; unpacked_sprite_offset
&13dc a5 87    LDA &87 ; enemies_on_screen
&13de 85 79    STA &79 ; enemy_to_consider
&13e0 f0 51    BEQ &1433 ; leave
; unpack_enemy_sprites_loop
&13e2 a6 79    LDX &79 ; enemy_to_consider
&13e4 e4 87    CPX &87 ; enemies_on_screen
&13e6 f0 17    BEQ &13ff ; first_enemy                              # If this isn't the first enemy,
&13e8 a4 87    LDY &87 ; enemies_on_screen
; check_if_enemy_already_unpacked                                   # has its sprite already been used?
&13ea b9 00 0a LDA &0a00,Y ; enemies_sprite
&13ed dd 00 0a CMP &0a00,X ; enemies_sprite
&13f0 d0 08    BNE &13fa ; different_sprite
&13f2 b9 09 0a LDA &0a09,Y ; enemies_unpacked_sprite_offset
&13f5 9d 09 0a STA &0a09,X ; enemies_unpacked_sprite_offset
&13f8 10 35    BPL &142f ; consider_next_enemy
; different_sprite
&13fa 88       DEY
&13fb c4 79    CPY &79 ; enemy_to_consider
&13fd d0 eb    BNE &13ea ; check_if_enemy_already_unpacked
; first_enemy                                                       # If not, unpack its sprite
&13ff bc 00 0a LDY &0a00,X ; enemies_sprite
&1402 a5 86    LDA &86 ; unpacked_sprite_offset
&1404 9d 09 0a STA &0a09,X ; enemies_unpacked_sprite_offset
&1407 b9 64 14 LDA &1464,Y ; enemy_sprites_frames
&140a 85 7a    STA &7a ; number_of_frames
&140c 18       CLC
&140d 65 86    ADC &86 ; unpacked_sprite_offset
&140f 85 86    STA &86 ; unpacked_sprite_offset
&1411 b9 90 14 LDA &1490,Y ; enemy_sprites_frame_offsets
&1414 4a       LSR A
&1415 66 7b    ROR &7b ; tmp
&1417 4a       LSR A
&1418 66 7b    ROR &7b ; tmp
&141a 4a       LSR A
&141b 66 7b    ROR &7b ; tmp
&141d 18       CLC
&141e 69 5a    ADC #&5a ; &5a00 = packed_enemy_sprites
&1420 85 91    STA &91 ; sprite_address_high
&1422 a5 7b    LDA &7b ; tmp
&1424 29 e0    AND #&e0
&1426 85 90    STA &90 ; sprite_address_low
; unpack_frames_loop
&1428 20 34 14 JSR &1434 ; unpack_enemy_sprite
&142b c6 7a    DEC &7a ; number_of_frames
&142d d0 f9    BNE &1428 ; unpack_frames_loop
; consider_next_enemy
&142f c6 79    DEC &79 ; enemy_to_consider
&1431 d0 af    BNE &13e2 ; unpack_enemy_sprites_loop
; leave
&1433 60       RTS

; unpack_enemy_sprite
&1434 a0 00    LDY #&00
; unpack_enemy_sprite_loop
&1436 b1 90    LDA (&90),Y ; sprite_address
&1438 20 bc 14 JSR &14bc ; unpack_byte_of_sprite_data
&143b a6 88    LDX &88 ; unpacked_byte_two
&143d 85 88    STA &88 ; unpacked_byte_two
&143f 8a       TXA
&1440 91 84    STA (&84),Y ; unpacked_sprite_address
&1442 e6 84    INC &84 ; unpacked_sprite_address_low
&1444 a5 88    LDA &88 ; unpacked_byte_two
&1446 91 84    STA (&84),Y ; unpacked_sprite_address
&1448 c8       INY
&1449 c0 20    CPY #&20
&144b d0 e9    BNE &1436 ; unpack_enemy_sprite_loop
&144d a5 90    LDA &90 ; sprite_address_low
&144f 18       CLC
&1450 69 20    ADC #&20
&1452 85 90    STA &90 ; sprite_address_low
&1454 90 02    BCC &1458
&1456 e6 91    INC &91 ; sprite_address_high
&1458 a5 84    LDA &84 ; unpacked_sprite_address_low
&145a 18       CLC
&145b 69 20    ADC #&20
&145d 85 84    STA &84 ; unpacked_sprite_address_low
&145f 90 02    BCC &1463
&1461 e6 85    INC &85 ; unpacked_sprite_address_high
&1463 60       RTS

; enemy_sprites_frames
&1464 08 01 01 04 04 04 04 04 04 04 04 04 04 04 04 02               # Slot 0 is unused; eight frames suggests player
&1474 02 02 02 04 04 08 08 08 02 02 04 08 04 04 04 01               # Last two slots, for sprites &2a and &2b, aren't used
&1484 01 02 04 04 08 08 04 04 04 02 02 02

; enemy_sprites_frame_offsets
&1490 00 00 01 02 06 0a 0e 12 16 1a 1e 22 26 2a 2e 32
&14a0 34 36 38 3a 3e 42 4a 52 5a 5c 5e 62 6a 6e 72 76
&14b0 77 78 7a 7e 82 8a 92 96 9a 9e a0 a2

; unpack_byte_of_sprite_data
&14bc 85 96    STA &96 ; packed_byte
&14be 29 f0    AND #&f0
&14c0 85 7b    STA &7b ; tmp
&14c2 4a       LSR A
&14c3 4a       LSR A
&14c4 4a       LSR A
&14c5 4a       LSR A
&14c6 05 7b    ORA &7b ; tmp
&14c8 85 88    STA &88 ; unpacked_byte_two
&14ca a5 96    LDA &96 ; packed_byte
&14cc 29 0f    AND #&0f
&14ce 85 7b    STA &7b ; tmp
&14d0 0a       ASL A
&14d1 0a       ASL A
&14d2 0a       ASL A
&14d3 0a       ASL A
&14d4 05 7b    ORA &7b ; tmp
&14d6 60       RTS

; calculate_screen_address
&14d7 29 fc    AND #&fc
&14d9 0a       ASL A
&14da 26 91    ROL &91
&14dc 85 90    STA &90 ; screen_address_low
&14de 8a       TXA
&14df 29 07    AND #&07
&14e1 18       CLC
&14e2 65 90    ADC &90 ; screen_address_low
&14e4 85 90    STA &90 ; screen_address_low
&14e6 8a       TXA
&14e7 4a       LSR A
&14e8 4a       LSR A
&14e9 29 fe    AND #&fe
&14eb aa       TAX
&14ec a5 90    LDA &90 ; screen_address_low
&14ee 18       CLC
&14ef 7d c1 0a ADC &0ac1,X ; screen_address_lookup_table + 1
&14f2 85 90    STA &90 ; screen_address_low
&14f4 a5 91    LDA &91 ; screen_address_high
&14f6 29 01    AND #&01
&14f8 7d c0 0a ADC &0ac0,X ; screen_address_lookup_table
&14fb 69 30    ADC #&30 ; &3000 = start of screen memory
&14fd 85 91    STA &91 ; screen_address_high
&14ff 60       RTS

; plot_sprite
&1500 20 d7 14 JSR &14d7 ; calculate_screen_address
&1503 a5 93    LDA &93 ; sprite_address_high
&1505 8d 14 15 STA &1514 ; plot_sprite_address_high
&1508 a5 92    LDA &92 ; sprite_address_low
&150a 8d 13 15 STA &1513 ; plot_sprite_address_low
&150d a6 94    LDX &94 ; sprite_size_in_bytes
; plot_sprite_group_loop
&150f a4 95    LDY &95 ; sprite_width
&1511 38       SEC
; plot_sprite_loop
&1512 bd 11 11 LDA &1111,X
#     actually LDA plot_sprite_address,X
&1515 25 89    AND &89 ; sprite_colour
&1517 91 90    STA (&90),Y ; screen_address
&1519 ca       DEX
&151a 98       TYA
&151b e9 08    SBC #&08
&151d a8       TAY
&151e b0 f2    BCS &1512 ; plot_sprite_loop
&1520 8a       TXA
&1521 30 16    BMI &1539 ; leave
; plot_sprite_skipping_first_column
&1523 e6 90    INC &90 ; screen_address_low
&1525 a5 90    LDA &90 ; screen_address_low
&1527 24 98    BIT &98 ; seven
&1529 d0 e4    BNE &150f ; plot_sprite_group_loop
&152b 38       SEC
&152c e9 08    SBC #&08
&152e 85 90    STA &90 ; screen_address_low
&1530 a5 91    LDA &91 ; screen_address_high
&1532 18       CLC
&1533 69 02    ADC #&02
&1535 85 91    STA &91 ; screen_address_high
&1537 10 d6    BPL &150f ; plot_sprite_outer_loop
; leave
&1539 60       RTS

; calculate_background_sprite_address
&153a 0a       ASL A
&153b 26 91    ROL &91 ; sprite_address_high
&153d 0a       ASL A
&153e 26 91    ROL &91 ; sprite_address_high
&1540 0a       ASL A
&1541 26 91    ROL &91 ; sprite_address_high
&1543 85 90    STA &90 ; sprite_address_low
&1545 a5 91    LDA &91 ; sprite_address_high
&1547 29 07    AND #&07
&1549 18       CLC
&154a 69 78    ADC #&78 ; &7800 = background_sprite_data
&154c 85 91    STA &91 ; sprite_address_high
&154e a0 07    LDY #&07
&1550 60       RTS

; plot_background_sprite
&1551 20 3a 15 JSR &153a ; calculate_background_sprite_address
&1554 bd 87 15 LDA &1587,X ; colour_mask_values
&1557 85 89    STA &89 ; sprite_colour
; unpack_background_sprite_loop
&1559 b1 90    LDA (&90),Y ; sprite_address
&155b 20 bc 14 JSR &14bc ; unpack_byte_of_sprite_data
&155e 99 a8 70 STA &70a8,Y ; unpacked_background_sprite + 8
&1561 a5 88    LDA &88 ; unpacked_byte_two
&1563 99 a0 70 STA &70a0,Y ; unpacked_background_sprite
&1566 88       DEY
&1567 10 f0    BPL &1559 ; unpack_background_sprite_loop
&1569 a9 0f    LDA #&0f
&156b 38       SEC
&156c e5 71    SBC &71 ; tile_y
&156e 0a       ASL A
&156f 0a       ASL A
&1570 0a       ASL A
&1571 aa       TAX
&1572 a5 70    LDA &70 ; tile_x
&1574 0a       ASL A
&1575 0a       ASL A
&1576 0a       ASL A
&1577 20 d7 14 JSR &14d7 ; calculate_screen_address
&157a a0 0f    LDY #&0f
; plot_background_sprite_loop
&157c b9 a0 70 LDA &70a0,Y ; unpacked_background_sprite
&157f 25 89    AND &89 ; sprite_colour
&1581 91 90    STA (&90),Y ; screen_address
&1583 88       DEY
&1584 10 f6    BPL &157c ; plot_background_sprite_loop
&1586 60       RTS

; colour_mask_values
;     KK RR YY WW
&1587 00 0f f0 ff

; calculate_enemy_sprite_address
&158b bc 00 0a LDY &0a00,X ; enemies_sprite
&158e c0 12    CPY #&12
&1590 d0 08    BNE &159a ; not_candelabra
&1592 bd 09 0a LDA &0a09,X ; enemies_unpacked_sprite_offset
&1595 49 01    EOR #&01                                             # Make candelabra flicker without moving
&1597 9d 09 0a STA &0a09,X ; enemies_unpacked_sprite_offset
; not_candelabra
&159a b9 64 14 LDA &1464,Y ; enemy_sprites_frames
&159d 85 7b    STA &7b ; sprite_frames
&159f bd 12 0a LDA &0a12,X ; enemies_direction
&15a2 d0 10    BNE &15b4 ; enemy_moving_vertically
; enemy_moving_horizontally                                         # For horizontally moving enemies,
&15a4 bd 1b 0a LDA &0a1b,X ; enemies_x                              # use the horizontal position to calculate frame
&15a7 29 07    AND #&07
&15a9 4a       LSR A
&15aa bc 2d 0a LDY &0a2d,X ; enemies_speed
&15ad 30 15    BMI &15c4 ; calculate_frame
&15af 18       CLC
&15b0 69 04    ADC #&04
&15b2 10 10    BPL &15c4 ; calculate_frame
; enemy_moving_vertically                                           # For vertically moving enemies,
&15b4 a5 57    LDA &57 ; game_timer
&15b6 bc 2d 0a LDY &0a2d,X ; enemies_speed
&15b9 30 02    BMI &15bd ; skip_inversion
&15bb 49 ff    EOR #&ff
; skip_inversion
&15bd 18       CLC
&15be 7d 24 0a ADC &0a24,X ; enemies_y                              # use the vertical position to calculate frame
&15c1 29 07    AND #&07
&15c3 4a       LSR A
; calculate_frame
&15c4 c6 7b    DEC &7b ; sprite_frames
&15c6 25 7b    AND &7b ; sprite_frames
&15c8 18       CLC
&15c9 7d 09 0a ADC &0a09,X ; enemies_unpacked_sprite_offset
&15cc 4a       LSR A
&15cd 66 7b    ROR &7b ; sprite_frames
&15cf 4a       LSR A
&15d0 66 7b    ROR &7b ; sprite_frames
&15d2 18       CLC
&15d3 69 71    ADC #&71 ; &7100 = unpacked_sprites
&15d5 85 93    STA &93 ; sprite_address_high
&15d7 a5 7b    LDA &7b ; sprite_frames
&15d9 29 c0    AND #&c0
&15db 85 92    STA &92 ; sprite_address_low
&15dd bc 48 0a LDY &0a48,X ; enemies_colour
&15e0 b9 87 15 LDA &1587,Y ; colour_mask_values
&15e3 85 89    STA &89 ; sprite_colour
&15e5 8a       TXA
&15e6 a8       TAY
&15e7 be 24 0a LDX &0a24,Y ; enemies_y
&15ea 60       RTS

; move_enemy
&15eb a5 8a    LDA &8a ; enemy_to_consider
&15ed bc 12 0a LDY &0a12,X ; enemies_direction
&15f0 f0 03    BEQ &15f5 ; enemy_moving_horizontally
&15f2 18       CLC
&15f3 69 09    ADC #&09                                             # Use vertical variables for vertically moving enemies
; enemy_moving_horizontally
&15f5 a8       TAY
&15f6 bd 2d 0a LDA &0a2d,X ; enemies_speed
&15f9 9d 5a 0a STA &0a5a,X ; enemies_previous_speed
&15fc 18       CLC
&15fd 79 1b 0a ADC &0a1b,Y ; enemies_x
&1600 dd 12 0a CMP &0a12,X ; enemies_direction
&1603 b0 03    BCS &1608 ; at_edge_of_screen
&1605 99 1b 0a STA &0a1b,Y ; enemies_x
; at_edge_of_screen
&1608 dd 36 0a CMP &0a36,X ; enemies_minimum
&160b 90 07    BCC &1614 ; flip_direction
&160d f0 05    BEQ &1614 ; flip_direction
&160f dd 3f 0a CMP &0a3f,X ; enemies_maximum
&1612 90 0e    BCC &1622 ; update_position
; flip_direction
&1614 bd 2d 0a LDA &0a2d,X ; enemies_speed
&1617 49 ff    EOR #&ff
&1619 38       SEC
&161a 69 00    ADC #&00
&161c 9d 2d 0a STA &0a2d,X ; enemies_speed
&161f b9 1b 0a LDA &0a1b,Y ; enemies_x
; update_position
&1622 99 1b 0a STA &0a1b,Y ; enemies_x
&1625 60       RTS

; plot_enemies
&1626 a6 87    LDX &87 ; enemies_on_screen
&1628 f0 16    BEQ &1640 ; leave
&162a 86 8a    STX &8a ; enemy_to_consider
; plot_enemies_loop
&162c de 63 0a DEC &0a63,X ; enemies_need_replot
&162f d0 09    BNE &163a ; skip_enemy
&1631 20 8b 15 JSR &158b ; calculate_enemy_sprite_address
&1634 20 07 1a JSR &1a07 ; plot_enemy
&1637 20 c0 19 JSR &19c0 ; wipe_space_vacated_by_enemy
; skip_enemy
&163a c6 8a    DEC &8a ; enemy_to_consider
&163c a6 8a    LDX &8a ; enemy_to_consider
&163e d0 ec    BNE &162c ; plot_enemies_loop
; leave
&1640 60       RTS

; plot_or_unplot_player_sprite
&1641 a4 92    LDY &92 ; sprite_address_low
&1643 8c 73 16 STY &1673 ; sprite_address_for_restore_lda_low
&1646 8c 64 16 STY &1664 ; sprite_address_for_copy_and_low
&1649 8c 6c 16 STY &166c ; sprite_address_for_copy_ora_low
&164c a4 93    LDY &93 ; sprite_address_high
&164e 8c 74 16 STY &1674 ; sprite_address_for_restore_lda_high
&1651 8c 65 16 STY &1665 ; sprite_address_for_copy_and_high
&1654 8c 6d 16 STY &166d ; sprite_address_for_copy_ora_high
; plot_or_unplot_previous_player_sprite
&1657 20 d7 14 JSR &14d7 ; calculate_screen_address
&165a a2 3f    LDX #&3f
; plot_player_sprite_outer_loop
&165c a0 18    LDY #&18
&165e 38       SEC
; plot_player_sprite_loop
; plot_player_sprite_mode
&165f 90 11    BCC &1672 ; restore_background
#     also     BCS &1672 ; restore_background
; copy_background                                                   # If BCC, copy screen memory to buffer
&1661 b1 90    LDA (&90),Y ; screen_address
&1663 3d 11 11 AND &1111,X
#     actually AND sprite_address,X
&1666 9d 20 70 STA &7020,X ; player_background_buffer
&1669 b1 90    LDA (&90),Y ; screen_address
&166b 1d 11 11 ORA &1111,X
#     actually ORA sprite_address,X                                 # adding player sprite
&166e 91 90    STA (&90),Y ; screen_address
&1670 b0 0c    BCS &167e ; continue_with_next_byte
; restore_background                                                # If BCS, copy buffer to screen memory
&1672 bd 11 11 LDA &1111,X
#     actually LDA sprite_address,X
&1675 49 ff    EOR #&ff
&1677 31 90    AND (&90),Y ; screen_address                         # using player sprite as mask
&1679 1d 20 70 ORA &7020,X ; player_background_buffer
&167c 91 90    STA (&90),Y ; screen_address
; continue_with_next_byte
&167e ca       DEX
&167f 98       TYA
&1680 e9 08    SBC #&08
&1682 a8       TAY
&1683 b0 da    BCS &165f ; plot_player_sprite_loop
&1685 8a       TXA
&1686 30 16    BMI &169e ; leave
&1688 e6 90    INC &90 ; screen_address_low
&168a a5 90    LDA &90 ; screen_address_high
&168c 24 98    BIT &98 ; seven
&168e d0 cc    BNE &165c ; plot_player_sprite_outer_loop
&1690 38       SEC
&1691 e9 08    SBC #&08
&1693 85 90    STA &90 ; screen_address_low
&1695 a5 91    LDA &91 ; screen_address_high
&1697 18       CLC
&1698 69 02    ADC #&02
&169a 85 91    STA &91 ; screen_address_high
&169c 10 be    BPL &165c ; plot_player_sprite_outer_loop
; leave
&169e 60       RTS

; check_for_keypress
&169f a0 ff    LDY #&ff
&16a1 a9 81    LDA #&81 ; Scan for a particular key
&16a3 20 f4 ff JSR &fff4 ; OSBYTE
&16a6 8a       TXA
&16a7 60       RTS

; handle_player_keys
&16a8 a5 69    LDA &69 ; player_conveyor_direction
&16aa f0 06    BEQ &16b2 ; player_not_conveyed
&16ac a9 00    LDA #&00
&16ae 85 69    STA &69 ; player_conveyor_direction                  # Mark player as not being conveyed
&16b0 f0 15    BEQ &16c7 ; check_for_jump
; player_not_conveyed
&16b2 a2 9e    LDX #&9e ; Z
&16b4 20 9f 16 JSR &169f ; check_for_keypress
&16b7 29 fe    AND #&fe
&16b9 85 8e    STA &8e ; player_horizontal_speed
&16bb a2 bd    LDX #&bd ; X
&16bd 20 9f 16 JSR &169f ; check_for_keypress
&16c0 29 02    AND #&02
&16c2 18       CLC
&16c3 65 8e    ADC &8e ; player_horizontal_speed
&16c5 85 8e    STA &8e ; player_horizontal_speed
; check_for_jump
&16c7 a2 b7    LDX #&b7 ; *
&16c9 20 9f 16 JSR &169f ; check_for_keypress
&16cc 85 8b    STA &8b ; player_started_jump
&16ce 60       RTS

; update_game
&16cf a5 9f    LDA &9f ; player_rope_pixel
&16d1 d0 06    BNE &16d9 ; consider_keys                            # Player can't jump when on the rope
&16d3 a5 64    LDA &64 ; player_is_jumping
&16d5 05 65    ORA &65 ; player_jump_timer
&16d7 d0 03    BNE &16dc ; skip_keys                                # Player can't start jump or move when jumping
; consider_keys
&16d9 20 a8 16 JSR &16a8 ; handle_player_keys
; skip_keys
&16dc 20 03 0b JSR &0b03 ; to_handle_rope_time_and_events
&16df 20 bc 1e JSR &1ebc ; handle_player_jumping
&16e2 a5 8e    LDA &8e ; player_horizontal_speed
&16e4 f0 11    BEQ &16f7 ; player_isn't_moving
&16e6 cd 2d 0a CMP &0a2d ; player_speed
&16e9 f0 05    BEQ &16f0 ; player_already_moving                    # Is the player already facing in direction of move?
&16eb 8d 2d 0a STA &0a2d ; player_speed                             # If not, make them face that direction, but don't move
&16ee d0 07    BNE &16f7 ; player_isn't_moving
; player_already_moving
&16f0 18       CLC
&16f1 6d 1b 0a ADC &0a1b ; player_x_in_enemies
&16f4 8d 1b 0a STA &0a1b ; player_x_in_enemies
; player_isn't_moving
&16f7 20 8b 1a JSR &1a8b ; check_player_move_for_walls
&16fa f0 09    BEQ &1705 ; player_can_move
&16fc ad 1b 0a LDA &0a1b ; player_x_in_enemies
&16ff 38       SEC
&1700 e5 8e    SBC &8e ; player_horizontal_speed
&1702 8d 1b 0a STA &0a1b ; player_x_in_enemies
; player_can_move
&1705 a2 00    LDX #&00 ; player
&1707 20 c6 18 JSR &18c6 ; calculate_tile_address_for_enemy_X
&170a 20 bc 1a JSR &1abc ; see_if_player_should_start_jump
&170d 20 de 1a JSR &1ade ; check_player_jump_for_walls
&1710 a5 65    LDA &65 ; player_jump_timer
&1712 c9 07    CMP #&07
&1714 b0 44    BCS &175a ; player_falling_after_jump
&1716 a5 6b    LDA &6b ; player_on_slope
&1718 f0 11    BEQ &172b ; not_jumping_along_slope
&171a a5 8e    LDA &8e ; player_horizontal_speed
&171c f0 0d    BEQ &172b ; not_jumping_along_slope
&171e a6 6c    LDX &6c ; slope_direction
&1720 dd 58 1c CMP &1c58,X ; slope_speeds
&1723 f0 06    BEQ &172b ; not_jumping_along_slope
&1725 ee 24 0a INC &0a24 ; player_y_in_enemies                      # Make player move down to follow slope
&1728 ee 24 0a INC &0a24 ; player_y_in_enemies
; not_jumping_along_slope
&172b a2 00    LDX #&00 ; player
&172d 86 6b    STX &6b ; player_on_slope
&172f 20 c6 18 JSR &18c6 ; calculate_tile_address_for_enemy_X
&1732 20 e8 18 JSR &18e8 ; consider_tiles_under_player
&1735 a6 6c    LDX &6c ; slope_direction
&1737 ad 1b 0a LDA &0a1b ; player_x_in_enemies
&173a 29 07    AND #&07
&173c dd 54 1c CMP &1c54,X ; slope_checks
&173f d0 19    BNE &175a ; not_slope
&1741 bc 56 1c LDY &1c56,X ; slope_values
&1744 b1 60    LDA (&60),Y ; tile_address
&1746 c9 03    CMP #&03 ; SLOPE
&1748 d0 10    BNE &175a ; not_slope
&174a a5 8e    LDA &8e ; player_horizontal_speed
&174c dd 58 1c CMP &1c58,X ; slope_speeds
&174f d0 09    BNE &175a ; not_slope
&1751 ad 24 0a LDA &0a24 ; player_y_in_enemies
&1754 38       SEC
&1755 e9 02    SBC #&02                                             # If player moving up slope, move them upwards
&1757 8d 24 0a STA &0a24 ; player_y_in_enemies
; player_falling_after_jump
; not_slope
&175a 20 a7 1b JSR &1ba7 ; plot_room_items
&175d 20 a7 1b JSR &1ba7 ; plot_room_items
&1760 20 a7 1b JSR &1ba7 ; plot_room_items
&1763 20 6d 1d JSR &1d6d ; update_conveyor
&1766 20 62 19 JSR &1962 ; update_enemies
&1769 a2 00    LDX #&00 ; player
&176b 20 c6 18 JSR &18c6 ; calculate_tile_address_for_enemy_X
&176e 20 0c 0b JSR &0b0c ; to_mark_enemies_that_overlap_player
&1771 20 26 16 JSR &1626 ; plot_enemies
&1774 a9 b0    LDA #&b0 ; BCS                                       # Set to restore background
&1776 8d 5f 16 STA &165f ; plot_player_sprite_mode
&1779 c6 9c    DEC &9c ; player_not_plotted
&177b f0 11    BEQ &178e ; skip_unplot
&177d a9 00    LDA #&00
&177f 8d bf 08 STA &08bf ; irq_counter
; wait_for_irq                                                      # Slight delay to stop player flickering
&1782 ad bf 08 LDA &08bf ; irq_counter
&1785 f0 fb    BEQ &1782 ; wait_for_irq
&1787 a5 8c    LDA &8c ; player_x
&1789 a6 8d    LDX &8d ; player_y
&178b 20 57 16 JSR &1657 ; plot_or_unplot_previous_player_sprite    # Unplot player
; skip_unplot
&178e 20 26 16 JSR &1626 ; plot_enemies
&1791 20 0f 0b JSR &0b0f ; to_update_arrows
&1794 a9 90    LDA #&90 ; BCC                                       # Set to copy background
&1796 8d 5f 16 STA &165f ; plot_player_sprite_mode
&1799 c6 9c    DEC &9c ; player_not_plotted
&179b 10 15    BPL &17b2 ; skip_plot
&179d a2 00    LDX #&00 ; player
&179f 20 8b 15 JSR &158b ; calculate_enemy_sprite_address
&17a2 ad 1b 0a LDA &0a1b ; player_x_in_enemies
&17a5 29 f8    AND #&f8
&17a7 85 8c    STA &8c ; player_x
&17a9 86 8d    STX &8d ; player_y
&17ab a6 8d    LDX &8d ; player_y
&17ad 30 03    BMI &17b2 ; skip_plot
&17af 20 41 16 JSR &1641 ; plot_or_unplot_player_sprite             # Plot player
; skip_plot
&17b2 a2 00    LDX #&00 ; player
&17b4 86 9c    STX &9c ; player_not_plotted
&17b6 20 c6 18 JSR &18c6 ; calculate_tile_address_for_enemy_X
&17b9 20 fc 1a JSR &1afc ; check_for_player_touching_tiles
&17bc 20 6c 1c JSR &1c6c ; check_for_player_leaving_room
&17bf a5 63    LDA &63 ; player_killed
&17c1 f0 2a    BEQ &17ed ; leave
&17c3 a9 10    LDA #&10 ; sound_2
&17c5 20 27 0b JSR &0b27 ; to_play_sound_number_a                   # Play sounds for player dying
&17c8 a9 28    LDA #&28 ; sound_5
&17ca 20 27 0b JSR &0b27 ; to_play_sound_number_a
&17cd c6 9b    DEC &9b ; player_lives
&17cf ad 27 11 LDA &1127 ; entry_horizontal_speed                   # Set player back to where they entered the room
&17d2 85 8e    STA &8e ; player_horizontal_speed
&17d4 ad 28 11 LDA &1128 ; entry_jump_timer
&17d7 85 65    STA &65 ; player_jump_timer
&17d9 ad 29 11 LDA &1129 ; entry_x
&17dc 8d 1b 0a STA &0a1b ; player_x_in_enemies
&17df ad 2a 11 LDA &112a ; entry_y
&17e2 8d 24 0a STA &0a24 ; player_y_in_enemies
&17e5 ad 2b 11 LDA &112b ; entry_is_jumping
&17e8 85 64    STA &64 ; player_is_jumping
&17ea 20 f5 1c JSR &1cf5 ; remove_collected_items_from_room_data
; leave
&17ed 60       RTS

; jump_parabola_table
&17ee 00 04 04 04 04 02 02 02 00 00 00 00 fe fe fe fe fc
&17fe fc fc

; initialise_enemies
&1801 a2 03    LDX #&03
&1803 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # Get three bits of room data for number of enemies
&1806 85 87    STA &87 ; enemies_on_screen
&1808 a8       TAY
&1809 f0 63    BEQ &186e ; no_enemies
; initialise_enemies_loop                                           # For each enemy,
&180b a2 06    LDX #&06                                             # Get six bits of room data for sprite
&180d 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&1810 99 00 0a STA &0a00,Y ; enemies_sprite
&1813 a2 05    LDX #&05                                             # Get five bits of room data for x position
&1815 20 71 18 JSR &1871 ; get_x_bits_of_room_data_multiplied_by_eight
&1818 99 1b 0a STA &0a1b,Y ; enemies_x
&181b a2 04    LDX #&04                                             # Get four bits of room data for y position
&181d 20 71 18 JSR &1871 ; get_x_bits_of_room_data_multiplied_by_eight
&1820 99 24 0a STA &0a24,Y ; enemies_y
&1823 a2 05    LDX #&05                                             # Get five bits of room data for minimum position
&1825 20 71 18 JSR &1871 ; get_x_bits_of_room_data_multiplied_by_eight
&1828 99 36 0a STA &0a36,Y ; enemies_minimum
&182b a2 05    LDX #&05                                             # Get five bits of room data for maximum position
&182d 20 71 18 JSR &1871 ; get_x_bits_of_room_data_multiplied_by_eight
&1830 99 3f 0a STA &0a3f,Y ; enemies_maximum
&1833 a2 01    LDX #&01                                             # Get one bit of room data for direction
&1835 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # (0 = horizontal, 1 = vertical)
&1838 0a       ASL A
&1839 f0 02    BEQ &183d ; not_zero
&183b a9 ff    LDA #&ff
; not_zero
&183d 99 12 0a STA &0a12,Y ; enemies_direction
&1840 a2 01    LDX #&01                                             # Get one bit of room data for direction
&1842 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # (0 = left/up, 1=right/down)
&1845 85 97    STA &97 ; invert
&1847 a2 03    LDX #&03                                             # Get three bits of room data for speed
&1849 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&184c 99 2d 0a STA &0a2d,Y ; enemies_speed
&184f a6 97    LDX &97 ; invert
&1851 d0 08    BNE &185b ; skip_inversion
&1853 49 ff    EOR #&ff
&1855 18       CLC
&1856 69 01    ADC #&01
&1858 99 2d 0a STA &0a2d,Y ; enemies_speed
; skip_inversion
&185b a2 02    LDX #&02                                             # Get two bits of room data for colour
&185d 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&1860 99 48 0a STA &0a48,Y ; enemies_colour
&1863 a9 00    LDA #&00
&1865 99 5a 0a STA &0a5a,Y ; enemies_previous_speed
&1868 99 51 0a STA &0a51,Y ; enemies_previous_tile_address_low
&186b 88       DEY
&186c d0 9d    BNE &180b ; initialise_enemies_loop
; no_enemies
&186e 4c d0 13 JMP &13d0 ; unpack_enemy_sprites

; get_x_bits_of_room_data_multiplied_by_eight
&1871 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&1874 0a       ASL A
&1875 0a       ASL A
&1876 0a       ASL A
&1877 60       RTS

; set_tile_table_for_background
&1878 a0 37    LDY #&37 ; &6e00 (tile_table) / &200
&187a 84 61    STY &61 ; tile_address_high
&187c a9 0f    LDA #&0f
&187e 38       SEC
&187f e5 71    SBC &71 ; tile_y
&1881 0a       ASL A
&1882 0a       ASL A
&1883 0a       ASL A
&1884 0a       ASL A
&1885 0a       ASL A
&1886 26 61    ROL &61 ; tile_address_high
&1888 65 70    ADC &70 ; tile_x
&188a 85 60    STA &60 ; tile_address_low
&188c a5 72    LDA &72 ; tile_type
&188e 69 01    ADC #&01
&1890 c9 05    CMP #&05 ; DEADLY
&1892 90 1f    BCC &18b3 ; set_tile_table
&1894 f0 1b    BEQ &18b1 ; not_item
&1896 e6 67    INC &67 ; item_number                                # If this tile is an item, store its details
&1898 a6 67    LDX &67 ; item_number
&189a a5 90    LDA &90 ; screen_address_low
&189c 9d 8c 0a STA &0a8c,X ; items_screen_address_low
&189f a5 91    LDA &91 ; screen_address_high
&18a1 9d 98 0a STA &0a98,X ; items_screen_address_high
&18a4 a5 60    LDA &60 ; tile_address_low
&18a6 9d a8 0a STA &0aa8,X ; items_tile_address_low
&18a9 a5 61    LDA &61 ; tile_address_high
&18ab 9d b4 0a STA &0ab4,X ; items_tile_address_high
&18ae 8a       TXA
&18af 09 10    ORA #&10                                             # Mark as item
; not_item
&18b1 09 c0    ORA #&c0                                             # Mark as not enemy, nor background
; set_tile_table
&18b3 a0 00    LDY #&00
&18b5 91 60    STA (&60),Y ; tile_address
&18b7 60       RTS

; wipe_tile_table
&18b8 a0 00    LDY #&00
&18ba a9 80    LDA #&80
; wipe_tile_table_loop
&18bc 99 00 6e STA &6e00,Y ; tile_table
&18bf 99 00 6f STA &6f00,Y ; tile_table + &100
&18c2 c8       INY
&18c3 d0 f7    BNE &18bc ; wipe_tile_table_loop
&18c5 60       RTS

; calculate_tile_address_for_enemy_X
&18c6 a9 37    LDA #&37 ; &37 = &6e00 (tile_table) / &200
&18c8 85 61    STA &61 ; tile_address_high
&18ca bd 24 0a LDA &0a24,X ; enemies_y
&18cd 38       SEC
&18ce e9 08    SBC #&08
&18d0 b0 02    BCS &18d4
&18d2 c6 61    DEC &61 ; tile_address_high
&18d4 0a       ASL A
&18d5 0a       ASL A
&18d6 26 61    ROL &61 ; tile_address_high
&18d8 29 e0    AND #&e0
&18da 85 7b    STA &7b ; tmp
&18dc bd 1b 0a LDA &0a1b,X ; enemies_x
&18df 4a       LSR A
&18e0 4a       LSR A
&18e1 4a       LSR A
&18e2 18       CLC
&18e3 65 7b    ADC &7b ; tmp
&18e5 85 60    STA &60 ; tile_address_low
&18e7 60       RTS

; consider_tiles_under_player                                       # There are two tiles beneath the player's feet; one
&18e8 a6 6c    LDX &6c ; slope_direction                            # which may have a slope, and one which does not
&18ea bc 5a 1c LDY &1c5a,X ; slope_tile_offsets
&18ed b1 60    LDA (&60),Y ; tile_address                           # Consider tile beneath player's feet (with slope)
&18ef f0 02    BEQ &18f3 ; is_space
&18f1 10 0a    BPL &18fd ; isn't_space
; is_space
&18f3 e8       INX
&18f4 bc 5a 1c LDY &1c5a,X ; slope_tile_offsets
&18f7 b1 60    LDA (&60),Y ; tile_address                           # Consider tile beneath player's feet (without slope)
&18f9 f0 4a    BEQ &1945 ; player_in_midair                         # If both are empty, the player falls
&18fb 30 48    BMI &1945 ; player_in_midair
; isn't_space
&18fd c9 03    CMP #&03 ; SLOPE
&18ff d0 07    BNE &1908 ; not_slope
&1901 20 f8 1b JSR &1bf8 ; consider_slope_effect                    # If one is a slope, see how that affects the player
&1904 f0 3f    BEQ &1945 ; player_in_midair
&1906 10 0d    BPL &1915 ; check_for_conveyor
; not_slope
&1908 85 7b    STA &7b ; tile
&190a ad 24 0a LDA &0a24 ; player_y_in_enemies
&190d 29 07    AND #&07
&190f c9 03    CMP #&03
&1911 b0 32    BCS &1945 ; player_in_midair
&1913 a5 7b    LDA &7b ; tile
; check_for_conveyor
&1915 c9 04    CMP #&04 ; CONVEYOR
&1917 d0 03    BNE &191c ; not_conveyor
&1919 20 5d 1c JSR &1c5d ; consider_conveyor_effect
; not_conveyor
&191c a5 64    LDA &64 ; player_is_jumping
&191e f0 18    BEQ &1938 ; align_player_with_tile
&1920 a5 9a    LDA &9a ; player_entered_room_falling_too_far
&1922 d0 0c    BNE &1930 ; player_fell_too_far
&1924 ad 24 0a LDA &0a24 ; player_y_in_enemies
&1927 38       SEC
&1928 e5 62    SBC &62 ; where_player_fell_from
&192a 30 06    BMI &1932 ; player_didn't_fall_too_far
&192c c9 21    CMP #&21                                             # Has the player fallen more than four tiles?
&192e 90 02    BCC &1932 ; player_didn't_fall_too_far
; player_fell_too_far
&1930 e6 63    INC &63 ; player_killed                              # Kill the player if they hit after falling too far
; player_didn't_fall_too_far
&1932 a9 00    LDA #&00
&1934 85 65    STA &65 ; player_jump_timer
&1936 85 64    STA &64 ; player_is_jumping
; align_player_with_tile
&1938 a5 6b    LDA &6b ; player_on_slope
&193a d0 08    BNE &1944 ; leave
&193c ad 24 0a LDA &0a24 ; player_y_in_enemies
&193f 29 f8    AND #&f8
&1941 8d 24 0a STA &0a24 ; player_y_in_enemies
; leave
&1944 60       RTS
; player_in_midair
&1945 a5 65    LDA &65 ; player_jump_timer
&1947 d0 18    BNE &1961 ; leave
&1949 a5 64    LDA &64 ; player_is_jumping
&194b d0 07    BNE &1954 ; skip_noting_fall
&194d ad 24 0a LDA &0a24 ; player_y_in_enemies
&1950 85 62    STA &62 ; where_player_fell_from
&1952 85 64    STA &64 ; player_is_jumping
; skip_noting_fall
&1954 a9 00    LDA #&00
&1956 85 8e    STA &8e ; player_horizontal_speed
&1958 ad 24 0a LDA &0a24 ; player_y_in_enemies
&195b 18       CLC
&195c 69 04    ADC #&04
&195e 8d 24 0a STA &0a24 ; player_y_in_enemies
; leave
&1961 60       RTS

; update_enemies
&1962 a5 87    LDA &87 ; enemies_on_screen
&1964 f0 59    BEQ &19bf ; leave
&1966 85 8a    STA &8a ; enemy_to_consider
; update_enemies_loop
&1968 a6 8a    LDX &8a ; enemy_to_consider
&196a 20 eb 15 JSR &15eb ; move_enemy
&196d a9 01    LDA #&01
&196f 9d 63 0a STA &0a63,X ; enemies_need_replot
&1972 a9 00    LDA #&00
&1974 9d 6c 0a STA &0a6c,X ; enemy_has_moved
&1977 20 c6 18 JSR &18c6 ; calculate_tile_address_for_enemy_X
&197a bc 51 0a LDY &0a51,X ; enemies_previous_tile_address_low
&197d 84 7b    STY &7b ; previous_tile_address_low
&197f dd 51 0a CMP &0a51,X ; enemies_previous_tile_address_low
&1982 f0 37    BEQ &19bb ; consider_next_enemy
&1984 fe 6c 0a INC &0a6c,X ; enemy_has_moved
&1987 9d 51 0a STA &0a51,X ; enemies_previous_tile_address_low
&198a 8a       TXA
&198b 09 80    ORA #&80
&198d a0 20    LDY #&20                                             # Mark enemy in four tiles
&198f 91 60    STA (&60),Y ; tile_address
&1991 c8       INY
&1992 91 60    STA (&60),Y ; tile_address
&1994 a0 40    LDY #&40
&1996 91 60    STA (&60),Y ; tile_address
&1998 c8       INY
&1999 91 60    STA (&60),Y ; tile_address
&199b a5 7b    LDA &7b ; previous_tile_address_low
&199d f0 1c    BEQ &19bb ; consider_next_enemy
&199f bd 5a 0a LDA &0a5a,X ; enemies_previous_speed
&19a2 f0 17    BEQ &19bb ; consider_next_enemy                      # If the enemy is moving,
&19a4 0a       ASL A
&19a5 bd 12 0a LDA &0a12,X ; enemies_direction
&19a8 29 02    AND #&02
&19aa 69 00    ADC #&00
&19ac aa       TAX
&19ad bc ff 19 LDY &19ff,X ; direction_tile_offsets_one
&19b0 a5 4e    LDA &4e ; space_tile
&19b2 91 60    STA (&60),Y ; direction_tile_tile_address            # Remove enemy from previously occupied tiles
&19b4 bc 03 1a LDY &1a03,X ; offsets_two
&19b7 91 60    STA (&60),Y ; tile_address
&19b9 a6 8a    LDX &8a ; enemy_to_consider
; consider_next_enemy
&19bb c6 8a    DEC &8a ; enemy_to_consider
&19bd d0 a9    BNE &1968 ; update_enemies_loop
; leave
&19bf 60       RTS

; wipe_space_vacated_by_enemy
&19c0 a6 8a    LDX &8a ; enemy_to_consider
&19c2 bd 6c 0a LDA &0a6c,X ; enemy_has_moved
&19c5 f0 37    BEQ &19fe ; leave
&19c7 bd 12 0a LDA &0a12,X ; enemies_direction
&19ca d0 32    BNE &19fe ; leave                                    # Leave if this enemy is moving vertically.
&19cc a9 08    LDA #&08
&19ce 85 95    STA &95 ; sprite_width                               # Set sprite size to be 16x2 pixels
&19d0 a9 1f    LDA #&1f
&19d2 85 94    STA &94 ; sprite_size_in_bytes
&19d4 a9 f8    LDA #&f8
&19d6 bc 5a 0a LDY &0a5a,X ; enemies_previous_speed
&19d9 10 02    BPL &19dd ; enemy_moving_right
; enemy_moving_left
&19db a9 0c    LDA #&0c
; enemy_moving_right
&19dd 18       CLC
&19de 7d 1b 0a ADC &0a1b,X ; enemies_x
&19e1 85 7b    STA &7b ; enemy_x
&19e3 a9 00    LDA #&00
&19e5 85 92    STA &92 ; sprite_address_low
&19e7 a9 70    LDA #&70 ; &7000 = space_sprite
&19e9 85 93    STA &93 ; sprite_address_high
&19eb bd 24 0a LDA &0a24,X ; enemies_y
&19ee aa       TAX
&19ef a5 7b    LDA &7b ; enemy_x
&19f1 20 00 15 JSR &1500 ; plot_sprite
&19f4 a9 18    LDA #&18                                             # Restore sprite size to 16x16 pixels
&19f6 85 95    STA &95 ; sprite_width
&19f8 a9 3f    LDA #&3f
&19fa 85 94    STA &94 ; sprite_size_in_bytes
&19fc a6 8a    LDX &8a ; enemy_to_consider
; leave
&19fe 60       RTS

; direction_tile_offsets_one
&19ff 1f 22 00 60

; direction_tile_offsets_two
&1a03 3f 42 01 61

; plot_enemy
&1a07 b9 12 0a LDA &0a12,Y ; enemies_direction
&1a0a f0 45    BEQ &1a51 ; enemy_moving_horizontally
&1a0c b9 5a 0a LDA &0a5a,Y ; enemies_previous_speed
&1a0f 30 49    BMI &1a5a ; enemy_moving_up
; enemy_moving_down                                                 # If this enemy is moving down,
&1a11 be 00 0a LDX &0a00,Y ; enemies_sprite
&1a14 e0 21    CPX #&21
&1a16 f0 36    BEQ &1a4e ; enemy_is_skull_mouth                     # The skull mouth will be overwritten by the skull top
&1a18 85 7b    STA &7b ; previous_speed                             # Otherwise,
&1a1a 0a       ASL A
&1a1b 0a       ASL A
&1a1c e9 00    SBC #&00
&1a1e 85 94    STA &94 ; sprite_size_in_bytes                       # Set sprite to be section previously occupied
&1a20 a5 92    LDA &92 ; sprite_address_low
&1a22 85 97    STA &97 ; previous_sprite_address_low
&1a24 a9 00    LDA #&00
&1a26 85 92    STA &92 ; sprite_address_low
&1a28 a5 93    LDA &93 ; sprite_address_high
&1a2a 85 96    STA &96 ; previous_sprite_address_high
&1a2c a9 70    LDA #&70
&1a2e 85 93    STA &93 ; sprite_address_high
&1a30 b9 24 0a LDA &0a24,Y ; enemies_y
&1a33 38       SEC
&1a34 e5 7b    SBC &7b ; previous_speed
&1a36 aa       TAX
&1a37 b9 1b 0a LDA &0a1b,Y ; enemies_x
&1a3a 20 00 15 JSR &1500 ; plot_sprite                              # Wipe previous position of sprite
&1a3d a5 96    LDA &96 ; previous_sprite_address_high
&1a3f 85 93    STA &93 ; sprite_address_high
&1a41 a9 3f    LDA #&3f                                             # Set sprite to be 16x16 pixels
&1a43 85 94    STA &94 ; sprite_size_in_bytes
&1a45 a5 97    LDA &97 ; previous_sprite_address_low
&1a47 8d 13 15 STA &1513 ; plot_sprite_address_low                  # Plot sprite
&1a4a 20 81 1a JSR &1a81 ; into_plot_sprite_with_skip
&1a4d 60       RTS
; enemy_is_skull_mouth
&1a4e be 24 0a LDX &0a24,Y ; enemies_y
; enemy_moving_horizontally
&1a51 b9 1b 0a LDA &0a1b,Y ; enemies_x
&1a54 29 f8    AND #&f8
&1a56 20 00 15 JSR &1500 ; plot_sprite
&1a59 60       RTS
; enemy_moving_up                                                   # If the enemy is moving up,
&1a5a b9 1b 0a LDA &0a1b,Y ; enemies_x
&1a5d 20 00 15 JSR &1500 ; plot_sprite                              # Plot sprite
&1a60 a9 00    LDA #&00
&1a62 8d 13 15 STA &1513 ; plot_sprite_address_low
&1a65 a4 8a    LDY &8a ; enemy_to_consider
&1a67 a9 70    LDA #&70
&1a69 85 93    STA &93 ; sprite_address_high
&1a6b b9 5a 0a LDA &0a5a,Y ; enemies_previous_speed
&1a6e 49 ff    EOR #&ff
&1a70 18       CLC
&1a71 69 01    ADC #&01
&1a73 0a       ASL A
&1a74 0a       ASL A
&1a75 e9 00    SBC #&00
&1a77 85 94    STA &94 ; sprite_size_in_bytes                       # Set sprite to be section previously occupied
&1a79 20 81 1a JSR &1a81 ; into_plot_sprite_with_skip               # Wipe previous position of sprite
&1a7c a9 3f    LDA #&3f
&1a7e 85 94    STA &94 ; sprite_size_in_bytes                       # Restore sprite to 16x16 pixels
&1a80 60       RTS

; into_plot_sprite_with_skip
&1a81 a6 94    LDX &94 ; sprite_size_in_bytes
&1a83 a5 93    LDA &93 ; sprite_address_high
&1a85 8d 14 15 STA &1514 ; plot_sprite_address_high
&1a88 4c 23 15 JMP &1523 ; plot_sprite_skipping_first_column

; check_player_move_for_walls
&1a8b a2 00    LDX #&00 ; player
&1a8d 86 96    STX &96 ; walls
&1a8f 20 c6 18 JSR &18c6 ; calculate_tile_address_for_enemy_X
&1a92 a0 20    LDY #&20
&1a94 a5 8e    LDA &8e ; player_horizontal_speed
&1a96 f0 13    BEQ &1aab ; leave_with_result                        # No walls hit if player not moving
&1a98 30 01    BMI &1a9b ; player_moving_left
; player_moving_right
&1a9a c8       INY
; player_moving_left
&1a9b 20 ae 1a JSR &1aae ; check_tile_for_wall                      # Check top of player
&1a9e 20 ae 1a JSR &1aae ; check_tile_for_wall                      # Check middle/bottom of player
&1aa1 ad 24 0a LDA &0a24 ; player_y_in_enemies
&1aa4 29 07    AND #&07
&1aa6 f0 03    BEQ &1aab ; leave_with_result
&1aa8 20 ae 1a JSR &1aae ; check_tile_for_wall                      # Check bottom of player if not aligned
; leave_with_result
&1aab a5 96    LDA &96 ; walls
&1aad 60       RTS

; check_tile_for_wall
&1aae b1 60    LDA (&60),Y ; tile_address
&1ab0 c9 02    CMP #&02 ; WALL
&1ab2 d0 02    BNE &1ab6 ; not_wall
&1ab4 e6 96    INC &96 ; walls
; not_wall
&1ab6 98       TYA
&1ab7 18       CLC
&1ab8 69 20    ADC #&20
&1aba a8       TAY
&1abb 60       RTS

; see_if_player_should_start_jump
&1abc a5 8b    LDA &8b ; player_started_jump
&1abe f0 1d    BEQ &1add ; leave
&1ac0 e6 64    INC &64 ; player_is_jumping
&1ac2 a9 12    LDA #&12
&1ac4 85 65    STA &65 ; player_jump_timer
&1ac6 e6 8b    INC &8b ; player_started_jump
&1ac8 ad 24 0a LDA &0a24 ; player_y_in_enemies
&1acb 38       SEC
&1acc e9 08    SBC #&08
&1ace 85 62    STA &62 ; where_player_fell_from
&1ad0 20 de 1a JSR &1ade ; check_player_jump_for_walls
&1ad3 f0 08    BEQ &1add ; leave
&1ad5 a9 08    LDA #&08 ; sound_1
&1ad7 20 27 0b JSR &0b27 ; to_play_sound_number_a                   # Play sound for jumping
&1ada 20 bc 1e JSR &1ebc ; handle_player_jumping
; leave
&1add 60       RTS

; check_player_jump_for_walls
&1ade ad 24 0a LDA &0a24 ; player_y_in_enemies
&1ae1 29 07    AND #&07
&1ae3 d0 16    BNE &1afb ; leave
&1ae5 a0 00    LDY #&00                                             # Consider tile above player's left
&1ae7 b1 60    LDA (&60),Y ; tile_address
&1ae9 49 02    EOR #&02 ; WALL
&1aeb f0 07    BEQ &1af4 ; can't_jump
&1aed c8       INY                                                  # Consider tile above player's right
&1aee b1 60    LDA (&60),Y ; tile_address
&1af0 49 02    EOR #&02 ; WALL
&1af2 d0 07    BNE &1afb ; leave
; can't_jump
&1af4 20 bc 1e JSR &1ebc ; handle_player_jumping                    # Conclude any existing jump
&1af7 a9 00    LDA #&00                                             # If either is a wall, player can't jump
&1af9 85 65    STA &65 ; player_jump_timer
; leave
&1afb 60       RTS

; check_for_player_touching_tiles
&1afc ad 24 0a LDA &0a24 ; player_y_in_enemies
&1aff 09 07    ORA #&07
&1b01 38       SEC
&1b02 ed 24 0a SBC &0a24 ; player_y_in_enemies
&1b05 85 96    STA &96 ; rows_to_check
&1b07 a0 20    LDY #&20                                             # Consider tile at top left of player
&1b09 a9 3d    LDA #&3d
&1b0b 20 16 1b JSR &1b16 ; check_for_player_touching_tile
&1b0e a0 21    LDY #&21                                             # Consider tile at top right of player
&1b10 a9 3f    LDA #&3f
&1b12 20 16 1b JSR &1b16 ; check_for_player_touching_tile
&1b15 60       RTS

; check_for_player_touching_tile
&1b16 85 97    STA &97 ; buffer_offset
&1b18 a6 96    LDX &96 ; rows_to_check
&1b1a 20 2f 1b JSR &1b2f ; check_rows_of_player_against_tile        # Check top of player (aligned to tile boundaries)
&1b1d a2 07    LDX #&07
&1b1f 20 2f 1b JSR &1b2f ; check_rows_of_player_against_tile        # Check middle of player
&1b22 a9 07    LDA #&07
&1b24 38       SEC
&1b25 e5 96    SBC &96 ; rows_to_check
&1b27 f0 05    BEQ &1b2e ; leave
&1b29 aa       TAX
&1b2a ca       DEX
&1b2b 20 2f 1b JSR &1b2f ; check_rows_of_player_against_tile        # Check bottom of player
; leave
&1b2e 60       RTS

; check_rows_of_player_against_tile
&1b2f 98       TYA
&1b30 18       CLC
&1b31 69 20    ADC #&20
&1b33 85 7b    STA &7b ; next_tile_offset                           # Consider tile immediately below when next called
&1b35 b1 60    LDA (&60),Y ; tile_address
&1b37 85 68    STA &68 ; tile
&1b39 10 1e    BPL &1b59 ; tile_is_background
&1b3b a4 97    LDY &97 ; buffer_offset                              # If this tile is an enemy or an item,
; check_rows_of_player_against_tile                                 # for each row of the player within the tile,
&1b3d b9 20 70 LDA &7020,Y ; player_background_buffer
&1b40 f0 03    BEQ &1b45 ; not_part_of_player_left                  # is there part of the player there?
&1b42 20 67 1b JSR &1b67 ; player_is_touching_tile                  # If so, consider the interaction
; not_part_of_player_left
&1b45 88       DEY
&1b46 b9 20 70 LDA &7020,Y ; player_background_buffer               # Check again on right-hand side
&1b49 f0 03    BEQ &1b4e ; not_part_of_player_right
&1b4b 20 67 1b JSR &1b67 ; player_is_touching_tile
; not_part_of_player_right
&1b4e 88       DEY
&1b4f 88       DEY
&1b50 88       DEY
&1b51 ca       DEX
&1b52 10 e9    BPL &1b3d ; check_rows_of_player_against_tile
&1b54 84 97    STY &97 ; buffer_y
&1b56 a4 7b    LDY &7b ; next_tile_offset
&1b58 60       RTS
; tile_is_background                                                # If this tile is just background,
&1b59 e8       INX                                                  # set things up for the next check
&1b5a 8a       TXA
&1b5b 0a       ASL A
&1b5c 0a       ASL A
&1b5d 49 ff    EOR #&ff
&1b5f 38       SEC
&1b60 65 97    ADC &97 ; buffer_offset
&1b62 85 97    STA &97 ; buffer_offset
&1b64 a4 7b    LDY &7b ; next_y
&1b66 60       RTS

; player_is_touching_tile
&1b67 86 70    STX &70 ; x
&1b69 84 71    STY &71 ; y
&1b6b a9 00    LDA #&00
&1b6d 99 20 70 STA &7020,Y ; player_background_buffer
&1b70 a5 68    LDA &68 ; tile
&1b72 29 7f    AND #&7f
&1b74 f0 29    BEQ &1b9f ; tile_is_space
&1b76 c9 4e    CMP #&4e
&1b78 b0 11    BCS &1b8b ; tile_is_item
&1b7a c9 02    CMP #&02
&1b7c d0 06    BNE &1b84 ; not_bathroom_toilet                      # Is this the bathroom toilet? (room &15, slot 2)
&1b7e a5 55    LDA &55 ; player_room
&1b80 c9 15    CMP #&15 ; The Bathroom
&1b82 f0 02    BEQ &1b86 ; leave_with_initial_x_and_y               # If so, it isn't deadly.
; not_bathroom_toilet
&1b84 e6 63    INC &63 ; player_killed                              # Otherwise, kill the player
; leave_with_initial_x_and_y
&1b86 a6 70    LDX &70 ; x
&1b88 a4 71    LDY &71 ; y
&1b8a 60       RTS
; tile_is_item                                                      # If the tile is an item,
&1b8b 29 0f    AND #&0f
&1b8d aa       TAX
&1b8e bd 80 0a LDA &0a80,X ; items_colour
&1b91 f0 f3    BEQ &1b86 ; leave_with_initial_x_and_y               # has it been collected?
&1b93 a9 00    LDA #&00
&1b95 9d 80 0a STA &0a80,X ; items_colour                           # If not, remove it from the screen
&1b98 86 67    STX &67 ; item_number
&1b9a 20 06 0b JSR &0b06 ; to_collect_item
&1b9d 10 e7    BPL &1b86 ; leave_with_initial_x_and_y
; tile_is_space
&1b9f a5 6f    LDA &6f ; room_contains_rope
&1ba1 d0 e3    BNE &1b86 ; leave_with_initial_x_and_y
&1ba3 e6 63    INC &63 ; player_killed                              # Player has been hit by an arrow or moving enemy
&1ba5 d0 df    BNE &1b86 ; leave_with_initial_x_and_y

; plot_room_items
&1ba7 a6 66    LDX &66 ; items_in_room_minus_one
&1ba9 30 4c    BMI &1bf7 ; leave
&1bab e4 67    CPX &67 ; item_number
&1bad 90 40    BCC &1bef ; skip_item
&1baf a6 67    LDX &67 ; item_number
&1bb1 bd 8c 0a LDA &0a8c,X ; items_screen_address_low
&1bb4 85 90    STA &90 ; screen_address_low
&1bb6 bd 98 0a LDA &0a98,X ; items_screen_address_high
&1bb9 85 91    STA &91 ; screen_address_high
&1bbb bc 80 0a LDY &0a80,X ; items_colour
&1bbe f0 0d    BEQ &1bcd ; item_collected
&1bc0 de 80 0a DEC &0a80,X ; items_colour
&1bc3 d0 05    BNE &1bca ; skip_reset_colour
&1bc5 a9 03    LDA #&03
&1bc7 9d 80 0a STA &0a80,X ; items_colour
; skip_reset_colour
&1bca bc 80 0a LDY &0a80,X ; items_colour
; item_collected
&1bcd b9 87 15 LDA &1587,Y ; colour_mask_values
&1bd0 85 89    STA &89 ; sprite_colour
&1bd2 a0 0f    LDY #&0f
; plot_item_loop
&1bd4 b9 a0 70 LDA &70a0,Y ; unpacked_background_sprites
&1bd7 25 89    AND &89 ; sprite_colour
&1bd9 91 90    STA (&90),Y ; screen_address
&1bdb 88       DEY
&1bdc 10 f6    BPL &1bd4 ; plot_item_loop
&1bde bd a8 0a LDA &0aa8,X ; items_tile_address_low
&1be1 85 90    STA &90 ; tile_address_low
&1be3 bd b4 0a LDA &0ab4,X ; items_tile_address_high
&1be6 85 91    STA &91 ; tile_address_high
&1be8 8a       TXA
&1be9 09 e0    ORA #&e0
&1beb a0 00    LDY #&00
&1bed 91 90    STA (&90),Y ; tile_address
; skip_item
&1bef c6 67    DEC &67 ; item_number
&1bf1 10 04    BPL &1bf7 ; leave
&1bf3 a9 0b    LDA #&0b
&1bf5 85 67    STA &67 ; item_number
; leave
&1bf7 60       RTS

; consider_slope_effect
&1bf8 a6 6c    LDX &6c ; slope_direction
&1bfa 98       TYA                                                  # Y is a tile offset of tile beneath player with slope
&1bfb dd 5a 1c CMP &1c5a,X ; slope_tile_offsets
&1bfe d0 4d    BNE &1c4d ; leave_with_minus_one
; player_is_climbing_slope
&1c00 e6 6b    INC &6b ; player_on_slope
&1c02 ad 24 0a LDA &0a24 ; player_y_in_enemies
&1c05 29 07    AND #&07
&1c07 85 7b    STA &7b ; player_y_fraction
&1c09 ad 1b 0a LDA &0a1b ; player_x_in_enemies
&1c0c 29 07    AND #&07
&1c0e 5d 50 1c EOR &1c50,X ; slope_climb_eors
&1c11 38       SEC
&1c12 7d 52 1c ADC &1c52,X ; slope_climb_adds
&1c15 30 0c    BMI &1c23 ; player_not_climbing_slope
&1c17 c5 7b    CMP &7b ; player_y_fraction
&1c19 90 08    BCC &1c23 ; player_not_climbing_slope
&1c1b ce 24 0a DEC &0a24 ; player_y_in_enemies                      # Make player move up to follow slope
&1c1e ce 24 0a DEC &0a24 ; player_y_in_enemies
&1c21 b0 27    BCS &1c4a ; leave_with_zero
; player_not_climbing_slope
&1c23 18       CLC
&1c24 69 04    ADC #&04
&1c26 c5 7b    CMP &7b ; player_y_fraction
&1c28 90 20    BCC &1c4a ; leave_with_zero
&1c2a e9 02    SBC #&02
&1c2c 85 7b    STA &7b ; player_y_fraction
&1c2e ad 24 0a LDA &0a24 ; player_y_in_enemies
&1c31 29 f8    AND #&f8
&1c33 05 7b    ORA &7b ; player_y_fraction
&1c35 e9 01    SBC #&01
&1c37 8d 24 0a STA &0a24 ; player_y_in_enemies
&1c3a a9 01    LDA #&01
&1c3c a6 55    LDX &55 ; player_room
&1c3e e0 16    CPX #&16 ; Halfway up the East Wall                  # The slopes in "Halfway up the East Wall"
&1c40 f0 04    BEQ &1c46 ; leave_with_four
&1c42 e0 1d    CPX #&1d ; The Chapel                                # and "The Chapel" are treated as conveyors
&1c44 d0 02    BNE &1c48 ; leave_with_one
; leave_with_four
&1c46 a9 04    LDA #&04 ; CONVEYOR
; leave_with_one
&1c48 aa       TAX ; 1 = PLATFORM
&1c49 60       RTS
; leave_with_zero
&1c4a a9 00    LDA #&00 ; SPACE
&1c4c 60       RTS
; leave_with_minus_one
&1c4d a9 ff    LDA #&ff                                             # Treat tile as though not a slope
&1c4f 60       RTS

; slope_climb_eors
&1c50 ff 00

; slope_climb_adds
&1c52 05 fe

; slope_checks
&1c54 00 06

; slope_values
&1c56 41 40

; slope_speeds
&1c58 02 fe

; slope_tile_offsets
&1c5a 61 60 61

; consider_conveyor_effect
&1c5d a5 8e    LDA &8e ; player_horizontal_speed                    # Is the player moving?
&1c5f f0 04    BEQ &1c63 ; start_conveying_player
&1c61 c5 6a    CMP &6a ; conveyor_direction                         # If not, or they're moving in the conveyor's direction,
; start_conveying_player
&1c63 d0 06    BNE &1c6b ; leave
&1c65 a5 6a    LDA &6a ; conveyor_direction                         # move them with the conveyor
&1c67 85 8e    STA &8e ; player_horizontal_speed
&1c69 85 69    STA &69 ; player_conveyor_direction                  # (preventing them from changing direction)
; leave
&1c6b 60       RTS

; check_for_player_leaving_room
&1c6c a0 00    LDY #&00
&1c6e ad 1b 0a LDA &0a1b ; player_x_in_enemies
&1c71 f0 27    BEQ &1c9a ; player_at_left_or_right_edge_of_room
&1c73 c8       INY
&1c74 c9 f6    CMP #&f6
&1c76 f0 22    BEQ &1c9a ; player_at_left_or_right_edge_of_room
&1c78 c8       INY
&1c79 a2 68    LDX #&68
&1c7b ad 24 0a LDA &0a24 ; player_y_in_enemies
&1c7e 30 22    BMI &1ca2 ; player_at_top_or_bottom_edge_of_room
&1c80 c8       INY
&1c81 a2 01    LDX #&01
&1c83 c9 71    CMP #&71
&1c85 90 2d    BCC &1cb4 ; leave
&1c87 a5 64    LDA &64 ; player_is_jumping
&1c89 f0 17    BEQ &1ca2 ; player_at_top_or_bottom_edge_of_room
&1c8b ad 24 0a LDA &0a24 ; player_y_in_enemies
&1c8e 38       SEC
&1c8f e5 62    SBC &62 ; where_player_fell_from
&1c91 c9 22    CMP #&22
&1c93 90 0d    BCC &1ca2 ; player_at_top_or_bottom_edge_of_room
&1c95 85 9a    STA &9a ; player_entered_room_falling_too_far
&1c97 4c a2 1c JMP &1ca2 ; player_at_top_or_bottom_edge_of_room
; player_at_left_or_right_edge_of_room
&1c9a 49 f4    EOR #&f4
&1c9c 8d 1b 0a STA &0a1b ; player_x_in_enemies
&1c9f 4c a9 1c JMP &1ca9 ; change_room
 ; player_at_top_or_bottom_edge_of_room
&1ca2 8e 24 0a STX &0a24 ; player_y_in_enemies
&1ca5 a9 00    LDA #&00
&1ca7 85 8e    STA &8e ; player_horizontal_speed
; change_room
&1ca9 b9 a4 0a LDA &0aa4,Y ; exit_rooms
&1cac 85 55    STA &55 ; player_room
&1cae 20 f5 1c JSR &1cf5 ; remove_collected_items_from_room_data
&1cb1 20 1b 11 JSR &111b ; initialise_room
; leave
&1cb4 60       RTS

; initialise_room_items_and_exits
&1cb5 a2 04    LDX #&04                                             # Get four bits of room data for number of items in room
&1cb7 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&1cba a8       TAY
&1cbb 88       DEY
&1cbc 84 66    STY &66 ; items_in_room_minus_one
&1cbe 30 0b    BMI &1ccb ; no_items
; set_items_loop                                                    # For each item,
&1cc0 a2 01    LDX #&01                                             # get one bit of room data for its state
&1cc2 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # (0 = collected, 1 = uncollected)
&1cc5 99 80 0a STA &0a80,Y ; items_colour
&1cc8 88       DEY
&1cc9 10 f5    BPL &1cc0 ; set_items_loop
; no_items
&1ccb a0 00    LDY #&00
; set_exits_loop                                                    # For each of four directions
&1ccd a2 06    LDX #&06                                             # get six bits of room data for the room exited to
&1ccf 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&1cd2 99 a4 0a STA &0aa4,Y ; exit_rooms
&1cd5 c8       INY
&1cd6 c0 04    CPY #&04
&1cd8 d0 f3    BNE &1ccd ; set_exits_loop
&1cda a2 01    LDX #&01                                             # Get one bit of room data for conveyor direction
&1cdc 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # (0 = left, 1 = right)
&1cdf 0a       ASL A
&1ce0 0a       ASL A
&1ce1 38       SEC
&1ce2 e9 02    SBC #&02
&1ce4 85 6a    STA &6a ; conveyor_direction
&1ce6 a2 01    LDX #&01                                             # Get one bit of room data for slope direction
&1ce8 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # (0 = /, 1 = \)
&1ceb 85 6c    STA &6c ; slope_direction
&1ced a2 01    LDX #&01                                             # Get one bit of room data for rope
&1cef 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data                  # (1 = room contains rope)
&1cf2 85 6f    STA &6f ; room_contains_rope
&1cf4 60       RTS

; remove_collected_items_from_room_data
&1cf5 a0 00    LDY #&00
&1cf7 a6 66    LDX &66 ; items_in_room_minus_one
&1cf9 30 31    BMI &1d2c ; leave
&1cfb a9 04    LDA #&04
; remove_collected_items_from_room_data_loop
&1cfd 85 97    STA &97 ; bit_for_item
&1cff c6 97    DEC &97 ; bit_for_item
&1d01 10 05    BPL &1d08 ; skip_new_byte
&1d03 a9 07    LDA #&07
&1d05 85 97    STA &97 ; bit_for_item
&1d07 c8       INY
; skip_new_byte
&1d08 bd 80 0a LDA &0a80,X ; items_colour
&1d0b f0 02    BEQ &1d0f ; item_collected
&1d0d a9 ff    LDA #&ff
; item_collected
&1d0f 85 7b    STA &7b ; item_state
&1d11 86 96    STX &96 ; x
&1d13 a6 97    LDX &97 ; bit_for_item
&1d15 bd 2d 1d LDA &1d2d,X ; inverse_of_bits
&1d18 49 ff    EOR #&ff
&1d1a 25 7b    AND &7b ; item_state
&1d1c 85 7b    STA &7b ; item_state
&1d1e b1 50    LDA (&50),Y ; room_data_address
&1d20 3d 2d 1d AND &1d2d,X ; inverse_of_bits
&1d23 05 7b    ORA &7b ; item_state
&1d25 91 50    STA (&50),Y ; room_data_address
&1d27 a6 96    LDX &96 ; x
&1d29 ca       DEX
&1d2a 10 d3    BPL &1cff ; remove_collected_items_from_room_data_loop
; leave
&1d2c 60       RTS

; inverse_of_bits
&1d2d 7f bf df ef f7 fb fd fe

; reset_items
&1d35 a0 0b    LDY #&0b
&1d37 a9 01    LDA #&01
; mark_all_items_as_uncollected_loop
&1d39 99 80 0a STA &0a80,Y ; items_colour
&1d3c 88       DEY
&1d3d 10 fa    BPL &1d39 ; mark_all_items_as_uncollected_loop
&1d3f a9 3c    LDA #&3c
&1d41 85 81    STA &81 ; room
; reset_items_room_loop
&1d43 a6 81    LDX &81 ; room
&1d45 20 59 1d JSR &1d59 ; calculate_room_data_address
&1d48 a2 04    LDX #&04
&1d4a 20 b8 11 JSR &11b8 ; get_x_bits_of_room_data
&1d4d 85 66    STA &66 ; items_in_room_minus_one
&1d4f c6 66    DEC &66 ; items_in_room_minus_one
&1d51 20 f5 1c JSR &1cf5 ; remove_collected_items_from_room_data
&1d54 c6 81    DEC &81 ; room
&1d56 d0 eb    BNE &1d43 ; reset_items_room_loop
&1d58 60       RTS

; calculate_room_data_address
&1d59 a9 00    LDA #&00
&1d5b 85 52    STA &52 ; room_data_offset
&1d5d 85 53    STA &53 ; bits_remaining_in_room_data_byte
&1d5f bd 00 1f LDA &1f00,X ; room_data_address_low_table
&1d62 85 50    STA &50 ; room_data_address_low
&1d64 bd 3d 1f LDA &1f3d,X ; room_data_address_high_table
&1d67 18       CLC
&1d68 69 1f    ADC #&1f
&1d6a 85 51    STA &51 ; room_data_address_high
&1d6c 60       RTS

; update_conveyor
&1d6d a5 56    LDA &56 ; pages_of_tile_table_remaining_when_finding_conveyor
&1d6f f0 3d    BEQ &1dae ; leave                                    # Is there a conveyor in this room? If not, leave
&1d71 a5 57    LDA &57 ; game_timer
&1d73 29 07    AND #&07
&1d75 aa       TAX
&1d76 a5 58    LDA &58 ; conveyor_length
&1d78 85 7b    STA &7b ; conveyor_sections_remaining_to_update
&1d7a a5 59    LDA &59 ; conveyor_screen_address_low
&1d7c 85 90    STA &90 ; screen_address_low
&1d7e a5 5a    LDA &5a ; conveyor_screen_address_high
&1d80 85 91    STA &91 ; screen_address_high
&1d82 a0 00    LDY #&00
&1d84 18       CLC
; update_conveyor_loop
&1d85 bd 80 70 LDA &7080,X ; unpacked_conveyor_sprite
&1d88 91 90    STA (&90),Y ; screen_address
&1d8a c8       INY
&1d8b c8       INY
&1d8c bd 88 70 LDA &7088,X ; unpacked_conveyor_sprite + 8
&1d8f 91 90    STA (&90),Y ; screen_address
&1d91 98       TYA
&1d92 69 06    ADC #&06
&1d94 a8       TAY
&1d95 bd 90 70 LDA &7090,X ; unpacked_conveyor_sprite + 16
&1d98 91 90    STA (&90),Y ; screen_address
&1d9a c8       INY
&1d9b c8       INY
&1d9c bd 98 70 LDA &7098,X ; unpacked_conveyor_sprite + 24
&1d9f 91 90    STA (&90),Y ; screen_address
&1da1 98       TYA
&1da2 69 06    ADC #&06
&1da4 a8       TAY
&1da5 d0 03    BNE &1daa
&1da7 e6 91    INC &91 ; screen_address_high
&1da9 18       CLC
&1daa c6 7b    DEC &7b ; conveyor_sections_remaining_to_update
&1dac d0 d7    BNE &1d85 ; update_conveyor_loop
&1dae 60       RTS

; calculate_screen_address_of_conveyor
&1daf a0 00    LDY #&00
&1db1 84 60    STY &60 ; tile_address_low
&1db3 a9 6e    LDA #&6e ; &6e00 = tile_table
&1db5 85 61    STA &61 ; tile_address_high
&1db7 a9 02    LDA #&02
&1db9 85 56    STA &56 ; pages_of_tile_table_remaining_when_finding_conveyor
; find_start_of_conveyor_loop
&1dbb 20 e5 1d JSR &1de5 ; check_if_tile_is_conveyor
&1dbe d0 fb    BNE &1dbb ; find_start_of_conveyor_loop
&1dc0 84 59    STY &59 ; conveyor_screen_address_low
&1dc2 a5 61    LDA &61 ; tile_address_high
&1dc4 29 01    AND #&01
&1dc6 06 59    ASL &59 ; conveyor_screen_address_low
&1dc8 2a       ROL A
&1dc9 06 59    ASL &59 ; conveyor_screen_address_low
&1dcb 2a       ROL A
&1dcc 06 59    ASL &59 ; conveyor_screen_address_low
&1dce 2a       ROL A
&1dcf 06 59    ASL &59 ; conveyor_screen_address_low
&1dd1 2a       ROL A
&1dd2 69 30    ADC #&30
&1dd4 85 5a    STA &5a ; conveyor_screen_address_high
&1dd6 a2 00    LDX #&00
&1dd8 e6 56    INC &56 ; pages_of_tile_table_remaining_when_finding_conveyor
; find_end_of_conveyor_loop
&1dda e8       INX
&1ddb 20 e5 1d JSR &1de5 ; check_if_tile_is_conveyor
&1dde f0 fa    BEQ &1dda ; find_end_of_conveyor_loop
&1de0 86 58    STX &58 ; conveyor_length
&1de2 4c f6 1d JMP &1df6 ; prepare_conveyor_sprites

; check_if_tile_is_conveyor
&1de5 c8       INY
&1de6 d0 09    BNE &1df1 ; compare_tile_with_four
&1de8 e6 61    INC &61 ; tile_address_high
&1dea c6 56    DEC &56 ; pages_of_tile_table_remaining_when_finding_conveyor
&1dec d0 03    BNE &1df1 ; compare_tile_with_four
&1dee 68       PLA                                                  # Leave calculate_screen_address_of_conveyor at end of
&1def 68       PLA                                                  # tile table
&1df0 60       RTS
; compare_tile_with_four
&1df1 b1 60    LDA (&60),Y ; tile_address
&1df3 c9 04    CMP #&04 ; CONVEYOR
&1df5 60       RTS

; prepare_conveyor_sprites
&1df6 ad fa 09 LDA &09fa ; background_tiles_sprites + 1
&1df9 20 3a 15 JSR &153a ; calculate_background_sprite_address
&1dfc ae f4 09 LDX &09f4 ; background_tiles_colours + 3
&1dff bd 87 15 LDA &1587,X ; colour_mask_values
&1e02 85 81    STA &81 ; conveyor_colour
&1e04 a0 00    LDY #&00
&1e06 a5 6a    LDA &6a ; conveyor_direction
&1e08 30 07    BMI &1e11 ; prepare_top_of_left_conveyor
; prepare_top_of_right_conveyor
&1e0a a2 00    LDX #&00                                             # Prepare top of conveyor
&1e0c 20 29 1e JSR &1e29 ; prepare_right_conveyor_bytes
&1e0f 30 05    BMI &1e16 ; prepare_conveyor_bottom
; prepare_top_of_left_conveyor
&1e11 a2 07    LDX #&07
&1e13 20 3a 1e JSR &1e3a ; prepare_left_conveyor_bytes
; prepare_conveyor_bottom
&1e16 a0 02    LDY #&02
&1e18 a5 6a    LDA &6a ; conveyor_direction
&1e1a 30 07    BMI &1e23 ; prepare_bottom_of_left_conveyor
; prepare_bottom_of_right_conveyor
&1e1c a2 0f    LDX #&0f                                             # Prepare bottom of conveyor
&1e1e 20 3a 1e JSR &1e3a ; prepare_left_conveyor_bytes
&1e21 30 05    BMI &1e28 ; leave
; prepare_bottom_of_left_conveyor
&1e23 a2 08    LDX #&08
&1e25 20 29 1e JSR &1e29 ; prepare_right_conveyor_bytes
; leave
&1e28 60       RTS

; prepare_right_conveyor_bytes
&1e29 b1 90    LDA (&90),Y ; sprite_address
&1e2b 85 97    STA &97 ; packed_byte
&1e2d a9 07    LDA #&07
&1e2f 85 7a    STA &7a ; count
; prepare_right_conveyor_bytes_loop
&1e31 20 4b 1e JSR &1e4b ; rotate_and_store_conveyor_byte
&1e34 e8       INX
&1e35 c6 7a    DEC &7a ; count
&1e37 10 f8    BPL &1e31 ; prepare_right_conveyor_bytes_loop
&1e39 60       RTS

; prepare_left_conveyor_bytes
&1e3a b1 90    LDA (&90),Y ; sprite_address
&1e3c 85 97    STA &97 ; packed_byte
&1e3e a9 07    LDA #&07
&1e40 85 7a    STA &7a ; count
; prepare_left_conveyor_bytes_loop
&1e42 20 4b 1e JSR &1e4b ; rotate_and_store_conveyor_byte
&1e45 ca       DEX
&1e46 c6 7a    DEC &7a ; count
&1e48 10 f8    BPL &1e42 ; prepare_left_conveyor_bytes_loop
&1e4a 60       RTS

; rotate_and_store_conveyor_byte
&1e4b 18       CLC
&1e4c a5 97    LDA &97 ; packed_byte
&1e4e 10 01    BPL &1e51
&1e50 38       SEC
&1e51 2a       ROL A
&1e52 85 97    STA &97 ; packed_byte
&1e54 20 bc 14 JSR &14bc ; unpack_byte_of_sprite_data
&1e57 25 81    AND &81 ; conveyor_colour
&1e59 9d 80 70 STA &7080,X ; unpacked_conveyor_sprite
&1e5c a5 88    LDA &88 ; unpacked_byte_two
&1e5e 25 81    AND &81 ; conveyor_colour
&1e60 9d 90 70 STA &7090,X ; unpacked_conveyor_sprite + 16
&1e63 60       RTS

; animate_game_over_boot
&1e64 a9 28    LDA #&28
&1e66 8d 84 08 STA &0884 ; sound_0_pitch
&1e69 a9 00    LDA #&00
&1e6b 8d 8a 02 STA &028a ; melody_active                            # Disable melody
&1e6e a2 00    LDX #&00                                             # Room 0 is the Game Over screen
&1e70 20 59 1d JSR &1d59 ; calculate_room_data_address
&1e73 20 01 18 JSR &1801 ; initialise_enemies
&1e76 a9 01    LDA #&01
&1e78 8d 0b 0a STA &0a0b ; enemies_unpacked_sprite_offset + 2       # Set second barrel to use player sprite
&1e7b 8d 64 0a STA &0a64 ; enemies_need_replot + 1                  # Mark all enemies as needing plotting
&1e7e 8d 65 0a STA &0a65 ; enemies_need_replot + 2
&1e81 8d 66 0a STA &0a66 ; enemies_need_replot + 3
&1e84 20 26 16 JSR &1626 ; plot_enemies
&1e87 a9 73    LDA #&73
&1e89 85 93    STA &93 ; sprite_address_high
&1e8b a9 40    LDA #&40 ; &7340 = unpacked_enemy_sprites + &40
&1e8d 85 92    STA &92 ; sprite_address_low
; animate_game_over_boot_loop
&1e8f ad 1c 0a LDA &0a1c ; enemies_x + 1
&1e92 ae 25 0a LDX &0a25 ; enemies_y + 1
&1e95 20 00 15 JSR &1500 ; plot_sprite                              # Plot boot
&1e98 ee 84 08 INC &0884 ; sound_0_pitch
&1e9b ee 84 08 INC &0884 ; sound_0_pitch
&1e9e a9 00    LDA #&00 ; sound_0
&1ea0 20 27 0b JSR &0b27 ; to_play_sound_number_a                   # Play game over sound
&1ea3 a2 0f    LDX #&0f
&1ea5 20 b3 1e JSR &1eb3 ; delay
&1ea8 ee 25 0a INC &0a25 ; enemies_y + 1
&1eab ad 25 0a LDA &0a25 ; enemies_y + 1
&1eae c9 61    CMP #&61
&1eb0 d0 dd    BNE &1e8f ; animate_game_over_boot_loop
&1eb2 60       RTS

; delay
&1eb3 a0 00    LDY #&00
; delay_loop
&1eb5 88       DEY
&1eb6 d0 fd    BNE &1eb5 ; delay_loop
&1eb8 ca       DEX
&1eb9 d0 fa    BNE &1eb5 ; delay_loop
&1ebb 60       RTS

; handle_player_jumping
&1ebc a5 65    LDA &65 ; player_jump_timer
&1ebe f0 14    BEQ &1ed4 ; leave
&1ec0 aa       TAX
&1ec1 ad 24 0a LDA &0a24 ; player_y_in_enemies
&1ec4 18       CLC
&1ec5 7d ee 17 ADC &17ee,X ; jump_parabola_table
&1ec8 8d 24 0a STA &0a24 ; player_y_in_enemies
&1ecb c6 65    DEC &65 ; player_jump_timer
&1ecd d0 05    BNE &1ed4 ; leave
&1ecf 29 fc    AND #&fc
&1ed1 8d 24 0a STA &0a24 ; player_y_in_enemies
; leave
&1ed4 60       RTS

; unused BASIC fragment
&1ed5 36 20 88 32 0d 01 fe 0c 20 50 25 3d 26 42 30 30 ;      ... 6 STEP 2
&1ee5 0d 02 03 0d 20 4f 25 3d 26 35 43 30 30 0d 02 08 ;  510 P%=&B00
&1ef5 05 20 0d 03 e8 0a 5b 4f 50 54 20                ;  515 O%=&5C00
                                                      ;  520
                                                      ; 1000 [OPT

; room_data_address_low_table
&1f00 71 7a bb 07 40 8f c2 1a 72 a7 e2 2d 83 f3 36 7b
&1f10 bb fd 43 85 b6 fa 33 70 a8 da 00 50 a6 db 1a 4e
&1f20 71 a9 ef 3b 80 e5 28 69 99 b9 02 57 aa 0b 3b 6b
&1f30 a2 ca 0e 74 cd 20 5c b3 04 36 70 e0 25

; room_data_address_high_table
&1f3d 10 00 00 01 01 01 01 02 02 02 02 03 03 03 04 04
&1f4d 04 04 05 05 05 05 06 06 06 06 07 07 07 07 08 08
&1f5d 08 08 08 09 09 09 0a 0a 0a 0a 0b 0b 0b 0c 0c 0c
&1f6d 0c 0c 0d 0d 0d 0e 0e 0e 0f 0f 0f 0f 10

; room_data
; room_01_data (Watch Tower)
&1f7a f2 20 98 a1 c9 ef 60 77 3f 62 67 fb 6e aa 81 8c ; items: 4 (1111)
&1f8a f8 cb ae 91 78 a0 cc 4a 62 c6 82 49 26 43 66 99 ; exits: left: &01, right: &01, up: &26, down: &05
&1f9a b9 71 34 ba 4e 96 94 16 1d 0a 56 1c 79 0a 10 21 ; conveyor: right, slope: /, rope: no
&1faa 0a 5d 56 56 6c d8 f4 47 b1 4f 9d 91 89 35 fd 55 ; tiles: &db (2), &dc (3), &88 (3), &df (1), &dd (2), &e0
&1fba 00                                              ; screen colours: 4 5 3 7
                                                      ; title tab 10, text "Watch Tower"
                                                      ;     use WALL
                                                      ;     move to (6,6)
                                                      ;     vertical line, length 4
                                                      ;     horizontal line, length 12
                                                      ;     block, width 13, to y 0
                                                      ;     move to (18,4)
                                                      ;     block, width 19, to y 0
                                                      ;     horizontal line, length 25
                                                      ;     vertical line, length 6
                                                      ;     move to (19,11)
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 11
                                                      ;     use SLOPE
                                                      ;     slope \, length 7
                                                      ;     use DEADLY
                                                      ;     series of 3 tiles at (10,5) (20,5) (24,5)
                                                      ;     use PLATFORM
                                                      ;     series of 5 tiles at (14,2) (15,2) (16,0) (17,0) (17,4)
                                                      ;     use ITEM
                                                      ;     series of 4 tiles at (10,6) (20,6) (24,6) (25,7)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &23 (1) at (15,9), range (11,19), moving l 2
                                                      ;     &24 (2) at (13,6), range (11,31), moving r 2
                                                      ; arrows: no, no

; room_02_data (Nomem Luni)
&1fbb 00 c1 10 95 dc 04 59 18 53 96 97 1e a3 ad 33 c4 ; items: 0
&1fcb 3c 5d ac 38 db da 8d 5b f7 19 24 59 e6 e1 9b 0f ; exits: left: &02, right: &03, up: &02, down: &0a
&1fdb 9f bc 09 35 30 17 fd 50 32 57 b3 ec 35 2d a7 d0 ; conveyor: right, slope: /, rope: no
&1feb a4 5c 9e fc e8 d9 37 25 a0 23 4f 94 20 40 ac 13 ; tiles: &d2 (2), &d3 (1), &94 (3), &31 (1), &34 (2), &41
&1ffb c2 c0 20 b3 c2 a9 ab 8a d6 dc 94 01             ; screen colours: 0 3 4 7
                                                      ; title tab 11, text "Nomem Luni"
                                                      ;     series of 12 tiles at (11,7) (12,7) (13,7) (15,9) (16,4)
                                                      ;                           (18,6) (19,3) (24,7) (27,3) (28,3)
                                                      ;                           (28,9) (29,9)
                                                      ;     use WALL
                                                      ;     move to (12,0)
                                                      ;     block, width 29, to y 1
                                                      ;     move to (31,0)
                                                      ;     vertical line, length 4
                                                      ;     block, width 29, to y 5
                                                      ;     horizontal line, length 26
                                                      ;     move to (23,10)
                                                      ;     block, width 22, to y 9
                                                      ;     block, width 20, to y 2
                                                      ;     block, width 18, to y 9
                                                      ;     series of 4 tiles at (25,3) (30,2) (30,6) (31,6)
                                                      ;     move to (9,0)
                                                      ;     use SLOPE
                                                      ;     slope /, length 4
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &14 (3) at (16,4), range (0,8), moving d 2
                                                      ;     &24 (1) at (4,3), range (0,12), moving l 2
                                                      ;     &26 (2) at (20,3), range (18,23), moving r 2
                                                      ;     &28 (3) at (22,11), range (7,12), moving u 4
                                                      ; arrows: no, no

; room_03_data (On the Roof)
&2007 18 42 60 f8 7b 2b ca 2b c8 ca 89 59 44 39 7b ff ; items: 1 (1)
&2017 8b ce d1 03 07 db 10 8e 1a 8d 71 38 0d 66 cd 8e ; exits: left: &02, right: &04, up: &03, down: &03
&2027 f9 46 56 88 12 a1 44 f1 38 5a 21 46 d9 e0 89 eb ; conveyor: right, slope: \, rope: yes
&2037 74 61 f2 43 bb ae 9d 48 00                      ; tiles: &46 (3), &4e (2), &4d (3), &50 (1), &4f (3), &51
                                                      ; screen colours: 0 1 2 3
                                                      ; title tab 10, text "On the Roof"
                                                      ;     use WALL
                                                      ;     block, width 3, to y 6
                                                      ;     block, width 4, to y 3
                                                      ;     horizontal line, length 10
                                                      ;     block, width 11, to y 1
                                                      ;     horizontal line, length 14
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 22
                                                      ;     use WALL
                                                      ;     horizontal line, length 26
                                                      ;     block, width 27, to y 8
                                                      ;     block, width 31, to y 6
                                                      ;     use DEADLY
                                                      ;     series of 5 tiles at (4,5) (4,4) (5,2) (5,1) (28,7)
                                                      ;     use SLOPE
                                                      ;     series of 5 tiles at (4,6) (5,3) (12,1) (28,8) (29,7)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (25,3)
                                                      ;     done
                                                      ; enemies: 1
                                                      ;     &1b (1) at (21,13), range (13,25), moving l 2
                                                      ; arrows: no, no

; room_04_data (Up on the Battlements)
&2040 18 46 11 44 db 89 48 cb 48 4a 49 5b 84 15 7f 9d ; items: 1 (1)
&2050 bd ff 41 90 b3 26 86 d8 9c 0e 1c 6c e1 23 2d 76 ; exits: left: &03, right: &05, up: &04, down: &04
&2060 a2 a6 4e b7 ec f9 06 1c 58 6a d2 42 15 96 4a b4 ; conveyor: left, slope: \, rope: no
&2070 10 2d 13 53 96 6c 18 d6 5a 22 5d f8 fd a4 a4 41 ; tiles: &4b (2), &4a (3), &49 (2), &4c (1), &4b (3), &44
&2080 ed ac d4 45 ed b2 cc 46 ed b9 9c 4a cc b7 03    ; screen colours: 0 1 2 3
                                                      ; title tab 6, text "Up on the Battlements"
                                                      ;     use WALL
                                                      ;     block, width 3, to y 6
                                                      ;     horizontal line, length 7
                                                      ;     block, width 9, to y 6
                                                      ;     horizontal line, length 13
                                                      ;     block, width 17, to y 5
                                                      ;     horizontal line, length 21
                                                      ;     block, width 23, to y 6
                                                      ;     horizontal line, length 27
                                                      ;     block, width 31, to y 6
                                                      ;     use PLATFORM
                                                      ;     move to (24,1)
                                                      ;     vertical line, length 5
                                                      ;     move to (18,5)
                                                      ;     vertical line, length 1
                                                      ;     move to (10,1)
                                                      ;     vertical line, length 5
                                                      ;     move to (4,5)
                                                      ;     vertical line, length 1
                                                      ;     use SLOPE
                                                      ;     series of 4 tiles at (4,6) (10,6) (18,6) (24,6)
                                                      ;     use CONVEYOR
                                                      ;     move to (13,6)
                                                      ;     horizontal line, length 17
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (31,11)
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &29 (2) at (5,8), range (5,13), moving d 1
                                                      ;     &29 (1) at (11,10), range (5,13), moving d 2
                                                      ;     &29 (3) at (19,6), range (5,13), moving d 4
                                                      ;     &29 (1) at (25,5), range (4,12), moving d 7
                                                      ; arrows: yes (7,0), no

; room_05_data (We must perform a Quirkafleeg)
&208f 18 c1 40 f4 7b 8b 88 4b 4a 88 89 2e 04 35 72 4d ; items: 1 (1)
&209f 49 f9 7a 12 a9 8b e6 82 17 8a 88 0a 50 4d 08 3b ; exits: left: &04, right: &06, up: &01, down: &05
&20af 70 b0 91 6c 38 df 24 00 ca 50 19 5d f8 fd 30 61 ; conveyor: right, slope: \, rope: yes
&20bf 0a 04 12                                        ; tiles: &45 (3), &46 (2), &48 (3), &49 (1), &47 (3), &44
                                                      ; screen colours: 0 1 4 6
                                                      ; title tab 2, text "We must perform a Quirkafleeg"
                                                      ;     use WALL
                                                      ;     block, width 3, to y 6
                                                      ;     use DEADLY
                                                      ;     horizontal line, length 27
                                                      ;     use WALL
                                                      ;     block, width 31, to y 6
                                                      ;     move to (4,0)
                                                      ;     use PLATFORM
                                                      ;     vertical line, length 6
                                                      ;     use SLOPE
                                                      ;     vertical line, length 6
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (31,11)
                                                      ;     done
                                                      ; enemies: 1
                                                      ;     &24 (1) at (6,5), range (0,8), moving l 2
                                                      ; arrows: no, no

; room_06_data (I'm sure I've seen this before)
&20c2 18 c5 31 6c b9 8b 48 cb c8 12 ca 5f 0c 8a 6d 6e ; items: 1 (1)
&20d2 2a 91 3c b1 2b b9 89 10 7b 33 17 e9 42 42 5d 24 ; exits: left: &05, right: &07, up: &06, down: &06
&20e2 07 0e b6 f0 91 16 3b d1 52 a7 5b f6 7c 03 0e 2c ; conveyor: right, slope: \, rope: no
&20f2 35 69 a1 0a 4b 25 5a 88 96 89 29 4b 36 8c 2e fc ; tiles: &4f (3), &21 (1), &4d (3), &4c (1), &4b (2), &44
&2102 7e 5a d2 60 f6 54 ea a2 76 59 66 23 f6 5c 4e a5 ; screen colours: 4 1 2 7
&2112 76 96 10 01 0a 35 b1 04                         ; title tab 1, text "I'm sure I've seen this before"
                                                      ;     use WALL
                                                      ;     block, width 3, to y 6
                                                      ;     horizontal line, length 7
                                                      ;     block, width 9, to y 6
                                                      ;     horizontal line, length 13
                                                      ;     block, width 17, to y 6
                                                      ;     horizontal line, length 21
                                                      ;     block, width 23, to y 6
                                                      ;     horizontal line, length 27
                                                      ;     block, width 31, to y 6
                                                      ;     use PLATFORM
                                                      ;     move to (24,1)
                                                      ;     vertical line, length 5
                                                      ;     move to (18,5)
                                                      ;     vertical line, length 1
                                                      ;     move to (10,1)
                                                      ;     vertical line, length 5
                                                      ;     move to (4,5)
                                                      ;     vertical line, length 1
                                                      ;     use SLOPE
                                                      ;     series of 4 tiles at (4,6) (10,6) (18,6) (24,6)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (31,11)
                                                      ;     done
                                                      ; enemies: 5
                                                      ;     &29 (2) at (5,8), range (6,13), moving d 4
                                                      ;     &29 (1) at (11,10), range (5,13), moving d 2
                                                      ;     &29 (3) at (19,6), range (4,13), moving d 4
                                                      ;     &29 (2) at (25,5), range (5,13), moving d 1
                                                      ;     &24 (2) at (4,4), range (0,10), moving l 2
                                                      ; arrows: yes (9,0), yes (10,2)

; room_07_data (Rescue Esmerelda)
&211a 34 46 64 6c 6a 17 90 e2 ef e6 e5 bb c3 88 24 a1 ; items: 2 (11)
&212a 42 1e 49 86 44 a2 31 38 70 b0 85 8f b6 f8 c9 66 ; exits: left: &06, right: &08, up: &26, down: &0d
&213a 96 0f f8 20 df cf 55 fe ad 77 7d 95 db d2 5c 70 ; conveyor: right, slope: /, rope: no
&214a 18 79 b9 cc ed a7 16 99 39 93 21 28 d5 69 61 21 ; tiles: &3e (3), &3d (1), &bb (3), &3f (2), &4a (2), &40
&215a 76 77 06 5d 5c bb e6 49 49 82 d9 55 69 92 da 65 ; screen colours: 1 4 3 7
&216a 42 14 58 a4 38 10 a0 35                         ; title tab 8, text "Rescue Esmerelda"
                                                      ;     use WALL
                                                      ;     block, width 3, to y 6
                                                      ;     horizontal line, length 7
                                                      ;     block, width 11, to y 6
                                                      ;     horizontal line, length 15
                                                      ;     block, width 19, to y 6
                                                      ;     move to (19,4)
                                                      ;     triangle /, length 0
                                                      ;     move to (30,0)
                                                      ;     horizontal line, length 31
                                                      ;     move to (31,3)
                                                      ;     vertical line, length 10
                                                      ;     move to (31,13)
                                                      ;     vertical line, length 15
                                                      ;     move to (26,15)
                                                      ;     vertical line, length 10
                                                      ;     move to (27,6)
                                                      ;     horizontal line, length 22
                                                      ;     move to (26,0)
                                                      ;     slope /, length 3
                                                      ;     use SLOPE
                                                      ;     move to (29,3)
                                                      ;     vertical line, length 6
                                                      ;     move to (27,7)
                                                      ;     slope /, length 10
                                                      ;     series of 2 tiles at (6,6) (14,6)
                                                      ;     move to (6,1)
                                                      ;     use PLATFORM
                                                      ;     vertical line, length 5
                                                      ;     move to (14,5)
                                                      ;     vertical line, length 1
                                                      ;     vertical line, length 1
                                                      ;     use CONVEYOR
                                                      ;     move to (27,11)
                                                      ;     horizontal line, length 24
                                                      ;     use ITEM
                                                      ;     series of 2 tiles at (26,13) (26,12)
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &29 (2) at (4,8), range (6,13), moving d 2
                                                      ;     &29 (1) at (12,9), range (5,13), moving d 2
                                                      ;     &24 (1) at (4,5), range (0,13), moving l 2
                                                      ;     &11 (3) at (24,1), range (0,2), moving d 2
                                                      ; arrows: no, no

; room_08_data (On top of the house)
&2172 18 27 4e 2e 79 8f 4a 49 76 0f 0f bd 4c 3a 7b b3 ; items: 1 (1)
&2182 f3 d7 d1 fb 2f 77 25 91 03 a3 d5 3c 58 c4 fe 61 ; exits: left: &07, right: &08, up: &39, down: &0e
&2192 01 57 2d e1 12 aa 15 08 ab 48 a3 a7 4c 4d ab 1f ; conveyor: right, slope: /, rope: no
&21a2 ca 59 80 5d 02                                  ; tiles: &c2 (3), &c3 (2), &bb (3), &49 (1), &4a (2), &c5
                                                      ; screen colours: 4 1 5 7
                                                      ; title tab 9, text "On top of the house"
                                                      ;     use WALL
                                                      ;     horizontal line, length 11
                                                      ;     move to (11,3)
                                                      ;     block, width 3, to y 4
                                                      ;     move to (3,7)
                                                      ;     triangle /, length 3
                                                      ;     move to (0,3)
                                                      ;     vertical line, length 10
                                                      ;     series of 3 tiles at (3,10) (8,5) (11,5)
                                                      ;     use PLATFORM
                                                      ;     move to (1,10)
                                                      ;     vertical line, length 2
                                                      ;     move to (12,5)
                                                      ;     slope /, length 10
                                                      ;     move to (18,11)
                                                      ;     use ITEM
                                                      ;     vertical line, length 11
                                                      ;     done
                                                      ; enemies: 1
                                                      ;     &13 (1) at (19,4), range (0,13), moving d 2
                                                      ; arrows: no, no

; room_09_data (Coservatory Roof)
&21a7 f2 24 05 89 e8 76 70 a0 37 a6 bf ef 15 02 b9 44 ; items: 4 (1111)
&21b7 62 05 d9 c5 f1 a2 73 f4 80 85 06 7e cc 2a ca c8 ; exits: left: &09, right: &0a, up: &02, down: &11
&21c7 c2 f9 fe 80 29 17 c8 d2 f6 e1 d5 e9 72 f3 e9 c7 ; conveyor: left, slope: /, rope: no
&21d7 bf 3f a2 53 c7 8f 22 87 86 af 06                ; tiles: &be (1), &bf (3), &8c (2), &bd (3), &c0 (2), &c1
                                                      ; screen colours: 0 2 5 7
                                                      ; title tab 8, text "Coservatory Roof" (sic)
                                                      ;     use PLATFORM
                                                      ;     series of 1 tile at (22,0)
                                                      ;     move to (31,1)
                                                      ;     horizontal line, length 26
                                                      ;     vertical line, length 2
                                                      ;     horizontal line, length 24
                                                      ;     horizontal line, length 26
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 31
                                                      ;     move to (31,8)
                                                      ;     use WALL
                                                      ;     horizontal line, length 20
                                                      ;     slope \, length 0
                                                      ;     use DEADLY
                                                      ;     series of 3 tiles at (27,7) (24,7) (21,7)
                                                      ;     use ITEM
                                                      ;     series of 4 tiles at (22,7) (25,7) (28,7) (31,7)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &0b (2) at (18,11), range (17,31), moving l 2
                                                      ;     &09 (3) at (24,5), range (16,31), moving r 2
                                                      ; arrows: no, no

; room_0a_data (Under the Roof)
&21e2 40 d2 90 84 dc a4 bb 7a e2 3b 3b 2e 26 8b c5 24 ; items: 0
&21f2 de ff a2 73 f4 08 68 10 86 4a 22 7c 5d b0 64 8d ; exits: left: &09, right: &0b, up: &02, down: &12
&2202 81 32 17 e8 32 44 f5 37 60 70 80 06 c6 8a 26 71 ; conveyor: left, slope: /, rope: no
&2212 3e d1 7c f2 b4 cd 75 6d 86 71 e3 97 c3 cd 2b 53 ; tiles: &b8 (2), &b9 (1), &8f (3), &bc (1), &ba (2), &4b
&2222 e7 51 44 12 30 34 1b d2 64 95 4c                ; screen colours: 4 1 2 7
                                                      ; title tab 9, text "Under the Roof"
                                                      ;     move to (0,2)
                                                      ;     block, width 2, to y 1
                                                      ;     horizontal line, length 5
                                                      ;     move to (4,8)
                                                      ;     horizontal line, length 7
                                                      ;     series of 8 tiles at (8,3) (9,3) (11,1) (16,2) (19,3) (20,0)
                                                      ;                           (23,4) (24,4)
                                                      ;     move to (10,15)
                                                      ;     slope \, length 8
                                                      ;     use WALL
                                                      ;     horizontal line, length 3
                                                      ;     horizontal line, length 0
                                                      ;     move to (12,0)
                                                      ;     block, width 13, to y 4
                                                      ;     move to (12,9)
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 31
                                                      ;     use DEADLY
                                                      ;     move to (12,15)
                                                      ;     horizontal line, length 19
                                                      ;     block, width 22, to y 13
                                                      ;     horizontal line, length 29
                                                      ;     move to (26,13)
                                                      ;     horizontal line, length 24
                                                      ;     move to (17,13)
                                                      ;     horizontal line, length 15
                                                      ;     series of 4 tiles at (16,14) (25,14) (20,12) (21,12)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &22 (3) at (4,9), range (0,6), moving l 2
                                                      ;     &0d (2) at (16,9), range (12,19), moving r 2
                                                      ; arrows: no, yes (3,1)

; room_0b_data (The Attic)
&222d 40 31 b4 8c dc a5 5b db 24 5a 9a 2d a2 fe 03 39 ; items: 0
&223d 0b 74 f2 05 19 bb 85 10 31 52 e4 c9 b3 17 ad da ; exits: left: &0a, right: &0c, up: &0b, down: &13
&224d f8 fb 73 b8 4e 52 27 05 01 06 3c 14 78 20 c0 81 ; conveyor: left, slope: /, rope: no
&225d 41 56 38 1a 0c 48 4a 17 76 7b c6 33 1e 07 d7 2b ; tiles: &b3 (3), &b4 (1), &48 (3), &b6 (1), &b5 (2), &4b
&226d 9e 26 d7 4b 9e 17 d7 6b 5e 36 d7 29 5e 17 d7 49 ; screen colours: 0 1 2 3
&227d c1 26 d7 e9 92 26                               ; title tab 10, text "The Attic"
                                                      ;     horizontal line, length 31
                                                      ;     move to (0,9)
                                                      ;     horizontal line, length 13
                                                      ;     series of 11 tiles at (2,1) (2,3) (2,5) (2,7) (18,7) (19,7)
                                                      ;                           (20,5) (21,5) (22,3) (31,7) (30,7)
                                                      ;     use WALL
                                                      ;     series of 8 tiles at (4,9) (11,9) (5,0) (8,0) (12,0) (15,0)
                                                      ;                           (20,0) (30,0)
                                                      ;     move to (0,1)
                                                      ;     block, width 1, to y 8
                                                      ;     use DEADLY
                                                      ;     series of 5 tiles at (7,1) (12,1) (16,1) (4,10) (11,10)
                                                      ;     use CONVEYOR
                                                      ;     move to (27,7)
                                                      ;     horizontal line, length 24
                                                      ;     done
                                                      ; enemies: 6
                                                      ;     &0f (2) at (3,8), range (7,11), moving d 2
                                                      ;     &0f (1) at (5,9), range (7,11), moving d 2
                                                      ;     &0f (3) at (7,10), range (7,11), moving d 2
                                                      ;     &0f (2) at (9,11), range (7,11), moving u 2
                                                      ;     &0f (1) at (11,10), range (7,11), moving u 2
                                                      ;     &10 (3) at (13,9), range (7,11), moving u 2
                                                      ; arrows: yes (4,4), yes (6,2)

; room_0c_data (Dr Jones will never believe this)
&2283 98 66 51 46 f7 36 d5 37 36 d4 d5 5e 04 e0 f8 a4 ; items: 1 (1)
&2293 b3 24 dd 26 b4 be 96 54 12 2f 24 5a 90 4a 6e e6 ; exits: left: &0b, right: &0d, up: &05, down: &0c
&22a3 22 1d 9c 0f 64 31 dc 47 b2 b6 c7 57 e2 a4 d2 63 ; conveyor: left, slope: \, rope: no
&22b3 f1 3e 70 e8 48 09 53 91 a8 d0 8a 35 1b 5e bd fb ; tiles: &ad (1), &ae (3), &b0 (3), &b1 (2), &af (3), &b2
&22c3 8c 98 ab e8 52 e5 41 97 a1 02 c3 cb 86 a9 2c c3 ; screen colours: 0 1 2 7
&22d3 47 55 4c 49 cd f8 4d 34 60 e5 44 9b 1c 47 c9 12 ; title tab 0, text "Dr Jones will never believe this"
&22e3 2b 53 66 e9 42 8e 47 4a 2a 61 93 85 1a 6e 4a 00 ;     use CONVEYOR
                                                      ;     horizontal line, length 31
                                                      ;     use PLATFORM
                                                      ;     move to (6,8)
                                                      ;     block, width 7, to y 7
                                                      ;     block, width 9, to y 3
                                                      ;     move to (13,11)
                                                      ;     block, width 15, to y 10
                                                      ;     horizontal line, length 17
                                                      ;     block, width 18, to y 10
                                                      ;     move to (15,1)
                                                      ;     vertical line, length 3
                                                      ;     series of 16 tiles at (0,7) (1,7) (2,5) (4,3) (5,4) (9,1)
                                                      ;                           (10,1) (13,4) (13,6) (13,8) (15,5)
                                                      ;                           (15,7) (15,9) (17,1) (19,10) (20,5)
                                                      ;     series of 3 tiles at (21,3) (24,2) (29,3)
                                                      ;     use WALL
                                                      ;     move to (8,1)
                                                      ;     horizontal line, length 7
                                                      ;     vertical line, length 6
                                                      ;     block, width 6, to y 5
                                                      ;     move to (6,9)
                                                      ;     horizontal line, length 7
                                                      ;     block, width 10, to y 10
                                                      ;     horizontal line, length 12
                                                      ;     vertical line, length 4
                                                      ;     vertical line, length 12
                                                      ;     block, width 15, to y 13
                                                      ;     horizontal line, length 17
                                                      ;     move to (16,1)
                                                      ;     vertical line, length 9
                                                      ;     block, width 17, to y 6
                                                      ;     block, width 19, to y 8
                                                      ;     slope /, length 5
                                                      ;     use DEADLY
                                                      ;     series of 3 tiles at (6,10) (12,10) (12,13)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (19,8)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &14 (1) at (18,10), range (8,13), moving u 2
                                                      ;     &28 (2) at (10,12), range (7,12), moving u 4
                                                      ; arrows: no, no

; room_0d_data (Emergency Generator)
&22f3 c0 70 28 8b 35 09 aa 6a 80 2b 2b 4e c7 89 21 91 ; items: 0
&2303 11 8b c6 63 c4 92 08 b2 8b 07 86 cc e6 7c 7f e5 ; exits: left: &0c, right: &0e, up: &05, down: &0d
&2313 f9 7f de 4a 65 84 e2 74 38 4b fd 48 2a 65 05 86 ; conveyor: left, slope: /, rope: no
&2323 9b b3 66 d8 55 ba ca 45 90 a5 44 9d 86 3c d4 39 ; tiles: &a8 (1), &a9 (2), &03 (1), &ac (1), &aa (3), &20
&2333 d3 8f 02                                        ; screen colours: 4 3 1 7
                                                      ; title tab 7, text "Emergency Generator"
                                                      ;     use WALL
                                                      ;     horizontal line, length 4
                                                      ;     block, width 27, to y 3
                                                      ;     horizontal line, length 31
                                                      ;     move to (31,10)
                                                      ;     horizontal line, length 30
                                                      ;     move to (31,15)
                                                      ;     block, width 30, to y 13
                                                      ;     move to (5,4)
                                                      ;     block, width 8, to y 5
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 23
                                                      ;     use WALL
                                                      ;     block, width 26, to y 5
                                                      ;     move to (31,1)
                                                      ;     use DEADLY
                                                      ;     vertical line, length 9
                                                      ;     move to (6,10)
                                                      ;     use PLATFORM
                                                      ;     block, width 7, to y 6
                                                      ;     move to (25,10)
                                                      ;     block, width 24, to y 6
                                                      ;     slope \, length 5
                                                      ;     use ITEM
                                                      ;     series of 6 tiles at (7,4) (8,2) (13,2) (18,2) (23,2) (24,4)
                                                      ;     done
                                                      ; enemies: 1
                                                      ;     &17 (2) at (7,3), range (5,31), moving l 2
                                                      ; arrows: no, no

; room_0e_data (Priests' Hole)
&2336 98 e5 38 2d 79 97 4b 49 4a 94 95 7a 42 fa 28 48 ; items: 1 (1)
&2346 ca 69 3f ee 34 39 70 60 a9 60 34 ab 7e b4 09 7e ; exits: left: &0d, right: &0e, up: &0e, down: &16
&2356 e0 82 6d 0e 04 b1 e2 10 8e 4b b2 60 59 a2 50 e1 ; conveyor: right, slope: /, rope: no
&2366 a2 0b 72 9f f8 c4 81 89 06 cc 81 89 86 34 91 8b ; tiles: &a5 (3), &a6 (2), &48 (3), &49 (1), &4a (2), &a7
&2376 26 b5 c4 40 02                                  ; screen colours: 0 2 6 3
                                                      ; title tab 9, text "Priests' Hole"
                                                      ;     use WALL
                                                      ;     block, width 1, to y 10
                                                      ;     move to (10,0)
                                                      ;     block, width 11, to y 3
                                                      ;     move to (10,15)
                                                      ;     block, width 11, to y 6
                                                      ;     move to (0,15)
                                                      ;     block, width 1, to y 13
                                                      ;     use PLATFORM
                                                      ;     series of 12 tiles at (7,0) (4,1) (3,5) (3,8) (8,7) (3,10)
                                                      ;                           (9,3) (8,3) (9,10) (8,10) (2,10) (3,10)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (9,13)
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &1f (1) at (4,7), range (0,12), moving u 1
                                                      ;     &20 (1) at (6,7), range (0,12), moving u 1
                                                      ;     &21 (1) at (5,9), range (2,14), moving u 1
                                                      ;     &24 (1) at (21,10), range (8,24), moving l 2
                                                      ; arrows: no, no

; room_0f_data (Above the West Bedroom)
&237b 98 17 78 3d fb 7d bc 4b 86 6c be 5d 04 03 e8 2a ; items: 1 (1)
&238b b9 ff 35 92 f2 83 04 47 e7 cc 71 43 8a 3f 33 4b ; exits: left: &0f, right: &10, up: &0f, down: &17
&239b f2 53 16 25 28 72 e4 45 68 c0 89 40 56 13 65 ae ; conveyor: right, slope: /, rope: no
&23ab da ac fb 08 ba d0 ed 91 e9 01 98 69 a9 0d da 3e ; tiles: &f6 (2), &d9 (3), &84 (3), &49 (1), &f7 (3), &f8
                                                      ; screen colours: 0 1 2 7
                                                      ; title tab 3, text "Above the West Bedroom"
                                                      ;     move to (27,0)
                                                      ;     horizontal line, length 20
                                                      ;     move to (31,9)
                                                      ;     horizontal line, length 25
                                                      ;     vertical line, length 4
                                                      ;     horizontal line, length 31
                                                      ;     horizontal line, length 20
                                                      ;     series of 2 tiles at (9,0) (10,2)
                                                      ;     move to (24,9)
                                                      ;     slope \, length 1
                                                      ;     use WALL
                                                      ;     move to (16,1)
                                                      ;     block, width 17, to y 0
                                                      ;     use DEADLY
                                                      ;     series of 6 tiles at (18,2) (19,3) (21,5) (22,6) (23,7) (24,8)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (23,6)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &19 (1) at (15,0), range (0,12), moving d 1
                                                      ;     &29 (3) at (11,6), range (1,13), moving u 7
                                                      ; arrows: no, no

; room_10_data (West Wing Roof)
&23bb f2 bc 28 18 c9 f3 f5 59 12 f8 e9 d1 2a b2 91 94 ; items: 4 (1111)
&23cb 5f 13 96 bd e8 1c 3d 82 0c 29 cf 97 41 ce e1 55 ; exits: left: &0f, right: &11, up: &10, down: &18
&23db 20 50 10 60 fa f0 00 4a 60 68 92 15 19 36 52 b4 ; conveyor: right, slope: /, rope: no
&23eb d8 41 97 99 4a cc b4 e5 91 96 97 77 54 52 5a 3f ; tiles: &f1 (1), &f2 (2), &03 (3), &49 (1), &f3 (2), &f5
&23fb b4 45                                           ; screen colours: 0 5 2 3
                                                      ; title tab 9, text "West Wing Roof"
                                                      ;     move to (0,9)
                                                      ;     horizontal line, length 4
                                                      ;     vertical line, length 7
                                                      ;     horizontal line, length 31
                                                      ;     move to (6,0)
                                                      ;     horizontal line, length 28
                                                      ;     slope /, length 3
                                                      ;     series of 6 tiles at (0,4) (1,4) (2,0) (3,2) (31,0) (30,0)
                                                      ;     use WALL
                                                      ;     move to (4,0)
                                                      ;     block, width 5, to y 9
                                                      ;     use DEADLY
                                                      ;     series of 5 tiles at (9,8) (13,8) (18,8) (22,8) (27,8)
                                                      ;     use ITEM
                                                      ;     series of 4 tiles at (6,5) (9,1) (19,2) (27,4)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &16 (2) at (19,13), range (7,23), moving l 2
                                                      ;     &24 (3) at (20,11), range (11,30), moving l 2
                                                      ; arrows: no, yes (10,1)

; room_11_data (Orangery)
&23fd 7c 41 22 4d d4 56 22 50 1c 51 90 7f 11 e3 22 b0 ; items: 3 (111)
&240d 8c c4 71 60 78 68 a9 c0 03 81 4b f3 4b 72 f6 99 ; exits: left: &10, right: &12, up: &09, down: &19
&241d 70 d1 64 d4 79 90 50 d9 0a b6 9c 3c eb a4 87 00 ; conveyor: left, slope: /, rope: no
&242d 63 fd 8a 73 04 74 9e 2e 31 0a 79 ee 91 22 8b bb ; tiles: &9f (2), &a0 (1), &88 (3), &a3 (2), &40 (2), &a4
&243d 24 51 14 98 b3 4e                               ; screen colours: 0 1 2 7
                                                      ; title tab 12, text "Orangery"
                                                      ;     use WALL
                                                      ;     horizontal line, length 7
                                                      ;     horizontal line, length 5
                                                      ;     vertical line, length 5
                                                      ;     move to (0,7)
                                                      ;     horizontal line, length 1
                                                      ;     use PLATFORM
                                                      ;     move to (26,5)
                                                      ;     horizontal line, length 31
                                                      ;     vertical line, length 4
                                                      ;     horizontal line, length 28
                                                      ;     series of 16 tiles at (6,4) (7,4) (11,2) (12,5) (14,7) (16,4)
                                                      ;                           (16,10) (19,6) (20,1) (22,9) (25,3)
                                                      ;                           (25,10) (28,9) (15,0) (16,0) (24,13)
                                                      ;     move to (31,5)
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 28
                                                      ;     move to (0,2)
                                                      ;     slope /, length 15
                                                      ;     use ITEM
                                                      ;     series of 3 tiles at (6,2) (16,9) (28,14)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &14 (1) at (9,10), range (7,14), moving u 2
                                                      ;     &08 (3) at (20,5), range (0,12), moving d 4
                                                      ; arrows: no, yes (7,1)

; room_12_data (A bit of tree)
&2443 20 ca 94 15 cd 04 73 f9 f3 72 b2 2d 42 c0 85 22 ; items: 0
&2453 5f 47 6f 8e 84 1c a8 85 31 4f fc 50 0f 04 1a 6a ; exits: left: &11, right: &13, up: &0a, down: &1a
&2463 d0 b8 7d 07 1a 94 49 93 21 9b 25 cd 44 99 4a f7 ; conveyor: right, slope: /, rope: no
&2473 1c 39 78 d8 16 8b 1d 7f 94 20 02 1a 8d 72 a7 7a ; tiles: &9b (2), &9c (1), &9e (2), &3f (1), &9d (1), &41
&2483 d9 00                                           ; screen colours: 0 1 2 3
                                                      ; title tab 4, text "A bit of tree"
                                                      ;     use WALL
                                                      ;     move to (13,0)
                                                      ;     block, width 12, to y 15
                                                      ;     use DEADLY
                                                      ;     move to (31,0)
                                                      ;     vertical line, length 15
                                                      ;     use PLATFORM
                                                      ;     move to (0,5)
                                                      ;     horizontal line, length 5
                                                      ;     move to (16,5)
                                                      ;     horizontal line, length 14
                                                      ;     series of 16 tiles at (14,0) (11,0) (10,6) (9,6) (9,8) (9,11)
                                                      ;                           (6,9) (5,9) (18,2) (19,2) (20,11) (23,9)
                                                      ;                           (24,9) (24,3) (24,6) (27,4)
                                                      ;     move to (20,6)
                                                      ;     slope /, length 7
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &24 (3) at (2,2), range (0,11), moving l 2
                                                      ;     &05 (1) at (7,7), range (5,11), moving d 2
                                                      ; arrows: yes (6,0), no

; room_13_data (Master Bedroom)
&2485 20 29 b2 ac cb 32 32 b2 88 d3 d3 be 22 0d 48 99 ; items: 0
&2495 c4 07 09 8e ce 99 03 27 a1 ff e3 c7 69 c0 40 00 ; exits: left: &12, right: &14, up: &13, down: &13
&24a5 7e 48 36 e3 a5 40 2c e5 20 b2 80 e4 21 ec 1a 00 ; conveyor: left, slope: \, rope: no
&24b5 30                                              ; tiles: &96 (2), &97 (1), &23 (2), &9a (2), &98 (3), &98
                                                      ; screen colours: 0 5 6 7
                                                      ; title tab 9, text "Master Bedroom"
                                                      ;     use WALL
                                                      ;     block, width 18, to y 1
                                                      ;     move to (31,15)
                                                      ;     horizontal line, length 15
                                                      ;     block, width 14, to y 5
                                                      ;     horizontal line, length 0
                                                      ;     block, width 1, to y 0
                                                      ;     use PLATFORM
                                                      ;     move to (31,0)
                                                      ;     horizontal line, length 19
                                                      ;     move to (19,1)
                                                      ;     slope \, length 2
                                                      ;     horizontal line, length 1
                                                      ;     use CONVEYOR
                                                      ;     move to (5,3)
                                                      ;     horizontal line, length 2
                                                      ;     use DEADLY
                                                      ;     series of 1 tile at (2,4)
                                                      ;     done
                                                      ; enemies: 1
                                                      ;     &03 (3) at (14,11), range (0,0), moving l 0
                                                      ; arrows: no, no

; room_14_data (Top Landing)
&24b6 58 56 19 27 b0 a5 0a f0 a3 24 27 dd 45 65 e7 9f ; items: 1 (1)
&24c6 06 16 0b cb 0e 14 fc 40 9e 7b f3 d7 5f f3 38 fd ; exits: left: &13, right: &15, up: &0c, down: &1c
&24d6 0a 10 40 b2 0d f2 45 9c 20 f2 24 51 a7 13 19 0e ; conveyor: right, slope: /, rope: no
&24e6 df 98 b1 4b 17 90 3d a6 d8 20 bb 86 0c 21 31 65 ; tiles: &92 (2), &93 (1), &14 (3), &3f (0), &40 (0), &95
&24f6 fd aa af 02                                     ; screen colours: 0 5 3 7
                                                      ; title tab 10, text "Top Landing"
                                                      ;     use WALL
                                                      ;     move to (0,15)
                                                      ;     block, width 1, to y 3
                                                      ;     block, width 29, to y 14
                                                      ;     block, width 31, to y 13
                                                      ;     move to (31,10)
                                                      ;     block, width 30, to y 3
                                                      ;     horizontal line, length 23
                                                      ;     slope \, length 4
                                                      ;     use PLATFORM
                                                      ;     move to (0,0)
                                                      ;     horizontal line, length 19
                                                      ;     move to (22,0)
                                                      ;     horizontal line, length 31
                                                      ;     move to (2,3)
                                                      ;     horizontal line, length 16
                                                      ;     move to (2,7)
                                                      ;     horizontal line, length 18
                                                      ;     move to (2,11)
                                                      ;     horizontal line, length 23
                                                      ;     use DEADLY
                                                      ;     move to (6,1)
                                                      ;     block, width 7, to y 13
                                                      ;     horizontal line, length 12
                                                      ;     block, width 13, to y 13
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (2,6)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &0a (3) at (6,12), range (2,13), moving d 2
                                                      ;     &02 (1) at (12,2), range (2,8), moving d 1
                                                      ;     &0d (2) at (15,13), range (10,31), moving r 2
                                                      ; arrows: no, no

; room_15_data (The Bathroom)
&24fa 58 51 55 15 7d 26 0a 24 00 c7 c5 7e 44 fd 07 41 ; items: 1 (1)
&250a e6 d1 39 73 f2 ab 12 b5 15 20 a3 08 e8 87 79 2f ; exits: left: &14, right: &15, up: &15, down: &15
&251a f8 81 2b c8 62 23 57 1a ea 32 b6 60 3a 5d e8 f4 ; conveyor: left, slope: /, rope: no
&252a 08 39 0b 00 d8 f1 0c 2e 0a                      ; tiles: &8d (1), &8e (2), &03 (3), &90 (3), &40 (2), &91
                                                      ; screen colours: 0 1 6 7
                                                      ; title tab 10, text "The Bathroom"
                                                      ;     horizontal line, length 31
                                                      ;     vertical line, length 10
                                                      ;     horizontal line, length 17
                                                      ;     move to (13,10)
                                                      ;     horizontal line, length 0
                                                      ;     move to (6,2)
                                                      ;     horizontal line, length 8
                                                      ;     use WALL
                                                      ;     move to (31,0)
                                                      ;     block, width 30, to y 15
                                                      ;     move to (0,15)
                                                      ;     block, width 1, to y 13
                                                      ;     move to (0,9)
                                                      ;     vertical line, length 3
                                                      ;     move to (17,3)
                                                      ;     vertical line, length 9
                                                      ;     move to (16,10)
                                                      ;     slope \, length 3
                                                      ;     use CONVEYOR
                                                      ;     move to (20,1)
                                                      ;     horizontal line, length 23
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (23,2)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &04 (3) at (28,13), range (0,0), moving l 0
                                                      ;     &1c (2) at (15,3), range (0,29), moving l 2
                                                      ; arrows: no, no

; room_16_data (Halfway up the East Wall)
&2533 a0 6a 9c 37 5c a5 a5 24 89 a3 a3 ee 01 38 d0 b4 ; items: 0
&2543 81 71 8b bf ff 11 90 f2 6b 40 eb 03 07 be cc 47 ; exits: left: &15, right: &16, up: &0e, down: &1e
&2553 da 68 50 fd e8 95 ed a7 94 f5 09 b0 2a 81 11 12 ; conveyor: right, slope: \, rope: no
&2563 aa c4 69 91 45 d8 b0 1e d2 d4 90 40 01          ; tiles: &8a (1), &8b (1), &23 (3), &49 (1), &4a (0), &4b
                                                      ; screen colours: 0 6 3 7
                                                      ; title tab 0, text "Halfway up the East Wall"
                                                      ;     use WALL
                                                      ;     block, width 1, to y 15
                                                      ;     move to (6,7)
                                                      ;     block, width 9, to y 6
                                                      ;     block, width 11, to y 0
                                                      ;     move to (10,15)
                                                      ;     block, width 11, to y 13
                                                      ;     move to (6,13)
                                                      ;     triangle /, length 10
                                                      ;     move to (9,10)
                                                      ;     triangle /, length 8
                                                      ;     use PLATFORM
                                                      ;     series of 6 tiles at (9,0) (6,2) (2,4) (5,5) (4,7) (5,10)
                                                      ;     use DEADLY
                                                      ;     series of 2 tiles at (1,11) (1,10)
                                                      ;     done
                                                      ; enemies: 1
                                                      ;     &0b (2) at (5,6), range (2,8), moving l 2
                                                      ; arrows: no, no

; room_17_data (West Bedroom)
&2570 a0 1b bc 8f bc 05 05 1e f8 ee ef 3c 42 1a 49 f9 ; items: 0
&2580 41 82 a3 73 e6 40 23 4d 80 a8 12 c3 4f 0c b0 2a ; exits: left: &17, right: &18, up: &0f, down: &1f
&2590 55 b9 6a b9 ea 6d fa 39 3a a5 de 3f 39 38 eb 11 ; conveyor: left, slope: /, rope: no
&25a0 a5 05 a8 94 e9 18 a8 29                         ; tiles: &ee (3), &ef (2), &3e (3), &f0 (1), &40 (2), &41
                                                      ; screen colours: 0 1 6 3
                                                      ; title tab 4, text "West Bedroom"
                                                      ;     use WALL
                                                      ;     move to (17,2)
                                                      ;     block, width 16, to y 0
                                                      ;     horizontal line, length 10
                                                      ;     vertical line, length 4
                                                      ;     move to (16,15)
                                                      ;     block, width 17, to y 8
                                                      ;     use PLATFORM
                                                      ;     series of 6 tiles at (9,5) (10,7) (10,11) (9,13) (10,15)
                                                      ;                           (13,9)
                                                      ;     move to (31,3)
                                                      ;     horizontal line, length 11
                                                      ;     horizontal line, length 20
                                                      ;     vertical line, length 15
                                                      ;     move to (31,12)
                                                      ;     horizontal line, length 28
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 26
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &0a (2) at (11,4), range (0,10), moving u 2
                                                      ;     &19 (1) at (14,3), range (0,10), moving d 1
                                                      ; arrows: no, no

; room_18_data (West Wing)
&25a8 a0 9b 42 90 dc 04 05 f8 f1 6e 6f 1c a1 1b 49 f9 ; items: 0
&25b8 35 61 d9 81 92 1f 5a 06 f8 f0 7c 00 29 5a 0e 10 ; exits: left: &17, right: &19, up: &10, down: &20
&25c8 4c b0 ff af 3c 96 88 01 00 c6 9d 02 77 4a 44 01 ; conveyor: right, slope: /, rope: no
&25d8 83 06                                           ; tiles: &ec (2), &ed (1), &1e (3), &3f (1), &40 (2), &41
                                                      ; screen colours: 0 2 4 3
                                                      ; title tab 11, text "West Wing"
                                                      ;     use WALL
                                                      ;     move to (4,15)
                                                      ;     block, width 5, to y 10
                                                      ;     move to (16,0)
                                                      ;     triangle /, length 3
                                                      ;     block, width 31, to y 0
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 20
                                                      ;     move to (13,3)
                                                      ;     horizontal line, length 0
                                                      ;     move to (0,12)
                                                      ;     horizontal line, length 3
                                                      ;     move to (31,15)
                                                      ;     slope \, length 4
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &12 (3) at (4,6), range (0,0), moving l 0
                                                      ;     &07 (2) at (14,5), range (0,14), moving d 4
                                                      ;     &24 (3) at (8,10), range (0,12), moving l 2
                                                      ; arrows: no, no

; room_19_data (Swimming Pool)
&25da 60 58 a2 d9 cc a4 a5 24 ab c3 c3 3c a2 52 13 c6 ; items: 0
&25ea 08 cb 9e 77 4e 9f f9 0c e7 b0 87 bf 90 13 30 98 ; exits: left: &18, right: &1a, up: &11, down: &19
&25fa 1f aa 7a a9 43 03                               ; conveyor: right, slope: /, rope: yes
                                                      ; tiles: &86 (2), &87 (1), &ab (2), &49 (1), &4a (2), &4b
                                                      ; screen colours: 0 1 6 3
                                                      ; title tab 10, text "Swimming Pool"
                                                      ;     block, width 31, to y 3
                                                      ;     use WALL
                                                      ;     block, width 28, to y 3
                                                      ;     move to (28,3)
                                                      ;     triangle \, length 0
                                                      ;     horizontal line, length 28
                                                      ;     horizontal line, length 0
                                                      ;     block, width 3, to y 3
                                                      ;     done
                                                      ; enemies: 1
                                                      ;     &15 (3) at (11,13), range (5,14), moving l 2
                                                      ; arrows: no, no

; room_1a_data (The Banyan Tree)
&2600 d8 b4 a5 28 b9 85 4a 49 02 07 05 3e 84 ff 07 81 ; items: 1 (1)
&2610 1d c0 be 1c 09 39 70 18 17 67 cd 87 a4 52 bd 15 ; exits: left: &19, right: &1b, up: &12, down: &22
&2620 6b bc 58 a9 c5 32 2d d6 5e 7d 4c 95 ba af 00 05 ; conveyor: right, slope: /, rope: no
&2630 64 cc 64 ed 7e 3a 31 be d2 54 15 74 41 e0 13 ad ; tiles: &81 (2), &82 (1), &03 (3), &49 (1), &4a (2), &85
&2640 55 fe 68 42 39 53 33 cc 3a 55 49 34 14 55 71 00 ; screen colours: 0 1 4 7
                                                      ; title tab 7, text "The Banyan Tree"
                                                      ;     use WALL
                                                      ;     block, width 6, to y 3
                                                      ;     vertical line, length 3
                                                      ;     horizontal line, length 26
                                                      ;     block, width 31, to y 0
                                                      ;     horizontal line, length 18
                                                      ;     vertical line, length 5
                                                      ;     move to (15,6)
                                                      ;     vertical line, length 3
                                                      ;     move to (12,7)
                                                      ;     vertical line, length 3
                                                      ;     move to (9,5)
                                                      ;     vertical line, length 3
                                                      ;     move to (6,5)
                                                      ;     vertical line, length 3
                                                      ;     move to (13,14)
                                                      ;     vertical line, length 15
                                                      ;     horizontal line, length 12
                                                      ;     vertical line, length 10
                                                      ;     move to (11,11)
                                                      ;     slope \, length 4
                                                      ;     use PLATFORM
                                                      ;     move to (8,0)
                                                      ;     horizontal line, length 24
                                                      ;     block, width 25, to y 3
                                                      ;     move to (13,13)
                                                      ;     triangle /, length 11
                                                      ;     horizontal line, length 17
                                                      ;     horizontal line, length 15
                                                      ;     vertical line, length 9
                                                      ;     move to (18,10)
                                                      ;     vertical line, length 8
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (8,1)
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &16 (3) at (22,10), range (19,31), moving l 2
                                                      ;     &08 (2) at (10,7), range (6,10), moving d 1
                                                      ;     &06 (1) at (13,7), range (5,10), moving u 2
                                                      ;     &05 (3) at (16,10), range (5,10), moving u 1
                                                      ; arrows: no, no

; room_1b_data (The Nightmare Room)
&2650 d8 72 ec 58 f5 dd 4a f9 13 fb fa 58 84 ff 67 05 ; items: 1 (1)
&2660 e3 d9 80 48 5e 74 ce 1c 98 1f 59 f8 e5 01 e0 ff ; exits: left: &1a, right: &1c, up: &1b, down: &23
&2670 79 0c 76 79 28 51 ae ca b2 35 9b a1 b2 e6 68 d2 ; conveyor: left, slope: \, rope: no
&2680 bc d5 52 bc b0 83 2e 2c 7b ae 0b 06 3a 09 6b 04 ; tiles: &7c (2), &7d (3), &23 (3), &7f (2), &4a (2), &ed
&2690 76 06 ba 02 f6 0c 47 83 a6 0b 17 02 36 05 9f 04 ; screen colours: 0 1 2 3
&26a0 f6 08 77 04 76 0e                               ; title tab 7, text "The Nightmare Room"
                                                      ;     use WALL
                                                      ;     horizontal line, length 31
                                                      ;     horizontal line, length 9
                                                      ;     vertical line, length 1
                                                      ;     triangle \, length 3
                                                      ;     block, width 0, to y 0
                                                      ;     move to (31,15)
                                                      ;     block, width 30, to y 3
                                                      ;     use PLATFORM
                                                      ;     series of 14 tiles at (7,8) (10,4) (10,7) (10,10) (13,3)
                                                      ;                           (13,6) (13,9) (16,10) (19,5) (19,8)
                                                      ;                           (22,4) (22,7) (22,10) (26,5)
                                                      ;     use CONVEYOR
                                                      ;     series of 1 tile at (27,8)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (26,6)
                                                      ;     done
                                                      ; enemies: 7
                                                      ;     &17 (1) at (8,3), range (0,11), moving u 2
                                                      ;     &03 (2) at (11,1), range (0,13), moving d 1
                                                      ;     &01 (3) at (14,10), range (0,13), moving d 4
                                                      ;     &03 (1) at (17,6), range (1,12), moving u 7
                                                      ;     &03 (2) at (20,2), range (0,13), moving u 2
                                                      ;     &03 (1) at (28,9), range (0,13), moving d 4
                                                      ;     &03 (3) at (23,1), range (0,13), moving d 1
                                                      ; arrows: no, no

; room_1c_data (First Landing)
&26a6 60 bb 4a 92 3d bd bc 24 f1 3c 3d 1e 21 a8 88 29 ; items: 0
&26b6 3f 0d 2c 16 96 1d 28 e0 81 ef f8 99 e2 87 19 08 ; exits: left: &1b, right: &1d, up: &14, down: &24
&26c6 96 1f 1e 5c 38 30 d5 fe 17 89 77 2a 16 5f 9f 7e ; conveyor: right, slope: /, rope: no
&26d6 a8 ce 19 5f 09                                  ; tiles: &78 (1), &79 (2), &1e (3), &49 (1), &7a (3), &7a
                                                      ; screen colours: 0 2 4 7
                                                      ; title tab 8, text "First Landing"
                                                      ;     use WALL
                                                      ;     move to (0,3)
                                                      ;     block, width 1, to y 15
                                                      ;     move to (24,15)
                                                      ;     block, width 25, to y 4
                                                      ;     move to (31,0)
                                                      ;     block, width 24, to y 1
                                                      ;     use PLATFORM
                                                      ;     series of 4 tiles at (30,1) (28,1) (26,1) (24,1)
                                                      ;     horizontal line, length 21
                                                      ;     move to (23,15)
                                                      ;     slope \, length 1
                                                      ;     use DEADLY
                                                      ;     move to (29,12)
                                                      ;     vertical line, length 8
                                                      ;     series of 2 tiles at (30,11) (28,11)
                                                      ;     done
                                                      ; enemies: 1
                                                      ;     &15 (1) at (25,12), range (24,31), moving r 2
                                                      ; arrows: no, no

; room_1d_data (The Chapel)
&26db d8 71 dd 14 b9 b9 4b 49 02 bb 38 5f 44 ff 87 38 ; items: 1 (1)
&26eb f0 44 1f 38 13 3d 30 17 e7 bf 91 8e 24 7f a2 04 ; exits: left: &1c, right: &1d, up: &1d, down: &25
&26fb 78 a9 82 2e dc 7c 86 b3 60 3a a5 9a 01 01 89 c5 ; conveyor: left, slope: /, rope: no
&270b a0 2a ee 4f 03 66 16 6c 03 66 16 ae 40 6e 06    ; tiles: &73 (2), &74 (1), &03 (3), &49 (1), &4a (2), &77
                                                      ; screen colours: 0 1 2 7
                                                      ; title tab 11, text "The Chapel"
                                                      ;     use WALL
                                                      ;     block, width 25, to y 1
                                                      ;     move to (28,0)
                                                      ;     block, width 29, to y 1
                                                      ;     block, width 31, to y 15
                                                      ;     move to (17,2)
                                                      ;     slope /, length 4
                                                      ;     horizontal line, length 19
                                                      ;     triangle /, length 8
                                                      ;     vertical line, length 4
                                                      ;     use PLATFORM
                                                      ;     move to (29,2)
                                                      ;     vertical line, length 8
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (29,9)
                                                      ;     done
                                                      ; enemies: 6
                                                      ;     &07 (2) at (6,8), range (6,11), moving u 2
                                                      ;     &15 (1) at (12,12), range (0,16), moving l 2
                                                      ;     &06 (3) at (17,8), range (5,10), moving u 1
                                                      ;     &1f (2) at (25,6), range (0,12), moving d 1
                                                      ;     &20 (2) at (27,6), range (0,12), moving d 1
                                                      ;     &21 (2) at (26,8), range (2,14), moving d 1
                                                      ; arrows: no, no

; room_1e_data (East Wall Base)
&271a e0 79 5a 96 bc a5 a5 24 25 9c 1c 27 22 09 48 f9 ; items: 0
&272a 35 a0 f5 83 20 91 03 07 be 0a 46 ab ea 47 07 d8 ; exits: left: &1e, right: &1e, up: &16, down: &26
&273a 20 20 91 11 15 a9 cc 51 b0 92 fd c8 e3 03 ed 1f ; conveyor: right, slope: /, rope: no
&274a c7 09 6c 14                                     ; tiles: &71 (3), &72 (2), &48 (3), &49 (1), &4a (2), &4b
                                                      ; screen colours: 0 1 2 6
                                                      ; title tab 9, text "East Wall Base"
                                                      ;     use WALL
                                                      ;     block, width 1, to y 15
                                                      ;     move to (10,0)
                                                      ;     block, width 11, to y 5
                                                      ;     move to (10,15)
                                                      ;     block, width 11, to y 8
                                                      ;     use PLATFORM
                                                      ;     series of 9 tiles at (4,0) (9,1) (6,2) (5,4) (9,5) (6,7) (2,8)
                                                      ;                           (6,10) (9,11)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &1e (3) at (7,12), range (1,13), moving d 7
                                                      ;     &07 (1) at (3,9), range (0,13), moving u 1
                                                      ; arrows: no, no

; room_1f_data (Back Door)
&274e e0 07 fa 98 dc a4 a5 ae 03 ae 2e 5f 61 20 40 ea ; items: 0
&275e 61 e7 e2 81 86 9f 18 46 18 27 91 1f 01 f9 d8 0f ; exits: left: &1f, right: &20, up: &17, down: &31
&276e 49 0f 00                                        ; conveyor: right, slope: /, rope: no
                                                      ; tiles: &e9 (2), &ea (1), &80 (3), &eb (1), &4a (2), &4b
                                                      ; screen colours: 0 2 5 7
                                                      ; title tab 12, text "Back Door"
                                                      ;     use WALL
                                                      ;     move to (16,15)
                                                      ;     block, width 17, to y 8
                                                      ;     move to (17,0)
                                                      ;     block, width 14, to y 4
                                                      ;     horizontal line, length 9
                                                      ;     triangle /, length 4
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 31
                                                      ;     use CONVEYOR
                                                      ;     move to (31,0)
                                                      ;     horizontal line, length 18
                                                      ;     done
                                                      ; enemies: 0
                                                      ; arrows: no, no

; room_20_data (Back Stairway)
&2771 e0 87 c6 14 38 a5 a5 24 bd cf cf 9e 22 21 40 ea ; items: 0
&2781 a5 0c 44 6c 60 1c 90 2f 90 7c bf 47 f9 2b d6 bf ; exits: left: &1f, right: &21, up: &18, down: &32
&2791 09 d0 7f 93 be fe 02 59 84 c0 e5 b1 42 18 c8 95 ; conveyor: right, slope: /, rope: no
&27a1 95 cc 4c 34 57 57 7f 15                         ; tiles: &e6 (1), &e7 (2), &7b (3), &49 (0), &4a (0), &4b
                                                      ; screen colours: 0 5 4 7
                                                      ; title tab 9, text "Back Stairway"
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 31
                                                      ;     move to (0,4)
                                                      ;     horizontal line, length 31
                                                      ;     move to (31,7)
                                                      ;     horizontal line, length 10
                                                      ;     move to (31,10)
                                                      ;     horizontal line, length 13
                                                      ;     move to (31,13)
                                                      ;     horizontal line, length 16
                                                      ;     use WALL
                                                      ;     move to (31,14)
                                                      ;     block, width 18, to y 15
                                                      ;     vertical line, length 15
                                                      ;     slope \, length 0
                                                      ;     use DEADLY
                                                      ;     series of 2 tiles at (1,0) (7,4)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &14 (2) at (4,3), range (0,9), moving d 2
                                                      ;     &1a (3) at (18,6), range (12,25), moving l 2
                                                      ;     &0e (2) at (21,13), range (11,31), moving r 2
                                                      ; arrows: no, no

; room_21_data (Cold Store)
&27a9 f2 41 64 86 dd dd c1 5e 52 c2 ce f6 55 1a 39 8d ; items: 4 (1111)
&27b9 5f ca 2e 92 03 f3 67 39 08 10 48 a8 c0 43 05 15 ; exits: left: &20, right: &22, up: &19, down: &21
&27c9 2e d8 60 2b a7 91 55 fe 92 ed 95 19 b7 87 2e 33 ; conveyor: right, slope: /, rope: yes
&27d9 61 2e 0a ef 93 d4 2f 98 c8 08 27 60 ea 14 19 10 ; tiles: &6d (3), &6e (1), &48 (3), &49 (1), &6f (3), &70
&27e9 c8 88 33 d0 2a 00                               ; screen colours: 4 2 5 7
                                                      ; title tab 11, text "Cold Store"
                                                      ;     use WALL
                                                      ;     horizontal line, length 31
                                                      ;     block, width 26, to y 7
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 0
                                                      ;     move to (0,4)
                                                      ;     horizontal line, length 5
                                                      ;     move to (0,7)
                                                      ;     horizontal line, length 5
                                                      ;     move to (0,10)
                                                      ;     horizontal line, length 7
                                                      ;     move to (0,13)
                                                      ;     horizontal line, length 3
                                                      ;     move to (21,3)
                                                      ;     horizontal line, length 22
                                                      ;     use DEADLY
                                                      ;     series of 6 tiles at (7,15) (9,3) (13,14) (20,12) (24,14)
                                                      ;                           (27,12)
                                                      ;     use ITEM
                                                      ;     series of 4 tiles at (6,4) (6,7) (8,10) (3,13)
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &25 (1) at (15,13), range (0,25), moving l 2
                                                      ;     &22 (3) at (3,9), range (0,6), moving r 2
                                                      ;     &25 (1) at (2,6), range (0,8), moving l 2
                                                      ;     &22 (2) at (7,3), range (0,11), moving r 2
                                                      ; arrows: no, no

; room_22_data (West of Kitchen)
&27ef 10 c6 56 a4 d4 a4 a5 6c f4 ac 2c 3d 41 1a 49 f9 ; items: 0
&27ff 3a fa 94 c8 88 13 7b e0 40 2f ff 40 40 3e 30 72 ; exits: left: &21, right: &23, up: &1a, down: &22
&280f b2 9f 73 8d 96 ec f7 5c 7f e5 ba 2a 4d 5d f5 ab ; conveyor: left, slope: \, rope: no
&281f 46 ad c6 6a 3e 6c 1a 76 71 da 13 43 0e b0 6b c3 ; tiles: &69 (2), &6a (1), &5e (1), &6c (1), &4a (2), &4b
&282f 05 b0 45 a3 0c b0 6b 63 0b b0 27 00             ; screen colours: 0 2 6 3
                                                      ; title tab 4, text "West of Kitchen"
                                                      ;     use WALL
                                                      ;     block, width 1, to y 7
                                                      ;     vertical line, length 7
                                                      ;     triangle /, length 0
                                                      ;     horizontal line, length 0
                                                      ;     horizontal line, length 31
                                                      ;     use PLATFORM
                                                      ;     move to (17,3)
                                                      ;     horizontal line, length 19
                                                      ;     move to (31,3)
                                                      ;     horizontal line, length 29
                                                      ;     move to (17,6)
                                                      ;     horizontal line, length 19
                                                      ;     move to (31,7)
                                                      ;     horizontal line, length 29
                                                      ;     move to (31,10)
                                                      ;     horizontal line, length 29
                                                      ;     move to (26,10)
                                                      ;     horizontal line, length 22
                                                      ;     move to (11,10)
                                                      ;     vertical line, length 15
                                                      ;     series of 6 tiles at (12,5) (13,5) (17,10) (22,7) (24,6)
                                                      ;                           (25,6)
                                                      ;     use CONVEYOR
                                                      ;     move to (26,3)
                                                      ;     horizontal line, length 22
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &18 (3) at (9,12), range (0,13), moving d 2
                                                      ;     &18 (1) at (14,8), range (0,13), moving u 4
                                                      ;     &18 (3) at (20,12), range (0,13), moving d 2
                                                      ;     &18 (2) at (27,4), range (0,13), moving d 4
                                                      ; arrows: no, no

; room_23_data (The Kitchen)
&283b 10 25 76 1c 3c a5 a5 24 81 cd cd 1e a1 fe 53 22 ; items: 0
&284b 23 4e ec 81 e9 f3 d1 af 73 3c eb e3 39 17 81 80 ; exits: left: &22, right: &24, up: &1b, down: &23
&285b 63 05 1e 21 a8 58 23 25 6b 2d 7a 21 05 11 e3 90 ; conveyor: right, slope: /, rope: no
&286b 51 e2 a8 79 62 60 01 f6 64 c8 01 76 6d 78 07 b6 ; tiles: &66 (1), &67 (2), &03 (3), &49 (1), &4a (0), &4b
&287b 68 14 01 f6 04                                  ; screen colours: 0 2 4 7
                                                      ; title tab 10, text "The Kitchen"
                                                      ;     use WALL
                                                      ;     horizontal line, length 23
                                                      ;     block, width 31, to y 1
                                                      ;     move to (31,5)
                                                      ;     block, width 28, to y 7
                                                      ;     horizontal line, length 26
                                                      ;     triangle /, length 7
                                                      ;     horizontal line, length 28
                                                      ;     slope \, length 1
                                                      ;     use PLATFORM
                                                      ;     move to (0,3)
                                                      ;     horizontal line, length 13
                                                      ;     move to (0,7)
                                                      ;     horizontal line, length 8
                                                      ;     move to (0,10)
                                                      ;     horizontal line, length 13
                                                      ;     move to (17,2)
                                                      ;     horizontal line, length 19
                                                      ;     move to (13,6)
                                                      ;     horizontal line, length 11
                                                      ;     series of 1 tile at (18,8)
                                                      ;     use DEADLY
                                                      ;     move to (3,1)
                                                      ;     block, width 4, to y 12
                                                      ;     move to (9,1)
                                                      ;     block, width 10, to y 12
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &18 (2) at (3,4), range (0,13), moving d 4
                                                      ;     &18 (3) at (9,12), range (0,13), moving d 2
                                                      ;     &18 (1) at (15,7), range (0,13), moving u 4
                                                      ;     &18 (2) at (20,4), range (0,13), moving d 4
                                                      ; arrows: no, no

; room_24_data (To the Kitchens    Main Stairway)
&2880 74 9c 3a c9 7e 37 35 36 21 37 32 bc 19 c8 ee fe ; items: 2 (11)
&2890 a7 44 46 9c d8 f4 de 7b 06 08 fb 52 06 22 36 30 ; exits: left: &23, right: &25, up: &1c, down: &24
&28a0 0e 9c 8f 02 1d e8 8a af 55 68 55 24 48 f5 57 b6 ; conveyor: right, slope: \, rope: no
&28b0 c7 32 44 1e be c2 4b b9 f6 ac 45 f1 a2 77 e7 7e ; tiles: &61 (3), &62 (1), &27 (3), &64 (3), &63 (3), &65
&28c0 b9 bf 88 4c 26 59 d8 43 17 91 c9 7c c6 d5 01 15 ; screen colours: 4 1 3 7
&28d0 ed e0 44 5c 99 05 b6 0d 45 63 06 46 69 05 d3 13 ; title tab 0, text "To the Kitchens    Main Stairway"
&28e0 6d a9 94 09 05                                  ;     use WALL
                                                      ;     block, width 31, to y 1
                                                      ;     move to (0,5)
                                                      ;     block, width 1, to y 7
                                                      ;     move to (8,15)
                                                      ;     vertical line, length 13
                                                      ;     move to (8,5)
                                                      ;     vertical line, length 10
                                                      ;     horizontal line, length 9
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 21
                                                      ;     move to (31,10)
                                                      ;     horizontal line, length 27
                                                      ;     move to (28,6)
                                                      ;     horizontal line, length 24
                                                      ;     move to (2,7)
                                                      ;     horizontal line, length 7
                                                      ;     series of 5 tiles at (7,10) (10,7) (11,7) (19,5) (20,5)
                                                      ;     use CONVEYOR
                                                      ;     series of 2 tiles at (15,7) (14,7)
                                                      ;     move to (31,4)
                                                      ;     slope \, length 15
                                                      ;     series of 2 tiles at (2,6) (9,9)
                                                      ;     use DEADLY
                                                      ;     series of 1 tile at (27,12)
                                                      ;     use ITEM
                                                      ;     series of 2 tiles at (2,6) (9,9)
                                                      ;     done
                                                      ; enemies: 6
                                                      ;     &0e (3) at (21,12), range (0,21), moving l 2
                                                      ;     &1c (1) at (3,9), range (2,7), moving r 2
                                                      ;     &26 (2) at (16,3), range (13,22), moving l 2
                                                      ;     &0b (1) at (3,3), range (0,12), moving r 2
                                                      ;     &1a (3) at (16,6), range (11,25), moving l 2
                                                      ;     &1a (2) at (10,9), range (9,18), moving l 2
                                                      ; arrows: no, no

; room_25_data (Ballroom West)
&28e5 fe 4f 32 37 5d 9f 06 52 fa 54 3a da 16 91 10 68 ; items: 7 (1111111)
&28f5 1d 9d 33 af 91 94 0f cc f7 ff bc 55 e4 48 01 02 ; exits: left: &24, right: &26, up: &1d, down: &25
&2905 cc f7 7b 86 bf 02 04 7a 08 1b 28 9b ae 45 4e 5c ; conveyor: right, slope: \, rope: no
&2915 b8 71 e7 c9 9b 1f 7b ac 98 4e 79 2e 98 59 db ad ; tiles: &5b (1), &5c (2), &2a (3), &5f (3), &4a (2), &60
&2925 c3 46 02                                        ; screen colours: 0 1 2 3
                                                      ; title tab 9, text "Ballroom West"
                                                      ;     use WALL
                                                      ;     horizontal line, length 31
                                                      ;     move to (31,15)
                                                      ;     block, width 30, to y 13
                                                      ;     move to (8,9)
                                                      ;     block, width 9, to y 4
                                                      ;     use PLATFORM
                                                      ;     move to (0,1)
                                                      ;     horizontal line, length 31
                                                      ;     move to (31,7)
                                                      ;     horizontal line, length 24
                                                      ;     move to (31,10)
                                                      ;     horizontal line, length 0
                                                      ;     move to (0,5)
                                                      ;     slope /, length 2
                                                      ;     use CONVEYOR
                                                      ;     move to (16,2)
                                                      ;     horizontal line, length 27
                                                      ;     use ITEM
                                                      ;     series of 7 tiles at (17,3) (18,3) (20,3) (22,3) (23,3) (25,3)
                                                      ;                           (27,3)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &1e (2) at (6,10), range (6,11), moving u 2
                                                      ;     &1e (3) at (14,8), range (6,12), moving d 2
                                                      ;     &1b (1) at (22,11), range (16,27), moving l 2
                                                      ; arrows: no, no

; room_26_data (Ballroom East)
&2928 90 e6 5e 9e dc a4 a5 24 25 34 35 ce 21 21 d0 3a ; items: 0
&2938 3a 67 1e 01 29 1f 38 1f fd 15 a7 ae 48 f5 8f 5a ; exits: left: &25, right: &27, up: &1e, down: &27
&2948 c1 0f 5c 20 a8 c8 22 bf 47 4a be ea a9 47 8b 9b ; conveyor: right, slope: /, rope: no
&2958 92 c7 83 9b 75 32 ca 3d b4 a7 4b 9a 29 64 08 b1 ; tiles: &58 (2), &59 (1), &48 (3), &49 (1), &4a (2), &4b
&2968 19                                              ; screen colours: 0 6 1 7
                                                      ; title tab 9, text "Ballroom East"
                                                      ;     use WALL
                                                      ;     block, width 31, to y 1
                                                      ;     move to (31,10)
                                                      ;     horizontal line, length 14
                                                      ;     move to (11,10)
                                                      ;     horizontal line, length 9
                                                      ;     move to (11,15)
                                                      ;     block, width 10, to y 13
                                                      ;     move to (0,15)
                                                      ;     block, width 1, to y 13
                                                      ;     use PLATFORM
                                                      ;     move to (0,10)
                                                      ;     horizontal line, length 9
                                                      ;     vertical line, length 2
                                                      ;     move to (31,7)
                                                      ;     horizontal line, length 9
                                                      ;     move to (4,15)
                                                      ;     vertical line, length 10
                                                      ;     done
                                                      ; enemies: 5
                                                      ;     &1e (2) at (5,10), range (7,12), moving u 4
                                                      ;     &1e (3) at (7,8), range (7,12), moving d 2
                                                      ;     &24 (3) at (24,10), range (14,30), moving l 2
                                                      ;     &1e (1) at (11,10), range (9,12), moving d 1
                                                      ;     &02 (2) at (12,2), range (2,6), moving d 1
                                                      ; arrows: no, no

; room_27_data (The Hall)
&2969 90 15 de bc 5c a5 99 25 79 18 18 2c 62 fe e3 40 ; items: 0
&2979 eb 03 e7 a3 a0 52 a7 49 be c0 0f 91 25 41 86 22 ; exits: left: &26, right: &28, up: &1e, down: &33
&2989 3d 4e 72 c9 82 d6 33 d3 8f 92 94 01 00 de 78 04 ; conveyor: right, slope: \, rope: no
                                                      ; tiles: &30 (1), &30 (1), &3c (3), &49 (1), &33 (2), &4b
                                                      ; screen colours: 0 1 2 3
                                                      ; title tab 12, text "The Hall"
                                                      ;     use WALL
                                                      ;     block, width 31, to y 1
                                                      ;     move to (0,10)
                                                      ;     horizontal line, length 21
                                                      ;     block, width 22, to y 4
                                                      ;     horizontal line, length 31
                                                      ;     move to (0,7)
                                                      ;     slope /, length 2
                                                      ;     use DEADLY
                                                      ;     series of 3 tiles at (8,2) (12,2) (17,2)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &24 (3) at (19,10), range (9,20), moving l 2
                                                      ;     &17 (2) at (19,3), range (5,31), moving l 2
                                                      ;     &12 (3) at (10,6), range (0,0), moving l 0
                                                      ; arrows: yes (11,0), yes (14,1)

; room_28_data (The Front Door)
&2999 38 2f 8a 65 b9 33 4a 49 52 31 88 05 5c fe 47 a3 ; items: 1 (1)
&29a9 b3 f9 61 e7 e2 81 03 f1 a2 a0 a2 e9 82 ee 07 00 ; exits: left: &27, right: &28, up: &28, down: &34
                                                      ; conveyor: right, slope: \, rope: no
                                                      ; tiles: &46 (3), &30 (1), &2a (3), &49 (1), &4a (2), &31
                                                      ; screen colours: 6 1 0 4
                                                      ; title tab 9, text "The Front Door"
                                                      ;     use WALL
                                                      ;     block, width 1, to y 1
                                                      ;     slope \, length 1
                                                      ;     move to (0,10)
                                                      ;     horizontal line, length 11
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (11,11)
                                                      ;     done
                                                      ; enemies: 0
                                                      ; arrows: no, no

; room_29_data (Out on a limb)
&29b9 74 51 95 75 34 e5 96 92 e4 e0 e2 bc 88 70 25 5f ; items: 2 (11)
&29c9 67 2f b8 5a 18 78 a0 95 66 61 96 9f 41 12 72 42 ; exits: left: &28, right: &2a, up: &29, down: &2b
&29d9 da 25 a3 5c d3 e9 e1 5d a4 98 68 32 11 a8 42 b3 ; conveyor: right, slope: /, rope: no
&29e9 01 57 01 53 16 eb 39 9d 2e a2 a4 f7 38 49 ee 06 ; tiles: &39 (1), &3a (1), &38 (2), &49 (1), &4a (1), &3b
&29f9 52 2b 95 bf ca 33 0d 6c 19                      ; screen colours: 0 1 2 7
                                                      ; title tab 8, text "Out on a limb"
                                                      ;     use WALL
                                                      ;     move to (21,2)
                                                      ;     block, width 26, to y 1
                                                      ;     horizontal line, length 26
                                                      ;     move to (31,3)
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 18
                                                      ;     use SLOPE
                                                      ;     move to (25,0)
                                                      ;     horizontal line, length 22
                                                      ;     slope \, length 2
                                                      ;     move to (17,4)
                                                      ;     slope \, length 6
                                                      ;     move to (14,5)
                                                      ;     slope /, length 3
                                                      ;     series of 14 tiles at (2,5) (3,2) (5,9) (6,4) (8,1) (10,8)
                                                      ;                           (11,3) (12,0) (14,10) (16,1) (18,9)
                                                      ;                           (20,6) (23,9) (25,7)
                                                      ;     use ITEM
                                                      ;     series of 2 tiles at (2,9) (5,14)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &24 (1) at (18,7), range (14,24), moving l 2
                                                      ;     &16 (2) at (20,10), range (19,31), moving r 2
                                                      ;     &1e (3) at (12,11), range (0,13), moving u 4
                                                      ; arrows: no, no

; room_2a_data (Tree Top)
&2a02 fc b2 aa 9a e9 c6 ce 26 d9 ce ca 72 11 93 23 21 ; items: 3 (111)
&2a12 2f 3b 7f a0 09 8a 55 50 0c 02 c4 16 aa c8 28 2d ; exits: left: &29, right: &2a, up: &2a, down: &2c
&2a22 c5 1d 48 d8 b6 ee 3c 64 b4 64 05 2b 56 69 d2 7c ; conveyor: right, slope: \, rope: no
&2a32 d0 24 22 85 a2 c2 f0 75 80 10 10 21 c4 48 88 93 ; tiles: &34 (2), &35 (1), &b7 (3), &49 (1), &36 (1), &37
&2a42 20 ba 14 b7 4d a6 c7 09 17 20 d0 7a 27 fa 91 31 ; screen colours: 0 1 2 7
&2a52 2f 50 d0 1d 00                                  ; title tab 12, text "Tree Top"
                                                      ;     use WALL
                                                      ;     move to (18,0)
                                                      ;     vertical line, length 3
                                                      ;     move to (10,0)
                                                      ;     vertical line, length 3
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 0
                                                      ;     move to (3,6)
                                                      ;     horizontal line, length 5
                                                      ;     move to (8,9)
                                                      ;     horizontal line, length 10
                                                      ;     move to (13,2)
                                                      ;     horizontal line, length 14
                                                      ;     slope /, length 0
                                                      ;     horizontal line, length 16
                                                      ;     series of 12 tiles at (13,7) (14,7) (16,9) (17,6) (18,6)
                                                      ;                           (20,1) (21,1) (21,4) (22,4) (22,7)
                                                      ;                           (24,2) (25,2)
                                                      ;     use DEADLY
                                                      ;     move to (5,0)
                                                      ;     vertical line, length 2
                                                      ;     vertical line, length 1
                                                      ;     horizontal line, length 7
                                                      ;     series of 8 tiles at (0,1) (1,0) (2,2) (2,1) (3,1) (4,2) (7,2)
                                                      ;                           (8,2)
                                                      ;     use ITEM
                                                      ;     series of 3 tiles at (17,13) (22,12) (19,2)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &24 (3) at (7,4), range (0,8), moving l 2
                                                      ;     &17 (1) at (23,2), range (5,31), moving l 2
                                                      ;     &23 (3) at (7,10), range (0,20), moving l 2
                                                      ; arrows: yes (7,0), no

; room_2b_data (On a Branch Over the Drive)
&2a57 b8 68 ca 35 b9 d2 d1 4a c6 d3 50 5f 0c 3b 7b c1 ; items: 1 (1)
&2a67 83 11 58 c4 9f ab 24 de ff 70 14 95 1c e0 8f c4 ; exits: left: &28, right: &2c, up: &29, down: &35
&2a77 2b b1 da 8c 96 70 a8 9a a2 88 32 46 55 8c d5 27 ; conveyor: right, slope: /, rope: no
&2a87 5b ba db 67 69 ce a2 c8 69 70 a9 f8 f2 65 74 81 ; tiles: &2b (1), &2c (1), &8f (3), &49 (1), &2d (2), &2e
&2a97 ca 13 32 6b f8 6a 85 97 b0 4b c7 39 e0 f1 e2 95 ; screen colours: 4 1 2 7
&2aa7 70 2b 5b                                        ; title tab 3, text "On a Branch Over the Drive"
                                                      ;     use PLATFORM
                                                      ;     move to (31,8)
                                                      ;     horizontal line, length 17
                                                      ;     slope \, length 4
                                                      ;     horizontal line, length 13
                                                      ;     move to (13,9)
                                                      ;     horizontal line, length 11
                                                      ;     move to (4,3)
                                                      ;     horizontal line, length 5
                                                      ;     move to (11,2)
                                                      ;     horizontal line, length 10
                                                      ;     use DEADLY
                                                      ;     move to (9,8)
                                                      ;     block, width 10, to y 10
                                                      ;     horizontal line, length 12
                                                      ;     move to (21,7)
                                                      ;     block, width 19, to y 6
                                                      ;     horizontal line, length 23
                                                      ;     move to (27,7)
                                                      ;     block, width 26, to y 5
                                                      ;     horizontal line, length 28
                                                      ;     series of 2 tiles at (8,9) (25,6)
                                                      ;     use WALL
                                                      ;     series of 3 tiles at (20,7) (26,7) (26,6)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (5,4)
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &09 (3) at (19,5), range (16,31), moving r 2
                                                      ;     &14 (1) at (7,10), range (8,13), moving d 2
                                                      ;     &1c (3) at (14,7), range (0,7), moving u 1
                                                      ;     &28 (2) at (30,10), range (8,14), moving d 2
                                                      ; arrows: no, yes (11,2)

; room_2c_data (Inside the Megatrunk)
&2aaa 50 b7 d5 b6 dd a4 91 25 31 91 28 2d c2 84 4d 02 ; items: 0
&2aba 93 fb 9f 21 0c e4 58 ac 3a 50 10 51 05 26 28 ca ; exits: left: &2b, right: &2d, up: &2a, down: &36
&2aca 37 69 55 e6 09 d3 d7 aa be 9a 08 a1 5c 02 e5 72 ; conveyor: right, slope: \, rope: no
&2ada 28 07 bb 9a b4 eb 76 e9 d3 89 17 3f 61 62 45 0b ; tiles: &29 (2), &12 (1), &19 (3), &49 (1), &13 (3), &4b
&2aea 16 20 c2 73 cf 28 70 cb 84 2a b0 a8 64 75 78 a8 ; screen colours: 0 1 2 3
&2afa 38 73 fc e8 02 8d 70 cb 82 8e 70 ab 42 8c 70 6b ; title tab 6, text "Inside the Megatrunk"
&2b0a 00                                              ;     use WALL
                                                      ;     move to (0,8)
                                                      ;     horizontal line, length 10
                                                      ;     vertical line, length 0
                                                      ;     move to (18,0)
                                                      ;     vertical line, length 2
                                                      ;     horizontal line, length 31
                                                      ;     move to (18,5)
                                                      ;     vertical line, length 10
                                                      ;     horizontal line, length 25
                                                      ;     slope /, length 8
                                                      ;     move to (18,15)
                                                      ;     vertical line, length 13
                                                      ;     move to (10,15)
                                                      ;     vertical line, length 11
                                                      ;     use DEADLY
                                                      ;     move to (1,0)
                                                      ;     vertical line, length 7
                                                      ;     move to (4,0)
                                                      ;     vertical line, length 7
                                                      ;     move to (7,0)
                                                      ;     vertical line, length 7
                                                      ;     use PLATFORM
                                                      ;     series of 14 tiles at (11,2) (11,7) (11,11) (14,9) (15,9)
                                                      ;                           (14,4) (15,4) (15,12) (16,12) (17,10)
                                                      ;                           (17,6) (16,6) (16,0) (17,0)
                                                      ;     done
                                                      ; enemies: 7
                                                      ;     &1e (1) at (12,5), range (0,14), moving d 2
                                                      ;     &24 (2) at (5,5), range (0,13), moving l 2
                                                      ;     &24 (2) at (26,11), range (16,30), moving l 2
                                                      ;     &23 (3) at (19,3), range (17,31), moving l 2
                                                      ;     &28 (1) at (2,12), range (8,14), moving d 2
                                                      ;     &28 (2) at (5,12), range (8,14), moving d 2
                                                      ;     &28 (3) at (8,12), range (8,14), moving d 2
                                                      ; arrows: no, no

; room_2d_data (Cuckoo's Nest)
&2b0b b8 69 db 3d bb 51 c0 49 02 c3 c0 58 44 a1 82 94 ; items: 1 (1)
&2b1b 73 3b 3d 4b 52 3e 40 c7 13 b1 64 3c 5d 82 71 01 ; exits: left: &2c, right: &2d, up: &2d, down: &37
&2b2b c4 a0 89 74 c1 c7 23 8d 36 30 68 2e 84 c9 48 4d ; conveyor: right, slope: /, rope: no
                                                      ; tiles: &0c (2), &0c (1), &03 (3), &49 (1), &0e (3), &28
                                                      ; screen colours: 0 1 2 3
                                                      ; title tab 10, text "Cuckoo's Nest"
                                                      ;     use PLATFORM
                                                      ;     move to (14,3)
                                                      ;     block, width 17, to y 1
                                                      ;     vertical line, length 4
                                                      ;     block, width 15, to y 2
                                                      ;     slope \, length 2
                                                      ;     use WALL
                                                      ;     horizontal line, length 14
                                                      ;     horizontal line, length 0
                                                      ;     use DEADLY
                                                      ;     move to (16,5)
                                                      ;     horizontal line, length 17
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (15,8)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &16 (3) at (5,11), range (0,12), moving l 2
                                                      ;     &0e (1) at (16,8), range (12,19), moving l 2
                                                      ; arrows: no, yes (6,2)

; room_2e_data (The Bow)
&2b3b b8 eb bb 6e fd be 24 5c 04 3b 27 3d c2 fe 07 5d ; items: 1 (1)
&2b4b 3b d0 61 55 20 3d df af b1 4b 29 96 4f 27 89 38 ; exits: left: &2e, right: &2f, up: &2e, down: &2e
&2b5b df 80 d7 e8 c2 f6 47 59 e7 f6 d1 74 de f8 51 00 ; conveyor: right, slope: \, rope: no
                                                      ; tiles: &92 (1), &73 (3), &83 (3), &e8 (3), &90 (2), &f4
                                                      ; screen colours: 0 2 4 7
                                                      ; title tab 13, text "The Bow"
                                                      ;     use WALL
                                                      ;     move to (24,6)
                                                      ;     vertical line, length 10
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 23
                                                      ;     horizontal line, length 31
                                                      ;     move to (31,5)
                                                      ;     horizontal line, length 13
                                                      ;     series of 3 tiles at (18,8) (26,7) (25,7)
                                                      ;     use DEADLY
                                                      ;     horizontal line, length 17
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 31
                                                      ;     move to (16,1)
                                                      ;     slope \, length 6
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (27,7)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &26 (3) at (23,3), range (22,31), moving l 2
                                                      ;     &0b (2) at (19,13), range (17,31), moving l 2
                                                      ; arrows: no, no

; room_2f_data (The Yacht)
&2b6b b8 1b fa 5e 76 8f 4c ce 07 63 ff 79 44 ff 37 00 ; items: 1 (1)
&2b7b e2 f9 c0 e4 29 8a f3 fd 0a d2 8b 04 15 76 34 20 ; exits: left: &2e, right: &30, up: &2f, down: &2f
&2b8b b8 10 9a 34 b4 8a 2c 79 d3 56 8c 2e 58 7c a4 89 ; conveyor: left, slope: \, rope: no
&2b9b 25 1e 29 d7 e2 36 05                            ; tiles: &fe (3), &1b (2), &83 (3), &cf (2), &c9 (1), &c4
                                                      ; screen colours: 0 1 6 3
                                                      ; title tab 11, text "The Yacht"
                                                      ;     use WALL
                                                      ;     horizontal line, length 19
                                                      ;     block, width 20, to y 5
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 31
                                                      ;     move to (31,5)
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 23
                                                      ;     vertical line, length 2
                                                      ;     move to (0,10)
                                                      ;     horizontal line, length 6
                                                      ;     slope /, length 5
                                                      ;     horizontal line, length 0
                                                      ;     horizontal line, length 3
                                                      ;     vertical line, length 1
                                                      ;     use WALL
                                                      ;     move to (18,5)
                                                      ;     horizontal line, length 5
                                                      ;     vertical line, length 10
                                                      ;     use DEADLY
                                                      ;     series of 3 tiles at (15,6) (11,6) (20,6)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (13,1)
                                                      ;     done
                                                      ; enemies: 2
                                                      ;     &16 (1) at (8,13), range (4,15), moving l 2
                                                      ;     &13 (2) at (21,10), range (7,13), moving u 2
                                                      ; arrows: no, no

; room_30_data (The Beach)
&2ba2 b8 1f 87 81 9b fd c2 ff 7c 7f 7d de cb fc 07 09 ; items: 1 (1)
&2bb2 40 fc e0 50 30 1d e1 7c 17 68 28 5a a0 48 96 05 ; exits: left: &2f, right: &31, up: &30, down: &30
&2bc2 59 8a 54 89 2e 34 7a 00                         ; conveyor: left, slope: /, rope: yes
                                                      ; tiles: &f9 (2), &fa (1), &fb (2), &fc (1), &0f (3), &fd
                                                      ; screen colours: 4 6 3 7
                                                      ; title tab 12, text "The Beach"
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 5
                                                      ;     use PLATFORM
                                                      ;     block, width 23, to y 1
                                                      ;     use WALL
                                                      ;     block, width 31, to y 7
                                                      ;     move to (0,5)
                                                      ;     horizontal line, length 5
                                                      ;     use SLOPE
                                                      ;     series of 1 tile at (5,1)
                                                      ;     use DEADLY
                                                      ;     series of 4 tiles at (8,2) (13,2) (17,2) (21,2)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (22,2)
                                                      ;     done
                                                      ; enemies: 0
                                                      ; arrows: no, no

; room_31_data (Tool Shed)
&2bca 78 98 fc 31 b5 9f 1e 9f e0 1d 1d 4e 44 65 e7 f4 ; items: 1 (1)
&2bda 4b 9c e0 03 87 39 ce 84 b3 7d 7e f9 37 71 d4 ab ; exits: left: &30, right: &32, up: &1f, down: &31
&2bea fe bb 48 3e 37 c0 86 14 2d c6 bd 47 29 5c 7c d0 ; conveyor: right, slope: /, rope: no
&2bfa 50 b2 10 86 2e 70 7c 4c 06 e3 01 a5 85 e5 1d c9 ; tiles: &e1 (3), &e2 (1), &1e (3), &e4 (2), &e3 (2), &e5
&2c0a ca e4 45 0d                                     ; screen colours: 0 1 2 6
                                                      ; title tab 10, text "Tool Shed"
                                                      ;     use WALL
                                                      ;     block, width 6, to y 7
                                                      ;     use CONVEYOR
                                                      ;     horizontal line, length 25
                                                      ;     use WALL
                                                      ;     block, width 27, to y 7
                                                      ;     block, width 31, to y 10
                                                      ;     move to (31,13)
                                                      ;     horizontal line, length 17
                                                      ;     block, width 10, to y 15
                                                      ;     move to (10,15)
                                                      ;     triangle \, length 13
                                                      ;     use SLOPE
                                                      ;     move to (7,12)
                                                      ;     slope \, length 8
                                                      ;     use PLATFORM
                                                      ;     series of 9 tiles at (9,4) (11,4) (12,7) (15,7) (17,4) (20,3)
                                                      ;                           (20,7) (24,2) (24,5)
                                                      ;     use DEADLY
                                                      ;     series of 1 tile at (16,12)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (7,1)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &09 (2) at (16,6), range (7,16), moving l 2
                                                      ;     &16 (1) at (16,13), range (7,23), moving l 2
                                                      ;     &0d (3) at (9,9), range (7,20), moving r 2
                                                      ; arrows: no, no

; room_32_data (The Wine Cellar)
&2c0e f6 8f 73 30 e5 ca ad 8d cd 80 f5 35 8f 88 ff 9a ; items: 6 (111111)
&2c1e b0 e4 21 a2 35 88 07 0e ac c1 32 0c 33 e7 d0 fc ; exits: left: &31, right: &33, up: &20, down: &32
&2c2e 77 ff 9c ad ca 76 7b ae c8 07 57 98 ac 02 4a c2 ; conveyor: right, slope: /, rope: no
&2c3e b0 03 0f e7 97 80 64 8b 67 b9 2a 55 b0 21 ab be ; tiles: &d6 (1), &d7 (2), &80 (2), &d9 (2), &d8 (3), &da
&2c4e 4c 79 37 ee c5 08 59 f6 6c 38 73 7b ba 8a 94 10 ; screen colours: 0 1 6 3
&2c5e 89 13 47 4f 3f 51 2b 83 83 54 95 91 83 52 53 a2 ; title tab 8, text "The Wine Cellar"
&2c6e 83 d6 c2 f2 8e 04                               ;     use WALL
                                                      ;     block, width 1, to y 10
                                                      ;     block, width 3, to y 4
                                                      ;     block, width 6, to y 1
                                                      ;     horizontal line, length 25
                                                      ;     block, width 28, to y 2
                                                      ;     block, width 31, to y 15
                                                      ;     move to (27,15)
                                                      ;     block, width 28, to y 13
                                                      ;     vertical line, length 10
                                                      ;     horizontal line, length 27
                                                      ;     move to (27,7)
                                                      ;     horizontal line, length 29
                                                      ;     move to (2,7)
                                                      ;     block, width 3, to y 10
                                                      ;     horizontal line, length 6
                                                      ;     move to (6,10)
                                                      ;     horizontal line, length 0
                                                      ;     vertical line, length 4
                                                      ;     horizontal line, length 6
                                                      ;     use CONVEYOR
                                                      ;     move to (24,1)
                                                      ;     slope /, length 3
                                                      ;     horizontal line, length 31
                                                      ;     vertical line, length 4
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 19
                                                      ;     move to (20,7)
                                                      ;     horizontal line, length 26
                                                      ;     move to (26,10)
                                                      ;     horizontal line, length 21
                                                      ;     move to (0,13)
                                                      ;     horizontal line, length 4
                                                      ;     series of 6 tiles at (15,10) (12,10) (15,7) (12,7) (15,4)
                                                      ;                           (12,4)
                                                      ;     use DEADLY
                                                      ;     series of 4 tiles at (15,3) (12,3) (19,3) (22,15)
                                                      ;     use ITEM
                                                      ;     series of 6 tiles at (2,5) (4,2) (4,8) (28,8) (28,5) (28,11)
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &15 (1) at (21,3), range (0,28), moving l 2
                                                      ;     &15 (2) at (10,6), range (4,28), moving l 2
                                                      ;     &15 (3) at (18,9), range (2,28), moving l 2
                                                      ;     &16 (1) at (16,13), range (7,23), moving l 2
                                                      ; arrows: no, no

; room_33_data (The Forgotten Abbey)
&2c74 78 5a f2 59 5e aa ab a8 a9 2a 2b bd 82 fd 47 5d ; items: 1 (1)
&2c84 64 2e 67 62 1f 80 90 8c 03 07 fe 60 cc f7 ff 3c ; exits: left: &32, right: &34, up: &27, down: &33
&2c94 1e 78 c5 60 a0 88 e8 a0 4c 72 97 af 21 c5 8a 0a ; conveyor: left, slope: \, rope: no
&2ca4 4b 22 97 2c cb 0d 3b 36 3a 5d 40 f3 5c e5 4b 2c ; tiles: &52 (1), &53 (2), &55 (2), &56 (3), &54 (1), &57
&2cb4 52 35 ab 32 4a 4d eb 07 5a 1d db be 52 55 29 36 ; screen colours: 0 2 5 7
&2cc4 4a 15 4a 2a 5a f5 2a 2f 0a                      ; title tab 6, text "The Forgotten Abbey"
                                                      ;     use WALL
                                                      ;     block, width 1, to y 15
                                                      ;     block, width 3, to y 1
                                                      ;     horizontal line, length 31
                                                      ;     move to (31,15)
                                                      ;     block, width 30, to y 3
                                                      ;     block, width 1, to y 14
                                                      ;     vertical line, length 3
                                                      ;     use PLATFORM
                                                      ;     block, width 1, to y 4
                                                      ;     move to (2,2)
                                                      ;     slope /, length 1
                                                      ;     move to (6,4)
                                                      ;     horizontal line, length 29
                                                      ;     series of 4 tiles at (29,6) (2,5) (3,5) (2,10)
                                                      ;     use CONVEYOR
                                                      ;     move to (4,8)
                                                      ;     horizontal line, length 29
                                                      ;     use DEADLY
                                                      ;     series of 4 tiles at (9,13) (16,13) (24,13) (17,7)
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (2,12)
                                                      ;     done
                                                      ; enemies: 7
                                                      ;     &15 (1) at (7,13), range (4,13), moving l 2
                                                      ;     &15 (2) at (12,13), range (10,19), moving l 2
                                                      ;     &15 (3) at (18,13), range (15,24), moving l 2
                                                      ;     &15 (1) at (24,13), range (22,31), moving r 2
                                                      ;     &15 (2) at (10,9), range (8,27), moving l 2
                                                      ;     &15 (3) at (8,5), range (4,21), moving l 2
                                                      ;     &15 (2) at (15,5), range (9,29), moving l 2
                                                      ; arrows: no, no

; room_34_data (The Security Guard)
&2ccd 30 af c5 b5 3c a5 a5 f0 ad 71 71 1e c1 ff 4b 04 ; items: 0
&2cdd 95 28 f2 78 ac 80 88 0f 0c 94 41 de 7c f4 db 1c ; exits: left: &33, right: &35, up: &28, down: &3a
&2ced 9d c5 76 9b c2 46 2b d6 59 b1 da 46 72 a8 e0 ab ; conveyor: right, slope: \, rope: no
&2cfd 06 59 d8 f7 85 7f 02 48 3d 5a e7 e9 7e cf c2 7e ; tiles: &1c (1), &1d (2), &6b (3), &1f (1), &4a (2), &4b
&2d0d ca 7b 52 9a 66 76 5a fa a0 76 55 26 67 f6 5c 8e ; screen colours: 0 2 4 7
&2d1d 66 76 09                                        ; title tab 7, text "The Security Guard"
                                                      ;     use WALL
                                                      ;     horizontal line, length 1
                                                      ;     move to (6,0)
                                                      ;     horizontal line, length 30
                                                      ;     block, width 31, to y 1
                                                      ;     move to (31,6)
                                                      ;     block, width 28, to y 5
                                                      ;     block, width 26, to y 3
                                                      ;     move to (23,6)
                                                      ;     block, width 20, to y 3
                                                      ;     move to (17,6)
                                                      ;     vertical line, length 3
                                                      ;     move to (14,6)
                                                      ;     vertical line, length 3
                                                      ;     move to (11,6)
                                                      ;     block, width 9, to y 3
                                                      ;     horizontal line, length 5
                                                      ;     move to (0,15)
                                                      ;     vertical line, length 10
                                                      ;     block, width 2, to y 6
                                                      ;     horizontal line, length 6
                                                      ;     triangle \, length 15
                                                      ;     move to (1,15)
                                                      ;     slope /, length 8
                                                      ;     use PLATFORM
                                                      ;     move to (5,7)
                                                      ;     horizontal line, length 11
                                                      ;     move to (14,7)
                                                      ;     horizontal line, length 23
                                                      ;     move to (31,7)
                                                      ;     horizontal line, length 26
                                                      ;     use CONVEYOR
                                                      ;     move to (31,2)
                                                      ;     horizontal line, length 30
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &29 (1) at (12,11), range (6,13), moving d 1
                                                      ;     &29 (2) at (15,8), range (5,13), moving d 2
                                                      ;     &29 (3) at (18,7), range (6,13), moving d 4
                                                      ;     &29 (1) at (24,11), range (6,13), moving d 2
                                                      ; arrows: no, no

; room_35_data (The Drive)
&2d20 b0 6c f5 3d fc a4 a5 f0 33 71 71 66 62 fe c3 51 ; items: 0
&2d30 54 72 e0 20 2b ff 40 3e c8 b0 42 94 c0 83 88 40 ; exits: left: &34, right: &36, up: &2b, down: &3b
&2d40 06 f2 60 c0 02 0a 7c ca f9 d5 5f 9d d4 0e 0f 99 ; conveyor: right, slope: \, rope: no
&2d50 a4 72 4f 95 f0 64 0f 95 64 05 1f 09             ; tiles: &1c (2), &1d (3), &99 (3), &1f (1), &4a (0), &4b
                                                      ; screen colours: 0 1 3 6
                                                      ; title tab 12, text "The Drive"
                                                      ;     use WALL
                                                      ;     block, width 2, to y 6
                                                      ;     vertical line, length 7
                                                      ;     triangle /, length 0
                                                      ;     horizontal line, length 31
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 24
                                                      ;     move to (21,0)
                                                      ;     horizontal line, length 10
                                                      ;     move to (0,7)
                                                      ;     horizontal line, length 2
                                                      ;     use DEADLY
                                                      ;     move to (0,4)
                                                      ;     block, width 1, to y 3
                                                      ;     block, width 3, to y 0
                                                      ;     use CONVEYOR
                                                      ;     move to (0,2)
                                                      ;     horizontal line, length 1
                                                      ;     done
                                                      ; enemies: 5
                                                      ;     &0e (3) at (15,13), range (11,31), moving r 2
                                                      ;     &24 (1) at (21,11), range (16,30), moving l 2
                                                      ;     &24 (2) at (18,10), range (14,30), moving r 2
                                                      ;     &24 (2) at (7,9), range (6,30), moving l 2
                                                      ;     &24 (1) at (19,5), range (0,31), moving l 2
                                                      ; arrows: no, no

; room_36_data (At the Foot of the Megatree)
&2d5c fc 75 6f 9e ed 86 8a 2c d9 8e 84 68 11 04 f2 fd ; items: 3 (111)
&2d6c 8f 3a 97 af a3 f7 3f 43 18 c8 91 90 03 f2 d5 1a ; exits: left: &35, right: &37, up: &2c, down: &3c
&2d7c 7b 28 41 3f 89 fa 8a 5d 8e 11 2d 98 6e e8 8f a4 ; conveyor: right, slope: \, rope: no
&2d8c 62 7f 27 d5 d7 e5 ab be 98 08 bf 54 f2 65 f2 2f ; tiles: &11 (2), &12 (1), &b7 (3), &49 (1), &13 (3), &15
&2d9c a5 4b 50 88 72 79 a2 89 25 1e 55 20 a7 36 59 50 ; screen colours: 0 1 2 3
&2dac c7 36 59 88 c2 26 05                            ; title tab 2, text "At the Foot of the Megatree"
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 31
                                                      ;     move to (11,5)
                                                      ;     horizontal line, length 13
                                                      ;     slope /, length 2
                                                      ;     horizontal line, length 16
                                                      ;     move to (15,12)
                                                      ;     horizontal line, length 17
                                                      ;     move to (15,10)
                                                      ;     horizontal line, length 13
                                                      ;     series of 4 tiles at (17,8) (17,6) (16,6) (11,11)
                                                      ;     use WALL
                                                      ;     move to (31,8)
                                                      ;     horizontal line, length 18
                                                      ;     vertical line, length 3
                                                      ;     move to (31,11)
                                                      ;     horizontal line, length 18
                                                      ;     vertical line, length 15
                                                      ;     vertical line, length 14
                                                      ;     horizontal line, length 31
                                                      ;     move to (10,15)
                                                      ;     vertical line, length 3
                                                      ;     use DEADLY
                                                      ;     move to (1,15)
                                                      ;     vertical line, length 5
                                                      ;     move to (4,15)
                                                      ;     vertical line, length 6
                                                      ;     move to (7,15)
                                                      ;     vertical line, length 5
                                                      ;     use ITEM
                                                      ;     series of 3 tiles at (1,4) (4,5) (7,4)
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &16 (2) at (8,13), range (4,15), moving l 2
                                                      ;     &28 (1) at (2,7), range (5,13), moving u 2
                                                      ;     &28 (1) at (5,7), range (3,13), moving u 2
                                                      ;     &28 (2) at (8,10), range (3,12), moving u 2
                                                      ; arrows: no, no

; room_37_data (Under the Megatree)
&2db3 78 3b da 3d 83 21 c0 c1 c0 c0 c2 5c 84 17 8b 49 ; items: 1 (1)
&2dc3 bc ff 19 c2 40 8e 84 1c 22 ff c8 31 ab fb f1 97 ; exits: left: &36, right: &38, up: &2d, down: &37
&2dd3 38 69 97 ec e5 4b 0b f2 77 79 89 92 ae 5c a7 75 ; conveyor: right, slope: /, rope: no
&2de3 57 d1 53 b6 ea 61 37 6c 5c 28 88 30 41 87 08 2e ; tiles: &0c (2), &0d (1), &0c (0), &0c (0), &0e (3), &10
&2df3 92 2e b4 7f ec b9 62 e6 a8 6f a6 1f 69 fb 05 1f ; screen colours: 0 1 2 7
&2e03 0d                                              ; title tab 7, text "Under the Megatree"
                                                      ;     use DEADLY
                                                      ;     move to (7,15)
                                                      ;     horizontal line, length 9
                                                      ;     block, width 12, to y 13
                                                      ;     move to (14,15)
                                                      ;     block, width 15, to y 14
                                                      ;     horizontal line, length 17
                                                      ;     block, width 18, to y 13
                                                      ;     series of 3 tiles at (13,14) (19,14) (18,13)
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 31
                                                      ;     series of 14 tiles at (7,10) (8,10) (9,7) (10,7) (11,9) (13,7)
                                                      ;                           (14,10) (17,7) (18,9) (22,10) (23,8)
                                                      ;                           (13,13) (16,13) (17,13)
                                                      ;     use WALL
                                                      ;     move to (0,8)
                                                      ;     horizontal line, length 6
                                                      ;     move to (0,11)
                                                      ;     horizontal line, length 4
                                                      ;     move to (0,14)
                                                      ;     horizontal line, length 9
                                                      ;     use ITEM
                                                      ;     series of 1 tile at (22,15)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &1e (1) at (14,10), range (6,12), moving d 4
                                                      ;     &17 (1) at (27,3), range (5,31), moving l 2
                                                      ;     &1b (3) at (15,13), range (0,31), moving l 2
                                                      ; arrows: no, no

; room_38_data (The Bridge)
&2e04 b0 9f c7 91 54 a5 21 24 03 c0 c1 3e 21 ff 83 51 ; items: 0
&2e14 60 46 0e 0c fb f0 68 30 f2 24 f8 00 48 cb 17 40 ; exits: left: &37, right: &39, up: &38, down: &38
&2e24 38 31 c0 18 7c 9c 88 02 0a 95 e4 72 0f ed 1a 81 ; conveyor: right, slope: /, rope: no
&2e34 fa 0b                                           ; tiles: &06 (1), &07 (1), &80 (1), &49 (1), &08 (2), &4b
                                                      ; screen colours: 0 2 6 7
                                                      ; title tab 9, text "The Bridge"
                                                      ;     use WALL
                                                      ;     horizontal line, length 6
                                                      ;     triangle /, length 3
                                                      ;     block, width 11, to y 0
                                                      ;     move to (17,3)
                                                      ;     block, width 18, to y 0
                                                      ;     triangle /, length 0
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 22
                                                      ;     horizontal line, length 31
                                                      ;     move to (0,0)
                                                      ;     horizontal line, length 7
                                                      ;     use DEADLY
                                                      ;     move to (16,0)
                                                      ;     block, width 12, to y 1
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &24 (2) at (8,10), range (0,10), moving l 2
                                                      ;     &24 (3) at (19,10), range (14,30), moving l 2
                                                      ;     &1d (1) at (12,4), range (1,11), moving d 7
                                                      ; arrows: no, no

; room_39_data (The Off Licence)
&2e36 f3 ff c7 79 9e b8 0d 14 08 04 18 10 e0 22 f2 3f ; items: 12 (111111111111)
&2e46 47 e9 d3 02 11 8b c8 81 7a 89 a9 c9 2f 28 c9 ba ; exits: left: &38, right: &39, up: &39, down: &39
&2e56 00 f2 03 b0 cf 92 c9 82 4b ea eb e4 c7 1e 57 60 ; conveyor: left, slope: /, rope: no
&2e66 97 b9 72 68 4f d9 f1 fc d4 00                   ; tiles: &00 (2), &01 (1), &03 (3), &04 (2), &02 (3), &05
                                                      ; screen colours: 0 1 2 7
                                                      ; title tab 9, text "The Off Licence"
                                                      ;     use WALL
                                                      ;     move to (15,4)
                                                      ;     horizontal line, length 12
                                                      ;     vertical line, length 12
                                                      ;     horizontal line, length 31
                                                      ;     vertical line, length 0
                                                      ;     vertical line, length 4
                                                      ;     horizontal line, length 26
                                                      ;     slope \, length 0
                                                      ;     use PLATFORM
                                                      ;     horizontal line, length 31
                                                      ;     horizontal line, length 0
                                                      ;     use CONVEYOR
                                                      ;     move to (30,6)
                                                      ;     horizontal line, length 19
                                                      ;     use DEADLY
                                                      ;     series of 1 tile at (14,9)
                                                      ;     use ITEM
                                                      ;     move to (30,11)
                                                      ;     horizontal line, length 19
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &1e (1) at (7,5), range (0,13), moving d 2
                                                      ;     &27 (2) at (10,7), range (1,13), moving d 4
                                                      ;     &26 (3) at (28,7), range (19,30), moving r 2
                                                      ; arrows: no, no

; room_3a_data (Entrance to Hades)
&2e70 70 5d d7 15 b1 a5 a5 24 89 08 75 10 3a 89 cd 11 ; items: 0
&2e80 58 44 6e 76 8f 03 4c d2 81 03 1f f8 29 b7 cc 4d ; exits: left: &3a, right: &3a, up: &3a, down: &3a
&2e90 a5 4e 2a b5 51 99 91 ca f4 5c aa e5 52 35 95 c9 ; conveyor: right, slope: /, rope: no
&2ea0 a9 6c 5f a8 14 a5 ce 1c 25 cb 9a 24 73 a6 6a dd ; tiles: &5c (3), &21 (2), &22 (1), &49 (0), &4a (1), &4b
&2eb0 16 2f ab dd 5a 9f b1 b5 f1 a6 ac b5 67 4a 6d ba ; screen colours: 3 1 4 0
&2ec0 a1 6a d0 0e 47 c9 1a 1d 46 cc d8 70 e2 c6 87 2e ; title tab 9, text "Entrance to Hades"
&2ed0 52 d4 78 ec a3 06 3a 1e 90 06 3a 1e e2 45 36 0e ;     use WALL
                                                      ;     block, width 1, to y 15
                                                      ;     use PLATFORM
                                                      ;     move to (31,2)
                                                      ;     horizontal line, length 29
                                                      ;     vertical line, length 6
                                                      ;     move to (27,2)
                                                      ;     vertical line, length 5
                                                      ;     move to (25,2)
                                                      ;     vertical line, length 5
                                                      ;     move to (22,2)
                                                      ;     vertical line, length 6
                                                      ;     move to (17,2)
                                                      ;     vertical line, length 6
                                                      ;     move to (15,3)
                                                      ;     vertical line, length 5
                                                      ;     move to (13,3)
                                                      ;     vertical line, length 5
                                                      ;     move to (11,2)
                                                      ;     vertical line, length 6
                                                      ;     move to (7,2)
                                                      ;     vertical line, length 6
                                                      ;     series of 16 tiles at (8,5) (9,4) (10,5) (14,6) (14,2) (18,6)
                                                      ;                           (19,5) (18,4) (19,3) (19,2) (21,6)
                                                      ;                           (23,6) (26,3) (26,6) (21,11) (22,11)
                                                      ;     move to (15,9)
                                                      ;     horizontal line, length 13
                                                      ;     vertical line, length 13
                                                      ;     horizontal line, length 15
                                                      ;     move to (18,9)
                                                      ;     vertical line, length 13
                                                      ;     move to (23,9)
                                                      ;     horizontal line, length 20
                                                      ;     vertical line, length 13
                                                      ;     horizontal line, length 23
                                                      ;     move to (16,10)
                                                      ;     vertical line, length 12
                                                      ;     use SLOPE
                                                      ;     series of 13 tiles at (7,1) (9,3) (11,1) (14,1) (17,1) (19,1)
                                                      ;                           (22,1) (25,1) (27,1) (30,1) (14,8)
                                                      ;                           (18,8) (21,8)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &1f (3) at (2,11), range (0,11), moving u 1
                                                      ;     &20 (3) at (4,11), range (0,11), moving u 1
                                                      ;     &21 (3) at (3,13), range (2,13), moving u 1
                                                      ; arrows: no, no

; room_3b_data (Under the Drive)
&2ee0 70 3d eb ad 2d 17 27 16 8a c6 c7 1e 22 8b c5 24 ; items: 0
&2ef0 de ff 70 14 95 1c 38 f0 6b 3e 10 95 ef f8 59 3d ; exits: left: &3a, right: &3c, up: &35, down: &3b
&2f00 bf e6 c5 9c 04 06 8f 5f 89 55 b2 66 9b 3e d8 af ; conveyor: left, slope: \, rope: no
&2f10 49 64 39 62 c3 85 c5 1e 27 ae cd 43 32 2d ea 97 ; tiles: &c6 (1), &c7 (2), &a2 (2), &d0 (1), &c8 (3), &d1
&2f20 2b 49 80 58 01                                  ; screen colours: 0 1 4 7
                                                      ; title tab 9, text "Under the Drive"
                                                      ;     use WALL
                                                      ;     block, width 1, to y 15
                                                      ;     vertical line, length 12
                                                      ;     triangle /, length 0
                                                      ;     horizontal line, length 10
                                                      ;     horizontal line, length 31
                                                      ;     move to (24,15)
                                                      ;     block, width 26, to y 11
                                                      ;     block, width 31, to y 10
                                                      ;     block, width 30, to y 8
                                                      ;     block, width 28, to y 9
                                                      ;     use PLATFORM
                                                      ;     move to (16,7)
                                                      ;     horizontal line, length 15
                                                      ;     series of 5 tiles at (17,10) (20,9) (21,9) (22,12) (23,12)
                                                      ;     use CONVEYOR
                                                      ;     move to (31,5)
                                                      ;     horizontal line, length 18
                                                      ;     use DEADLY
                                                      ;     series of 4 tiles at (17,1) (22,1) (26,1) (20,6)
                                                      ;     done
                                                      ; enemies: 3
                                                      ;     &24 (1) at (14,11), range (12,30), moving l 2
                                                      ;     &0c (3) at (22,8), range (21,31), moving r 1
                                                      ;     &14 (2) at (18,4), range (0,8), moving d 2
                                                      ; arrows: no, no

; room_3c_data (Tree Root)
&2f25 f4 fd 3c 0f 72 5b 9c 5b c0 9b 9d f9 8a c9 91 90 ; items: 2 (11)
&2f35 17 9d cb 07 e6 67 14 7e bc 7e 1e 4c 9b 29 3e 61 ; exits: left: &3b, right: &3c, up: &3c, down: &3c
&2f45 c6 d4 a8 1d 16 82 1f 1c 40 2f 19 6a 8f c2 02 8d ; conveyor: left, slope: /, rope: no
&2f55 21 cb 0c 35 7a ac 48 17 d5 dc 7e 42 11 01 22 ed ; tiles: &cc (2), &cd (1), &1e (3), &d0 (1), &ce (2), &d1
&2f65 d9 64 76 65 a7 f4 03 6d ae 24 32 05             ; screen colours: 0 5 6 7
                                                      ; title tab 12, text "Tree Root"
                                                      ;     use WALL
                                                      ;     horizontal line, length 31
                                                      ;     horizontal line, length 24
                                                      ;     vertical line, length 1
                                                      ;     triangle /, length 7
                                                      ;     vertical line, length 15
                                                      ;     block, width 30, to y 0
                                                      ;     block, width 22, to y 12
                                                      ;     block, width 20, to y 7
                                                      ;     block, width 16, to y 12
                                                      ;     block, width 12, to y 10
                                                      ;     block, width 10, to y 13
                                                      ;     block, width 6, to y 8
                                                      ;     move to (0,15)
                                                      ;     block, width 3, to y 8
                                                      ;     use PLATFORM
                                                      ;     move to (15,4)
                                                      ;     horizontal line, length 24
                                                      ;     move to (11,7)
                                                      ;     horizontal line, length 10
                                                      ;     use CONVEYOR
                                                      ;     move to (0,5)
                                                      ;     horizontal line, length 12
                                                      ;     use DEADLY
                                                      ;     series of 4 tiles at (6,1) (11,1) (15,1) (21,1)
                                                      ;     use ITEM
                                                      ;     series of 2 tiles at (10,12) (29,11)
                                                      ;     done
                                                      ; enemies: 4
                                                      ;     &0a (3) at (4,4), range (0,8), moving u 2
                                                      ;     &1e (2) at (13,9), range (6,13), moving d 2
                                                      ;     &1b (3) at (18,9), range (15,24), moving l 2
                                                      ;     &19 (2) at (26,9), range (4,9), moving u 2
                                                      ; arrows: no, no

; room_00_data (Game Over screen)
&2f71 86 fc 79 3f 84 fc 00 00 06 3d 00 a0 02          ; enemies: 3
                                                      ;     &02 (1) @ (15,14), range (15,15), moving d 0
                                                      ;     &02 (3) @ (15,12), range (0,0), moving l 0
                                                      ;     &01 (2) @ (15,0), range (0,0), moving r 2

; unused
&2f7e 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
&2f8e 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
&2f9e 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
&2fae 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
&2fbe 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
&2fce 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
&2fde 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
&2fee 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
&2ffe 00 00
